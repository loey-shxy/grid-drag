{"version":3,"file":"index.umd.js","sources":["../packages/src/utils/constant.ts","../packages/src/utils/grid.ts","../packages/src/components/GridsterItem.vue","../packages/src/components/AddComponent.vue","../node_modules/@arco-design/web-vue/es/_utils/is.js","../node_modules/@arco-design/web-vue/es/config-provider/context.js","../node_modules/@arco-design/web-vue/es/_utils/global-config.js","../node_modules/@arco-design/web-vue/es/_utils/vue-utils.js","../node_modules/@arco-design/web-vue/es/_utils/dom.js","../node_modules/@arco-design/web-vue/es/_virtual/plugin-vue_export-helper.js","../node_modules/@arco-design/web-vue/es/_components/icon-hover.js","../node_modules/@arco-design/web-vue/es/icon/icon-close/icon-close.js","../node_modules/@arco-design/web-vue/es/icon/icon-close/index.js","../node_modules/@arco-design/web-vue/es/icon/icon-info-circle-fill/icon-info-circle-fill.js","../node_modules/@arco-design/web-vue/es/icon/icon-info-circle-fill/index.js","../node_modules/@arco-design/web-vue/es/icon/icon-check-circle-fill/icon-check-circle-fill.js","../node_modules/@arco-design/web-vue/es/icon/icon-check-circle-fill/index.js","../node_modules/@arco-design/web-vue/es/icon/icon-exclamation-circle-fill/icon-exclamation-circle-fill.js","../node_modules/@arco-design/web-vue/es/icon/icon-exclamation-circle-fill/index.js","../node_modules/@arco-design/web-vue/es/icon/icon-close-circle-fill/icon-close-circle-fill.js","../node_modules/@arco-design/web-vue/es/icon/icon-close-circle-fill/index.js","../node_modules/@arco-design/web-vue/es/icon/icon-loading/icon-loading.js","../node_modules/@arco-design/web-vue/es/icon/icon-loading/index.js","../node_modules/@arco-design/web-vue/es/_hooks/use-popup-manager.js","../node_modules/@arco-design/web-vue/es/message/message.js","../node_modules/@arco-design/web-vue/es/message/message-list.js","../node_modules/@arco-design/web-vue/es/message/index.js","../node_modules/@arco-design/web-vue/es/_utils/constant.js","../packages/src/components/GridDrag.vue","../packages/src/index.ts"],"sourcesContent":["export const COLUMNS = 24","import type { ComponentItemModel, GridConfig, Position, Size, ContainerInfo } from \"../types/layout\";\r\nimport { COLUMNS } from \"./constant\";\r\n\r\n// 计算两个组件之间的最小距离\r\nfunction getComponentDistance(comp1: ComponentItemModel, comp2: ComponentItemModel): number {\r\n  // 计算水平距离\r\n  let horizontalDistance = 0;\r\n  if (comp1.x + comp1.width <= comp2.x) {\r\n    // comp1 在 comp2 左侧\r\n    horizontalDistance = comp2.x - (comp1.x + comp1.width);\r\n  } else if (comp2.x + comp2.width <= comp1.x) {\r\n    // comp1 在 comp2 右侧\r\n    horizontalDistance = comp1.x - (comp2.x + comp2.width);\r\n  }\r\n\r\n  // 计算垂直距离\r\n  let verticalDistance = 0;\r\n  if (comp1.y + comp1.height <= comp2.y) {\r\n    // comp1 在 comp2 上方\r\n    verticalDistance = comp2.y - (comp1.y + comp1.height);\r\n  } else if (comp2.y + comp2.height <= comp1.y) {\r\n    // comp1 在 comp2 下方\r\n    verticalDistance = comp1.y - (comp2.y + comp2.height);\r\n  }\r\n\r\n  // 如果组件重叠，返回0\r\n  if (horizontalDistance === 0 && verticalDistance === 0) {\r\n    return 0;\r\n  }\r\n\r\n  // 返回最小距离（如果一个方向重叠，则返回另一个方向的距离）\r\n  if (horizontalDistance === 0) return verticalDistance;\r\n  if (verticalDistance === 0) return horizontalDistance;\r\n\r\n  // 如果两个方向都有距离，返回较小的那个\r\n  return Math.min(horizontalDistance, verticalDistance);\r\n}\r\n\r\n// 检查组件调整大小后是否需要重新布局\r\nfunction shouldTriggerLayout(\r\n  resizingComponent: ComponentItemModel,\r\n  newPosition: Position,\r\n  newSize: Size,\r\n  allComponents: ComponentItemModel[],\r\n  gap: number\r\n): boolean {\r\n  // 创建调整后的组件副本\r\n  const resizedComponent = {\r\n    ...resizingComponent,\r\n    x: newPosition.x,\r\n    y: newPosition.y,\r\n    width: newSize.width,\r\n    height: newSize.height\r\n  };\r\n\r\n  // 检查与其他组件的距离\r\n  for (const otherComponent of allComponents) {\r\n    if (otherComponent.id === resizingComponent.id) continue;\r\n\r\n    const distance = getComponentDistance(resizedComponent, otherComponent);\r\n\r\n    // 如果距离小于等于gap，需要触发布局调整\r\n    if (distance <= gap) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n\r\n\r\n// 检查位置是否可用\r\nexport const validatePosition = (\r\n  components: ComponentItemModel[],\r\n  currentId: string,\r\n  position: Position,\r\n  size: Size,\r\n  containerInfo: ContainerInfo,\r\n  _gridConfig: GridConfig\r\n): boolean => {\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n\r\n  // 检查边界\r\n  if (position.x < 0 ||\r\n    position.y < 0 ||\r\n    position.x + size.width > containerWidth ||\r\n    position.y + size.height > containerHeight) {\r\n    return false\r\n  }\r\n\r\n\r\n  // 检查与其他组件的重叠\r\n  for (const comp of components) {\r\n    if (comp.id === currentId) continue\r\n\r\n    // 计算重叠区域\r\n    const overlapX = position.x < comp.x + comp.width && position.x + size.width > comp.x\r\n    const overlapY = position.y < comp.y + comp.height && position.y + size.height > comp.y\r\n\r\n    if (overlapX && overlapY) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  return true\r\n}\r\n\r\n// 查找可用位置（不重新布局，自动向后排列）\r\nexport function findAvailablePosition(\r\n  components: ComponentItemModel[],\r\n  newComponent: ComponentItemModel,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): Position | null {\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n  const { gap } = gridConfig\r\n\r\n  // 计算每列的宽度（24列固定）\r\n  const columnWidth = (containerWidth - (COLUMNS - 1) * gap) / COLUMNS\r\n\r\n  console.log(`🔍 查找位置 - 容器宽度: ${containerWidth}, 列宽: ${columnWidth}, 间距: ${gap}`)\r\n  console.log(`📦 原始组件: ${newComponent.name}, 宽度: ${newComponent.width}, 高度: ${newComponent.height}`)\r\n\r\n  // 首先对组件进行自动填充\r\n  autoFillComponentToGrid(newComponent, columnWidth, gap)\r\n\r\n  console.log(`📦 填充后组件: ${newComponent.name}, 宽度: ${newComponent.width}, 高度: ${newComponent.height}`)\r\n\r\n  // 如果组件宽度超过容器宽度，无法放置\r\n  if (newComponent.width > containerWidth) {\r\n    console.warn('组件宽度超过容器宽度')\r\n    return null\r\n  }\r\n\r\n  // 计算组件占用的列数（组件宽度已经包含了间距，不需要再加gap）\r\n  const spanCols = Math.ceil(newComponent.width / (columnWidth + gap))\r\n  const actualSpanCols = Math.min(spanCols, COLUMNS)\r\n\r\n  console.log(`📏 组件占用列数: ${spanCols} -> ${actualSpanCols}`)\r\n\r\n  // 计算每列的当前高度\r\n  const columnHeights: number[] = new Array(COLUMNS).fill(0)\r\n\r\n  // 根据现有组件更新列高度\r\n  for (const comp of components) {\r\n    // 计算组件起始列：x坐标除以(列宽+间距)\r\n    const startCol = Math.floor(comp.x / (columnWidth + gap))\r\n    // 计算组件占用的列数（组件宽度已经包含了间距）\r\n    const compSpanCols = Math.ceil(comp.width / (columnWidth + gap))\r\n    const endCol = Math.min(startCol + compSpanCols, COLUMNS)\r\n    const compBottomY = comp.y + comp.height + gap\r\n\r\n    console.log(`📍 现有组件: ${comp.name}, 位置: (${comp.x}, ${comp.y}), 尺寸: ${comp.width}x${comp.height}`)\r\n    console.log(`📍 占用列: ${startCol} -> ${endCol} (${compSpanCols}列), 底部Y: ${compBottomY}`)\r\n\r\n    for (let i = startCol; i < endCol; i++) {\r\n      if (i >= 0 && i < COLUMNS) {\r\n        columnHeights[i] = Math.max(columnHeights[i] || 0, compBottomY)\r\n      }\r\n    }\r\n  }\r\n\r\n  console.log(`📊 列高度数组:`, columnHeights.slice(0, 12)) // 只显示前12列\r\n\r\n  // 找到最佳放置位置（高度最低的连续列）\r\n  let bestStartCol = 0\r\n  let minHeight = Infinity\r\n\r\n  for (let startCol = 0; startCol <= COLUMNS - actualSpanCols; startCol++) {\r\n    let maxHeightInRange = 0\r\n    for (let i = startCol; i < startCol + actualSpanCols; i++) {\r\n      maxHeightInRange = Math.max(maxHeightInRange, columnHeights[i] || 0)\r\n    }\r\n\r\n    if (maxHeightInRange < minHeight) {\r\n      minHeight = maxHeightInRange\r\n      bestStartCol = startCol\r\n    }\r\n  }\r\n\r\n  // 计算实际位置：列索引 * (列宽 + 间距)\r\n  const newX = bestStartCol * (columnWidth + gap)\r\n  const newY = minHeight\r\n\r\n  console.log(`🎯 最佳位置: 列${bestStartCol}, 高度${minHeight} -> 坐标(${newX}, ${newY})`)\r\n\r\n  // 检查是否超出容器高度\r\n  if (newY + newComponent.height > containerHeight) {\r\n    console.warn(`❌ 位置超出容器高度: ${newY + newComponent.height} > ${containerHeight}`)\r\n    return null\r\n  }\r\n\r\n  // 验证新位置不与现有组件重叠\r\n  const newPosition = { x: parseFloat(newX.toFixed(2)), y: parseFloat(newY.toFixed(2)) }\r\n  const newSize = { width: newComponent.width, height: newComponent.height }\r\n\r\n  for (const existingComp of components) {\r\n    if (hasOverlap(\r\n      newPosition,\r\n      newSize,\r\n      { x: existingComp.x, y: existingComp.y },\r\n      { width: existingComp.width, height: existingComp.height }\r\n    )) {\r\n      console.warn('新组件位置与现有组件重叠')\r\n      return null\r\n    }\r\n  }\r\n\r\n  return newPosition\r\n}\r\n\r\n\r\n// 检查是否可以添加组件（提前验证）\r\nexport function canAddComponent(\r\n  components: ComponentItemModel[],\r\n  newComponent: ComponentItemModel,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): boolean {\r\n  const testComponents = [...components, { ...newComponent, x: 0, y: 0 }]\r\n  return reorganizeLayout(testComponents, containerInfo, gridConfig)\r\n}\r\n\r\n// 计算可用空间\r\nexport function calculateAvailableSpace(\r\n  components: ComponentItemModel[],\r\n  containerInfo: ContainerInfo,\r\n  _gridConfig: GridConfig\r\n) {\r\n  const usedArea = components.reduce((total, comp) => {\r\n    return total + (comp.width * comp.height)\r\n  }, 0)\r\n\r\n  const totalArea = containerInfo.width * containerInfo.height\r\n\r\n  return {\r\n    usedArea,\r\n    totalArea,\r\n    availableArea: totalArea - usedArea,\r\n    utilization: ((usedArea / totalArea) * 100).toFixed(1) + '%'\r\n  }\r\n}\r\n\r\n// 吸附到网格（吸附到最近的栅格格子）\r\nexport function snapToGrid(position: Position, gridConfig: GridConfig): Position {\r\n  const { cellWidth, cellHeight, gap } = gridConfig\r\n  const unitWidth = cellWidth + gap\r\n  const unitHeight = cellHeight + gap\r\n\r\n  // 计算最近的网格位置\r\n  const nearestGridX = Math.round(position.x / unitWidth) * unitWidth\r\n  const nearestGridY = Math.round(position.y / unitHeight) * unitHeight\r\n\r\n  return {\r\n    x: parseFloat(nearestGridX.toFixed(2)),\r\n    y: parseFloat(nearestGridY.toFixed(2))\r\n  }\r\n}\r\n\r\n// 基于24列栅格系统的智能吸附\r\nexport function snapToColumnGrid(\r\n  position: Position,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): Position {\r\n  const { width: containerWidth } = containerInfo\r\n  const { gap, cellHeight } = gridConfig\r\n\r\n  // 计算每列的宽度（24列固定）\r\n  const columnWidth = (containerWidth - (COLUMNS - 1) * gap) / COLUMNS\r\n  const unitWidth = columnWidth + gap\r\n  const unitHeight = cellHeight + gap\r\n\r\n  // 计算最近的列位置\r\n  let nearestColumn = Math.round(position.x / unitWidth)\r\n\r\n  // 确保列索引在有效范围内\r\n  nearestColumn = Math.max(0, Math.min(nearestColumn, COLUMNS - 1))\r\n\r\n  // 计算吸附后的X坐标：列索引 * (列宽 + 间距)\r\n  const snappedX = nearestColumn * unitWidth\r\n\r\n  // 计算最近的行位置\r\n  let nearestRow = Math.round(position.y / unitHeight)\r\n\r\n  // 确保行索引不为负数\r\n  nearestRow = Math.max(0, nearestRow)\r\n\r\n  // 计算吸附后的Y坐标\r\n  const snappedY = nearestRow * unitHeight\r\n\r\n  return {\r\n    x: parseFloat(snappedX.toFixed(2)),\r\n    y: parseFloat(snappedY.toFixed(2))\r\n  }\r\n}\r\n\r\n// 智能吸附（考虑组件尺寸，确保不超出边界）\r\nexport function snapToColumnGridWithSize(\r\n  position: Position,\r\n  componentSize: Size,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): Position {\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n  const { gap } = gridConfig\r\n\r\n  // 计算每列的宽度（24列固定）\r\n  const columnWidth = (containerWidth - (COLUMNS - 1) * gap) / COLUMNS\r\n  const unitWidth = columnWidth + gap\r\n\r\n  // 计算最近的列位置\r\n  let nearestColumn = Math.round(position.x / unitWidth)\r\n\r\n  // 计算组件占用的列数（组件宽度已经包含了间距）\r\n  const componentCols = Math.ceil(componentSize.width / unitWidth)\r\n\r\n  // 确保组件不会超出右边界\r\n  const maxColumn = COLUMNS - componentCols\r\n  nearestColumn = Math.max(0, Math.min(nearestColumn, maxColumn))\r\n\r\n  // 计算吸附后的X坐标：列索引 * (列宽 + 间距)\r\n  const snappedX = nearestColumn * unitWidth\r\n\r\n  // Y坐标不进行栅格吸附，保持原始位置\r\n  let snappedY = position.y\r\n\r\n  // 确保组件不会超出下边界\r\n  if (snappedY + componentSize.height > containerHeight) {\r\n    snappedY = containerHeight - componentSize.height\r\n  }\r\n\r\n  // 确保Y坐标不为负数\r\n  snappedY = Math.max(0, snappedY)\r\n\r\n  return {\r\n    x: parseFloat(snappedX.toFixed(2)),\r\n    y: parseFloat(snappedY.toFixed(2))\r\n  }\r\n}\r\n\r\n// 智能高度吸附（只在与上面紧邻组件距离小于等于gap时才吸附）\r\nexport function snapToColumnGridWithSmartHeight(\r\n  position: Position,\r\n  componentSize: Size,\r\n  components: ComponentItemModel[],\r\n  currentId: string,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): Position {\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n  const { gap } = gridConfig\r\n\r\n  // 计算每列的宽度（24列固定）\r\n  const columnWidth = (containerWidth - (COLUMNS - 1) * gap) / COLUMNS\r\n  const unitWidth = columnWidth + gap\r\n\r\n  // 计算最近的列位置\r\n  let nearestColumn = Math.round(position.x / unitWidth)\r\n\r\n  // 计算组件占用的列数（组件宽度已经包含了间距）\r\n  const componentCols = Math.ceil(componentSize.width / unitWidth)\r\n\r\n  // 确保组件不会超出右边界\r\n  const maxColumn = COLUMNS - componentCols\r\n  nearestColumn = Math.max(0, Math.min(nearestColumn, maxColumn))\r\n\r\n  // 计算吸附后的X坐标：列索引 * (列宽 + 间距)\r\n  const snappedX = nearestColumn * unitWidth\r\n\r\n  // 智能Y坐标处理\r\n  let snappedY = position.y\r\n\r\n  // 查找在当前组件上方且有水平重叠的组件\r\n  const candidateComponents = components.filter(comp => {\r\n    if (comp.id === currentId) return false\r\n\r\n    // 检查水平重叠（使用吸附后的X坐标）\r\n    const horizontalOverlap = snappedX < comp.x + comp.width && snappedX + componentSize.width > comp.x\r\n\r\n    // 检查是否在上方（组件底部在当前位置上方）\r\n    const isAbove = comp.y + comp.height <= position.y\r\n\r\n    return horizontalOverlap && isAbove\r\n  })\r\n\r\n  if (candidateComponents.length > 0) {\r\n    // 找到最接近的上方组件（距离当前位置最近的）\r\n    let closestComponent: ComponentItemModel | null = null\r\n    let minDistance = Infinity\r\n\r\n    for (const comp of candidateComponents) {\r\n      const distance = position.y - (comp.y + comp.height)\r\n      if (distance >= 0 && distance < minDistance) {\r\n        minDistance = distance\r\n        closestComponent = comp\r\n      }\r\n    }\r\n\r\n    // 如果距离小于等于gap，则吸附到该组件下方并留出gap距离\r\n    if (closestComponent && minDistance <= gap) {\r\n      snappedY = closestComponent.y + closestComponent.height + gap\r\n      console.log(`高度吸附: 距离=${minDistance}, 吸附到Y=${snappedY}`)\r\n    } else {\r\n      console.log(`不进行高度吸附: 距离=${minDistance} > gap=${gap}`)\r\n    }\r\n  }\r\n\r\n  // 确保组件不会超出下边界\r\n  if (snappedY + componentSize.height > containerHeight) {\r\n    snappedY = containerHeight - componentSize.height\r\n  }\r\n\r\n  // 确保Y坐标不为负数\r\n  snappedY = Math.max(0, snappedY)\r\n\r\n  return {\r\n    x: parseFloat(snappedX.toFixed(2)),\r\n    y: parseFloat(snappedY.toFixed(2))\r\n  }\r\n}\r\n\r\n// 重新组织布局（瀑布流布局，固定24列）\r\nexport function reorganizeLayout(\r\n  components: ComponentItemModel[],\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig,\r\n  skipAutoFill: boolean = false,\r\n  onlyOnSizeIncrease: boolean = false\r\n): boolean {\r\n  if (components.length === 0) return true\r\n\r\n  const { gap } = gridConfig\r\n  const containerWidth = containerInfo.width\r\n  const containerHeight = containerInfo.height\r\n\r\n  // 计算每列的宽度（24列固定）\r\n  const columnWidth = (containerWidth - (COLUMNS - 1) * gap) / COLUMNS\r\n\r\n  // 如果是尺寸减小的情况，只检查边界，不重新布局\r\n  if (onlyOnSizeIncrease) {\r\n    // 检查所有组件是否仍在容器范围内\r\n    for (const comp of components) {\r\n      if (comp.x + comp.width > containerWidth || comp.y + comp.height > containerHeight) {\r\n        // 如果有组件超出边界，需要调整\r\n        comp.x = Math.min(comp.x, containerWidth - comp.width)\r\n        comp.y = Math.min(comp.y, containerHeight - comp.height)\r\n        comp.x = Math.max(0, comp.x)\r\n        comp.y = Math.max(0, comp.y)\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  // 记录每列的当前高度\r\n  const columnHeights: number[] = new Array(COLUMNS).fill(0)\r\n\r\n  for (const comp of components) {\r\n    // 自动填充组件尺寸到栅格（可选）\r\n    if (!skipAutoFill) {\r\n      autoFillComponentToGrid(comp, columnWidth, gap)\r\n    }\r\n\r\n    // 计算组件占用的列数（组件宽度已经包含了间距）\r\n    const spanCols = Math.ceil(comp.width / (columnWidth + gap))\r\n    const actualSpanCols = Math.min(spanCols, COLUMNS)\r\n\r\n    // 找到最佳放置位置（高度最低的连续列）\r\n    let bestStartCol = 0\r\n    let minHeight = Infinity\r\n\r\n    for (let startCol = 0; startCol <= COLUMNS - actualSpanCols; startCol++) {\r\n      // 计算这个位置的最大高度\r\n      let maxHeightInRange = 0\r\n      for (let i = startCol; i < startCol + actualSpanCols; i++) {\r\n        maxHeightInRange = Math.max(maxHeightInRange, columnHeights[i] || 0)\r\n      }\r\n\r\n      // 如果这个位置的高度更低，选择这个位置\r\n      if (maxHeightInRange < minHeight) {\r\n        minHeight = maxHeightInRange\r\n        bestStartCol = startCol\r\n      }\r\n    }\r\n\r\n    // 计算组件的实际位置：列索引 * (列宽 + 间距)\r\n    comp.x = parseFloat((bestStartCol * (columnWidth + gap)).toFixed(2))\r\n    comp.y = parseFloat(minHeight.toFixed(2))\r\n\r\n    // 检查是否超出容器高度\r\n    if (comp.y + comp.height > containerHeight) {\r\n      console.warn('组件超出容器高度，无法完成布局')\r\n      return false // 布局失败\r\n    }\r\n\r\n    // 更新占用列的高度\r\n    const newHeight = comp.y + comp.height + gap\r\n    for (let i = bestStartCol; i < bestStartCol + actualSpanCols; i++) {\r\n      columnHeights[i] = newHeight\r\n    }\r\n  }\r\n\r\n  return true // 布局成功\r\n}\r\n\r\n// 基于24列栅格系统的组件自动填充\r\nexport function autoFillComponentToGrid(\r\n  component: ComponentItemModel,\r\n  columnWidth: number,\r\n  gap: number\r\n): void {\r\n  // 确保最小尺寸\r\n  const minWidth = component.minWidth || columnWidth\r\n  const minHeight = component.minHeight || 60\r\n\r\n  component.width = Math.max(component.width, minWidth)\r\n  component.height = Math.max(component.height, minHeight)\r\n\r\n  // 如果组件宽度未填满栅格，则进行填充\r\n  // 计算组件应该占用的列数\r\n  const requiredCols = Math.ceil(component.width / (columnWidth + gap))\r\n  const actualCols = Math.min(requiredCols, COLUMNS)\r\n\r\n  // 计算填充后的宽度\r\n  const filledWidth = actualCols * columnWidth + (actualCols - 1) * gap\r\n\r\n  // 更新组件宽度为填充后的宽度\r\n  component.width = parseFloat(filledWidth.toFixed(2))\r\n}\r\n\r\n// 修改组件调整大小时也支持自动填充（基于24列栅格）\r\nexport function resizeComponentWithAutoFill(\r\n  component: ComponentItemModel,\r\n  newSize: Size,\r\n  gridConfig: GridConfig,\r\n  containerWidth?: number\r\n): Size {\r\n  const { gap } = gridConfig\r\n\r\n  // 计算每列的宽度（24列固定）\r\n  const columnWidth = containerWidth ?\r\n    (containerWidth - (COLUMNS - 1) * gap) / COLUMNS :\r\n    gridConfig.cellWidth\r\n\r\n  // 确保最小尺寸\r\n  const minWidth = component.minWidth || columnWidth\r\n  const minHeight = component.minHeight || 60\r\n\r\n  const actualWidth = Math.max(newSize.width, minWidth)\r\n  const actualHeight = Math.max(newSize.height, minHeight)\r\n\r\n  // 计算组件应该占用的列数\r\n  const requiredCols = Math.ceil(actualWidth / (columnWidth + gap))\r\n  const actualCols = Math.min(requiredCols, COLUMNS)\r\n\r\n  // 计算填充后的宽度\r\n  const filledWidth = actualCols * columnWidth + (actualCols - 1) * gap\r\n\r\n  // 确保填充后的宽度不小于最小值\r\n  const finalWidth = Math.max(filledWidth, minWidth)\r\n  // 高度不进行栅格填充，保持用户设置的高度\r\n  const finalHeight = Math.max(actualHeight, minHeight)\r\n\r\n  return {\r\n    width: parseFloat(finalWidth.toFixed(2)),\r\n    height: parseFloat(finalHeight.toFixed(2))\r\n  }\r\n}\r\n\r\n// 检查调整大小是否会影响其他组件，并返回需要更新的组件\r\nexport function getAffectedComponents(\r\n  components: ComponentItemModel[],\r\n  resizingComponent: ComponentItemModel,\r\n  newPosition: Position,\r\n  newSize: Size,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): { affected: ComponentItemModel[]; canResize: boolean } {\r\n  const affected: ComponentItemModel[] = []\r\n\r\n  // 检查是否是尺寸增加\r\n  const sizeIncreased = newSize.width > resizingComponent.width || newSize.height > resizingComponent.height\r\n\r\n  // 如果尺寸增加，检查是否需要触发布局调整\r\n  let needsLayoutAdjustment = false;\r\n  if (sizeIncreased) {\r\n    needsLayoutAdjustment = shouldTriggerLayout(\r\n      resizingComponent,\r\n      newPosition,\r\n      newSize,\r\n      components,\r\n      gridConfig.gap\r\n    );\r\n  }\r\n\r\n  // 创建临时组件列表，用于模拟调整后的状态\r\n  const tempComponents = components.map(comp =>\r\n    comp.id === resizingComponent.id\r\n      ? { ...comp, ...newPosition, ...newSize }\r\n      : { ...comp }\r\n  )\r\n\r\n  // 只有在需要布局调整时才进行重新布局\r\n  if (needsLayoutAdjustment) {\r\n    const layoutSuccess = reorganizeLayout(tempComponents, containerInfo, gridConfig, true, false)\r\n\r\n    if (!layoutSuccess) {\r\n      return { affected: [], canResize: false }\r\n    }\r\n\r\n    // 找出位置发生变化的组件\r\n    components.forEach(comp => {\r\n      if (comp.id !== resizingComponent.id) {\r\n        const tempComp = tempComponents.find(tc => tc.id === comp.id)\r\n        if (tempComp && (tempComp.x !== comp.x || tempComp.y !== comp.y)) {\r\n          affected.push({ ...comp, x: tempComp.x, y: tempComp.y })\r\n        }\r\n      }\r\n    })\r\n  } else {\r\n    // 不需要布局调整，只做边界检查\r\n    const layoutSuccess = reorganizeLayout(tempComponents, containerInfo, gridConfig, true, true)\r\n\r\n    if (!layoutSuccess) {\r\n      return { affected: [], canResize: false }\r\n    }\r\n  }\r\n\r\n  return { affected, canResize: true }\r\n}\r\n\r\n// 智能验证位置（考虑动态布局）\r\nexport function validatePositionWithLayout(\r\n  components: ComponentItemModel[],\r\n  currentId: string,\r\n  position: Position,\r\n  size: Size,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): { valid: boolean; affectedComponents: ComponentItemModel[] } {\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n\r\n  // 基础边界检查\r\n  if (position.x < 0 ||\r\n    position.y < 0 ||\r\n    position.x + size.width > containerWidth ||\r\n    position.y + size.height > containerHeight) {\r\n    return { valid: false, affectedComponents: [] }\r\n  }\r\n\r\n  // 获取受影响的组件\r\n  const currentComponent = components.find(c => c.id === currentId)\r\n  if (!currentComponent) {\r\n    return { valid: false, affectedComponents: [] }\r\n  }\r\n\r\n  const { affected, canResize } = getAffectedComponents(\r\n    components,\r\n    currentComponent,\r\n    position,\r\n    size,\r\n    containerInfo,\r\n    gridConfig\r\n  )\r\n\r\n  return { valid: canResize, affectedComponents: affected }\r\n}\r\n\r\n// 严格检查组件重叠\r\nfunction hasOverlap(\r\n  pos1: Position,\r\n  size1: Size,\r\n  pos2: Position,\r\n  size2: Size\r\n): boolean {\r\n  const overlapX = pos1.x < pos2.x + size2.width && pos1.x + size1.width > pos2.x\r\n  const overlapY = pos1.y < pos2.y + size2.height && pos1.y + size1.height > pos2.y\r\n  return overlapX && overlapY\r\n}\r\n\r\n// 智能验证拖拽位置（严格防止重叠）\r\nexport function validateDragPosition(\r\n  components: ComponentItemModel[],\r\n  currentId: string,\r\n  newPosition: Position,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): { valid: boolean; affectedComponents: ComponentItemModel[]; finalPosition: Position } {\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n\r\n  // 获取当前组件\r\n  const currentComponent = components.find(c => c.id === currentId)\r\n  if (!currentComponent) {\r\n    return { valid: false, affectedComponents: [], finalPosition: newPosition }\r\n  }\r\n\r\n  const currentSize = { width: currentComponent.width, height: currentComponent.height }\r\n\r\n  // 使用智能高度吸附，只在与上面紧邻组件距离小于等于gap时才吸附\r\n  const snappedPosition = snapToColumnGridWithSmartHeight(\r\n    newPosition,\r\n    currentSize,\r\n    components,\r\n    currentId,\r\n    containerInfo,\r\n    gridConfig\r\n  )\r\n\r\n  // 基础边界检查\r\n  if (snappedPosition.x < 0 ||\r\n    snappedPosition.y < 0 ||\r\n    snappedPosition.x + currentSize.width > containerWidth ||\r\n    snappedPosition.y + currentSize.height > containerHeight) {\r\n    return { valid: false, affectedComponents: [], finalPosition: snappedPosition }\r\n  }\r\n\r\n  // 严格检查是否与其他组件重叠\r\n  for (const otherComponent of components) {\r\n    if (otherComponent.id === currentId) continue\r\n\r\n    if (hasOverlap(\r\n      snappedPosition,\r\n      currentSize,\r\n      { x: otherComponent.x, y: otherComponent.y },\r\n      { width: otherComponent.width, height: otherComponent.height }\r\n    )) {\r\n      // 发现重叠，拒绝此位置\r\n      return { valid: false, affectedComponents: [], finalPosition: snappedPosition }\r\n    }\r\n  }\r\n\r\n  // 检查是否需要触发布局调整（仅当距离很近时）\r\n  const needsLayoutAdjustment = shouldTriggerLayout(\r\n    currentComponent,\r\n    snappedPosition,\r\n    currentSize,\r\n    components,\r\n    gridConfig.gap\r\n  )\r\n\r\n  if (!needsLayoutAdjustment) {\r\n    // 没有重叠且不需要布局调整，可以自由拖拽\r\n    return { valid: true, affectedComponents: [], finalPosition: snappedPosition }\r\n  }\r\n\r\n  // 需要布局调整，但要确保调整后不会产生重叠\r\n  const draggedComponent = {\r\n    ...currentComponent,\r\n    x: snappedPosition.x,\r\n    y: snappedPosition.y\r\n  }\r\n\r\n  const tempComponents = components.map(comp =>\r\n    comp.id === currentId ? draggedComponent : { ...comp }\r\n  )\r\n\r\n  const layoutSuccess = reorganizeLayout(tempComponents, containerInfo, gridConfig, true, false)\r\n\r\n  if (!layoutSuccess) {\r\n    return { valid: false, affectedComponents: [], finalPosition: snappedPosition }\r\n  }\r\n\r\n  // 验证布局后是否有重叠\r\n  for (let i = 0; i < tempComponents.length; i++) {\r\n    for (let j = i + 1; j < tempComponents.length; j++) {\r\n      const comp1 = tempComponents[i]\r\n      const comp2 = tempComponents[j]\r\n\r\n      if (comp1 && comp2 && hasOverlap(\r\n        { x: comp1.x, y: comp1.y },\r\n        { width: comp1.width, height: comp1.height },\r\n        { x: comp2.x, y: comp2.y },\r\n        { width: comp2.width, height: comp2.height }\r\n      )) {\r\n        // 布局后仍有重叠，拒绝此操作\r\n        return { valid: false, affectedComponents: [], finalPosition: snappedPosition }\r\n      }\r\n    }\r\n  }\r\n\r\n  // 找出位置发生变化的组件\r\n  const affected: ComponentItemModel[] = []\r\n  components.forEach(comp => {\r\n    if (comp.id !== currentId) {\r\n      const tempComp = tempComponents.find(tc => tc.id === comp.id)\r\n      if (tempComp && (tempComp.x !== comp.x || tempComp.y !== comp.y)) {\r\n        affected.push({ ...comp, x: tempComp.x, y: tempComp.y })\r\n      }\r\n    }\r\n  })\r\n\r\n  return { valid: true, affectedComponents: affected, finalPosition: snappedPosition }\r\n}","<template>\r\n  <div \r\n    class=\"gridster-item\" \r\n    :class=\"{ resizing: isResizing }\" \r\n    :style=\"componentStyle\" \r\n    draggable=\"true\"\r\n    @dragstart=\"onDragStart\" \r\n    @drag=\"onDrag\" \r\n    @dragend=\"onDragEnd\"\r\n  >\r\n\r\n    <slot></slot>\r\n\r\n    <!-- 调整手柄 -->\r\n    <div class=\"resize-overlay\">\r\n      <div class=\"edge top\" @mousedown=\"onEdgeMouseDown('top', $event)\"></div>\r\n      <div class=\"edge right\" @mousedown=\"onEdgeMouseDown('right', $event)\"></div>\r\n      <div class=\"edge bottom\" @mousedown=\"onEdgeMouseDown('bottom', $event)\"></div>\r\n      <div class=\"edge left\" @mousedown=\"onEdgeMouseDown('left', $event)\"></div>\r\n      <div class=\"corner top-left\" @mousedown=\"onCornerMouseDown('top-left', $event)\"></div>\r\n      <div class=\"corner top-right\" @mousedown=\"onCornerMouseDown('top-right', $event)\"></div>\r\n      <div class=\"corner bottom-left\" @mousedown=\"onCornerMouseDown('bottom-left', $event)\"></div>\r\n      <div class=\"corner bottom-right\" @mousedown=\"onCornerMouseDown('bottom-right', $event)\"></div>\r\n    </div>\r\n\r\n    <icon-delete :size=\"16\" class=\"remove-btn\" @click=\"$emit('remove', component.id)\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref } from 'vue';\r\nimport type { ComponentItemModel, GridConfig, Position, Size, ContainerInfo } from '../types/layout';\r\nimport { resizeComponentWithAutoFill } from '../utils/grid'\r\n\r\ninterface Props {\r\n  component: ComponentItemModel\r\n  gridConfig: GridConfig\r\n  containerInfo: ContainerInfo\r\n}\r\n\r\nconst props = defineProps<Props>()\r\nconst emit = defineEmits<{\r\n  resize: [id: string, size: Size & Partial<Position> & { resizeType?: string }]\r\n  drag: [id: string, position: Position]\r\n  remove: [id: string]\r\n}>()\r\n\r\nconst isDragging = ref(false)\r\nconst isResizing = ref(false)\r\nconst currentResizeType = ref<string>('') // 'edge' or 'corner' + direction\r\nconst dragStartPosition = ref<Position>({ x: 0, y: 0 })\r\nconst dragOffset = ref<Position>({ x: 0, y: 0 })\r\n\r\n// 计算组件样式\r\nconst componentStyle = computed((): any => {\r\n  return {\r\n    position: 'absolute',\r\n    left: `${props.component.x}px`,\r\n    top: `${props.component.y}px`,\r\n    width: `${props.component.width}px`,\r\n    height: `${props.component.height}px`,\r\n    zIndex: isDragging.value || isResizing.value ? 100 : 1,\r\n    cursor: isResizing.value ? getResizeCursor(currentResizeType.value) : 'move'\r\n  }\r\n})\r\n\r\n// 获取调整时的光标样式\r\nconst getResizeCursor = (type: string) => {\r\n  const cursorMap: { [key: string]: string } = {\r\n    'top': 'n-resize',\r\n    'right': 'e-resize',\r\n    'bottom': 's-resize',\r\n    'left': 'w-resize',\r\n    'top-left': 'nw-resize',\r\n    'top-right': 'ne-resize',\r\n    'bottom-left': 'sw-resize',\r\n    'bottom-right': 'se-resize'\r\n  }\r\n  return cursorMap[type] || 'move'\r\n}\r\n\r\n// 边缘拖拽调整\r\nconst onEdgeMouseDown = (edge: string, e: MouseEvent) => {\r\n  e.preventDefault()\r\n  e.stopPropagation()\r\n\r\n  onResizeStart(edge, e)\r\n}\r\n\r\n// 角落拖拽调整\r\nconst onCornerMouseDown = (corner: string, e: MouseEvent) => {\r\n  e.preventDefault()\r\n  e.stopPropagation()\r\n\r\n  onResizeStart(corner, e)\r\n}\r\n\r\nconst onDragStart = (e: DragEvent) => {\r\n  isDragging.value = true;\r\n\r\n  e.dataTransfer?.setData('text/plain', props.component.id);\r\n  e.dataTransfer!.effectAllowed = 'move'\r\n\r\n  // 设置拖拽预览\r\n  const dragImage = e.currentTarget as HTMLElement\r\n  e.dataTransfer?.setDragImage(dragImage, 0, 0)\r\n\r\n\r\n  // 记录拖拽起始位置和鼠标偏移\r\n  const rect = dragImage.getBoundingClientRect()\r\n  dragStartPosition.value = {\r\n    x: props.component.x,\r\n    y: props.component.y\r\n  }\r\n  dragOffset.value = {\r\n    x: e.clientX - rect.left,\r\n    y: e.clientY - rect.top\r\n  }\r\n}\r\n\r\n// 添加拖拽过程中的实时位置更新\r\nconst onDrag = (e: DragEvent) => {\r\n  if (!isDragging.value) return\r\n\r\n  // 计算实时拖拽位置\r\n  const containerRect = (e.currentTarget as HTMLElement).parentElement?.getBoundingClientRect()\r\n\r\n  if (!containerRect) return\r\n\r\n  // 计算在容器内的位置\r\n  const pixelX = e.clientX - containerRect.left - dragOffset.value.x\r\n  const pixelY = e.clientY - containerRect.top - dragOffset.value.y\r\n\r\n  // 发射 drag 事件，让父组件处理位置更新\r\n  emit('drag', props.component.id, { x: pixelX, y: pixelY })\r\n}\r\n\r\n\r\nconst onDragEnd = () => {\r\n  isDragging.value = false\r\n  dragStartPosition.value = { x: 0, y: 0 }\r\n  dragOffset.value = { x: 0, y: 0 }\r\n}\r\n\r\n// 调整大小（像素计算）\r\nconst onResizeStart = (type: string, e: MouseEvent) => {\r\n  e.preventDefault()\r\n  e.stopPropagation()\r\n\r\n  const startX = e.clientX\r\n  const startY = e.clientY\r\n  const startWidth = props.component.width\r\n  const startHeight = props.component.height\r\n  const startXPos = props.component.x\r\n  const startYPos = props.component.y\r\n\r\n  const containerWidth = props.containerInfo.width\r\n  const containerHeight = props.containerInfo.height\r\n\r\n  currentResizeType.value = type\r\n  isResizing.value = true\r\n\r\n  const onMouseMove = (moveEvent: MouseEvent) => {\r\n    if (moveEvent.buttons === 0) {\r\n      // 鼠标按钮释放，结束调整\r\n      onMouseUp()\r\n      return\r\n    }\r\n\r\n    const deltaX = moveEvent.clientX - startX\r\n    const deltaY = moveEvent.clientY - startY\r\n\r\n    let newWidth = startWidth\r\n    let newHeight = startHeight\r\n    let newX = startXPos\r\n    let newY = startYPos\r\n\r\n    // 根据手柄位置计算新的像素尺寸（简化逻辑，边缘调整不改变位置）\r\n    switch (type) {\r\n      case 'right':\r\n        // 右边缘：只改变宽度，从右侧扩展，左边缘保持不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth + deltaX)\r\n        // 位置不变\r\n        break\r\n\r\n      case 'left':\r\n        // 左边缘：改变宽度，从左侧变化，右边缘保持不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth - deltaX)\r\n        // 调整位置以保持右边缘不变\r\n        newX = startXPos + startWidth - newWidth\r\n        break\r\n\r\n      case 'bottom':\r\n        // 下边缘：只改变高度，从下侧扩展，上边缘保持不变\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight + deltaY)\r\n        // 位置不变\r\n        break\r\n\r\n      case 'top':\r\n        // 上边缘：改变高度，从上侧变化，下边缘保持不变\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight - deltaY)\r\n        // 调整位置以保持下边缘不变\r\n        newY = startYPos + startHeight - newHeight\r\n        break\r\n\r\n      case 'top-right':\r\n        // 右上角：左侧和底部不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth + deltaX)\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight - deltaY)\r\n        // 调整Y位置以保持底部不变\r\n        newY = startYPos + startHeight - newHeight\r\n        // X位置不变（左侧不变）\r\n        break\r\n\r\n      case 'top-left':\r\n        // 左上角：右侧和底部不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth - deltaX)\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight - deltaY)\r\n        // 调整位置以保持右侧和底部不变\r\n        newX = startXPos + startWidth - newWidth\r\n        newY = startYPos + startHeight - newHeight\r\n        break\r\n\r\n      case 'bottom-left':\r\n        // 左下角：右侧和上侧不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth - deltaX)\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight + deltaY)\r\n        // 调整X位置以保持右侧不变\r\n        newX = startXPos + startWidth - newWidth\r\n        // Y位置不变（上侧不变）\r\n        break\r\n\r\n      case 'bottom-right':\r\n        // 右下角：左侧和上侧不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth + deltaX)\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight + deltaY)\r\n        // 位置不变（左侧和上侧不变）\r\n        break\r\n    }\r\n\r\n    // 边界检查：确保组件不超出容器\r\n    // 确保位置不为负数\r\n    newX = Math.max(0, newX)\r\n    newY = Math.max(0, newY)\r\n    \r\n    // 确保组件不超出容器右边界和下边界\r\n    if (newX + newWidth > containerWidth) {\r\n      if (type.includes('left')) {\r\n        // 如果是从左侧调整，调整位置而不是宽度\r\n        newX = containerWidth - newWidth\r\n        newX = Math.max(0, newX)\r\n      } else {\r\n        // 如果是从右侧调整，调整宽度\r\n        newWidth = containerWidth - newX\r\n      }\r\n    }\r\n    \r\n    if (newY + newHeight > containerHeight) {\r\n      if (type.includes('top')) {\r\n        // 如果是从上侧调整，调整位置而不是高度\r\n        newY = containerHeight - newHeight\r\n        newY = Math.max(0, newY)\r\n      } else {\r\n        // 如果是从下侧调整，调整高度\r\n        newHeight = containerHeight - newY\r\n      }\r\n    }\r\n\r\n    // 确保最小尺寸\r\n    newWidth = Math.max(props.component.minWidth || 100, newWidth)\r\n    newHeight = Math.max(props.component.minHeight || 60, newHeight)\r\n\r\n    // 根据调整类型决定是否应用自动填充\r\n    let filledSize = { width: newWidth, height: newHeight }\r\n\r\n    // 只有在调整宽度相关的操作时才进行栅格填充\r\n    const isWidthResize = ['left', 'right', 'top-left', 'top-right', 'bottom-left', 'bottom-right'].includes(type)\r\n\r\n    if (isWidthResize) {\r\n      // 应用自动填充（只对宽度）\r\n      filledSize = resizeComponentWithAutoFill(\r\n        props.component,\r\n        { width: newWidth, height: newHeight },\r\n        props.gridConfig,\r\n        props.containerInfo.width\r\n      )\r\n    }\r\n\r\n    // 填充后的边界检查\r\n    if (newX + filledSize.width > containerWidth) {\r\n      filledSize.width = containerWidth - newX\r\n    }\r\n\r\n    // 高度边界检查（填充不会改变高度）\r\n    if (newY + filledSize.height > containerHeight) {\r\n      filledSize.height = containerHeight - newY\r\n    }\r\n\r\n    // 确保最终尺寸不小于最小值\r\n    filledSize.width = Math.max(props.component.minWidth || 100, filledSize.width)\r\n    filledSize.height = Math.max(props.component.minHeight || 60, filledSize.height)\r\n\r\n    // 发射 resize 事件\r\n    emit('resize', props.component.id, {\r\n      width: parseFloat(filledSize.width.toFixed(2)),\r\n      height: parseFloat(filledSize.height.toFixed(2)),\r\n      x: parseFloat(newX.toFixed(2)),\r\n      y: parseFloat(newY.toFixed(2)),\r\n      resizeType: type\r\n    })\r\n  }\r\n\r\n  const onMouseUp = () => {\r\n    document.removeEventListener('mousemove', onMouseMove)\r\n    document.removeEventListener('mouseup', onMouseUp)\r\n    document.removeEventListener('mouseleave', onMouseUp) // 添加鼠标离开监听\r\n    isResizing.value = false\r\n    currentResizeType.value = ''\r\n  }\r\n\r\n  document.addEventListener('mousemove', onMouseMove)\r\n  document.addEventListener('mouseup', onMouseUp)\r\n  document.addEventListener('mouseleave', onMouseUp) // 鼠标离开窗口时也结束\r\n  isResizing.value = true\r\n  currentResizeType.value = ''\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.gridster-item {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  position: relative;\r\n  cursor: move;\r\n  transition: all 0.2s ease;\r\n  min-height: 0;\r\n  /* 允许收缩 */\r\n  min-width: 0;\r\n  /* 允许收缩 */\r\n\r\n  &:hover {\r\n    border-color: #007bff;\r\n    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.15);\r\n  }\r\n\r\n  &:active {\r\n    transform: scale(0.98);\r\n  }\r\n\r\n  .remove-btn {\r\n    position: absolute;\r\n    top: 2px;\r\n    right: 2px;\r\n    opacity: 0;\r\n    transition: opacity 0.2s;\r\n    cursor: pointer;\r\n    color: red;\r\n  }\r\n}\r\n\r\n.resize-overlay {\r\n  position: absolute;\r\n  top: -6px;\r\n  left: -6px;\r\n  right: -6px;\r\n  bottom: -6px;\r\n  pointer-events: none;\r\n}\r\n\r\n.gridster-item:hover .resize-overlay {\r\n  pointer-events: auto;\r\n}\r\n\r\n\r\n.edge {\r\n  position: absolute;\r\n  background: transparent;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n}\r\n\r\n.edge:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.edge.top {\r\n  top: 0;\r\n  left: 6px;\r\n  right: 6px;\r\n  height: 6px;\r\n  cursor: n-resize;\r\n}\r\n\r\n.edge.right {\r\n  top: 6px;\r\n  right: 0;\r\n  bottom: 6px;\r\n  width: 6px;\r\n  cursor: e-resize;\r\n}\r\n\r\n.edge.bottom {\r\n  bottom: 0;\r\n  left: 6px;\r\n  right: 6px;\r\n  height: 6px;\r\n  cursor: s-resize;\r\n}\r\n\r\n.edge.left {\r\n  top: 6px;\r\n  left: 0;\r\n  bottom: 6px;\r\n  width: 6px;\r\n  cursor: w-resize;\r\n}\r\n\r\n.corner {\r\n  position: absolute;\r\n  background: transparent;\r\n  width: 12px;\r\n  height: 12px;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n}\r\n\r\n.corner:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.corner.top-left {\r\n  top: 0;\r\n  left: 0;\r\n  cursor: nw-resize;\r\n}\r\n\r\n.corner.top-right {\r\n  top: 0;\r\n  right: 0;\r\n  cursor: ne-resize;\r\n}\r\n\r\n.corner.bottom-left {\r\n  bottom: 0;\r\n  left: 0;\r\n  cursor: sw-resize;\r\n}\r\n\r\n.corner.bottom-right {\r\n  bottom: 0;\r\n  right: 0;\r\n  cursor: se-resize;\r\n}\r\n\r\n.gridster-item:hover .remove-btn {\r\n  opacity: 1;\r\n}\r\n</style>","<template>\r\n  <a-modal \r\n    v-model:visible=\"visible\" \r\n    title=\"添加组件 \"\r\n    width=\"1000px\"\r\n    @ok=\"handleOk\" \r\n    @cancel=\"close\"\r\n  >\r\n    <div class=\"add-container\">\r\n      <a-alert>已选择：{{ selectedComponents .length }}</a-alert>\r\n      <div class=\"component-library\">\r\n        <div class=\"search-section\">\r\n          <a-input\r\n            v-model=\"searchQuery\"\r\n            type=\"text\"\r\n            placeholder=\"搜索组件...\"\r\n            class=\"search-input\"\r\n          />\r\n        </div>\r\n        \r\n        <a-scrollbar style=\"height: 500px;overflow: auto;\">\r\n          <div class=\"components-grid\">\r\n            <div\r\n              v-for=\"component in filteredComponents\"\r\n              :key=\"component.type\"\r\n              class=\"component-card\"\r\n              :class=\"{\r\n                'selected': isSelected(component),\r\n              }\"\r\n              @click=\"onComponentClick(component)\"\r\n            >\r\n              <slot name=\"component\" :component=\"component\"></slot>\r\n              <div class=\"selection-indicator\" v-if=\"isSelected(component)\">\r\n                ✓\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </a-scrollbar>\r\n        <div class=\"empty-state\" v-if=\"filteredComponents.length === 0\">\r\n          未找到匹配的组件\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed } from 'vue';\r\nimport type { ComponentItemModel } from '../types/layout';\r\n\r\ninterface Props {\r\n  componentLibrary: ComponentItemModel[]\r\n}\r\nconst props = defineProps<Props>()\r\nconst visible = ref(false)\r\nconst selectedComponents  = ref<ComponentItemModel[]>([])\r\n\r\ninterface Emits {\r\n  (e: 'confirm', components: ComponentItemModel[]): void\r\n  (e: 'cancel'): void\r\n}\r\n\r\nconst emit = defineEmits<Emits>()\r\n\r\nconst onComponentSelect = (component: ComponentItemModel) => {\r\n  const index = selectedComponents.value.findIndex(\r\n    item => item.type === component.type\r\n  )\r\n  \r\n  if (index > -1) {\r\n    // 如果已存在，则移除\r\n    selectedComponents.value.splice(index, 1)\r\n  } else {\r\n    // 如果不存在，则添加\r\n    selectedComponents.value.push(component)\r\n  }\r\n}\r\n\r\nconst searchQuery = ref('')\r\n\r\n// 过滤组件列表\r\nconst filteredComponents = computed(() => {\r\n  if (!searchQuery.value) {\r\n    return props.componentLibrary\r\n  }\r\n  \r\n  const query = searchQuery.value.toLowerCase()\r\n  return props.componentLibrary.filter(component =>\r\n    component.name.toLowerCase().includes(query) ||\r\n    component.type.toLowerCase().includes(query)\r\n  )\r\n})\r\n\r\n// 检查组件是否被选中\r\nconst isSelected = (component: ComponentItemModel) => {\r\n  return selectedComponents.value.some(\r\n    selected => selected.type === component.type\r\n  )\r\n}\r\n\r\nconst onComponentClick = (component: ComponentItemModel) => {\r\n    // 创建组件副本，确保每次添加都是新的实例\r\n    const componentCopy: ComponentItemModel = {\r\n    ...component,\r\n    id: `${component.type}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n    x: 0,\r\n    y: 0\r\n  }\r\n  onComponentSelect(componentCopy)\r\n}\r\n\r\nconst handleOk = () => {\r\n  if (selectedComponents.value.length > 0) {\r\n    close()\r\n    emit('confirm', selectedComponents.value)\r\n    // 重置选择状态\r\n    selectedComponents.value = []\r\n  }\r\n}\r\n\r\nconst close = () => {\r\n  visible.value = false\r\n}\r\n\r\nconst open = () => {\r\n  visible.value = true\r\n}\r\n\r\ndefineExpose({\r\n  open,\r\n  close\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-container {\r\n\r\n  :deep(.arco-alert) {\r\n    margin: 10px 0;\r\n  }\r\n\r\n  .component-list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 20px;\r\n\r\n    .component-item {\r\n      flex: 1;\r\n    }\r\n  }\r\n}\r\n\r\n.component-library {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.search-section {\r\n  padding: 16px 0;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.components-grid {\r\n  flex: 1;\r\n  padding: 16px 0;\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\r\n  gap: 16px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.component-card {\r\n  border: 2px solid #e8e8e8;\r\n  border-radius: 8px;\r\n  padding: 12px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  position: relative;\r\n  background: white;\r\n}\r\n\r\n.component-card:hover {\r\n  border-color: #007bff;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.component-card.selected {\r\n  border-color: #007bff;\r\n  background: #f0f8ff;\r\n}\r\n\r\n.component-card.disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.component-card.disabled:hover {\r\n  border-color: #e8e8e8;\r\n  transform: none;\r\n  box-shadow: none;\r\n}\r\n\r\n\r\n\r\n.selection-indicator {\r\n  position: absolute;\r\n  top: 8px;\r\n  right: 8px;\r\n  width: 20px;\r\n  height: 20px;\r\n  background: #007bff;\r\n  color: white;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 12px;\r\n}\r\n\r\n.disabled-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 6px;\r\n  font-size: 12px;\r\n  color: #ff4444;\r\n  font-weight: 500;\r\n}\r\n\r\n.empty-state {\r\n  padding: 40px 24px;\r\n  text-align: center;\r\n  color: #999;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 滚动条样式 */\r\n.components-grid::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.components-grid::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.components-grid::-webkit-scrollbar-thumb {\r\n  background: #c1c1c1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.components-grid::-webkit-scrollbar-thumb:hover {\r\n  background: #a8a8a8;\r\n}\r\n</style>","const opt = Object.prototype.toString;\nfunction isArray(obj) {\n  return opt.call(obj) === \"[object Array]\";\n}\nfunction isNull(obj) {\n  return opt.call(obj) === \"[object Null]\";\n}\nfunction isBoolean(obj) {\n  return opt.call(obj) === \"[object Boolean]\";\n}\nfunction isObject(obj) {\n  return opt.call(obj) === \"[object Object]\";\n}\nconst isPromise = (obj) => {\n  return opt.call(obj) === \"[object Promise]\";\n};\nfunction isString(obj) {\n  return opt.call(obj) === \"[object String]\";\n}\nfunction isNumber(obj) {\n  return opt.call(obj) === \"[object Number]\" && obj === obj;\n}\nfunction isUndefined(obj) {\n  return obj === void 0;\n}\nfunction isFunction(obj) {\n  return typeof obj === \"function\";\n}\nfunction isEmptyObject(obj) {\n  return isObject(obj) && Object.keys(obj).length === 0;\n}\nfunction isExist(obj) {\n  return obj || obj === 0;\n}\nfunction isWindow(el) {\n  return el === window;\n}\nconst isComponentInstance = (value) => {\n  return (value == null ? void 0 : value.$) !== void 0;\n};\nconst isQuarter = (fromat) => {\n  return /\\[Q]Q/.test(fromat);\n};\nfunction isDayjs(time) {\n  return isObject(time) && \"$y\" in time && \"$M\" in time && \"$D\" in time && \"$d\" in time && \"$H\" in time && \"$m\" in time && \"$s\" in time;\n}\nexport { isArray, isBoolean, isComponentInstance, isDayjs, isEmptyObject, isExist, isFunction, isNull, isNumber, isObject, isPromise, isQuarter, isString, isUndefined, isWindow };\n","const configProviderInjectionKey = Symbol(\"ArcoConfigProvider\");\nexport { configProviderInjectionKey };\n","import { getCurrentInstance, inject } from \"vue\";\nimport { configProviderInjectionKey } from \"../config-provider/context.js\";\nconst COMPONENT_PREFIX = \"A\";\nconst CLASS_PREFIX = \"arco\";\nconst GLOBAL_CONFIG_NAME = \"$arco\";\nconst getComponentPrefix = (options) => {\n  var _a;\n  return (_a = options == null ? void 0 : options.componentPrefix) != null ? _a : COMPONENT_PREFIX;\n};\nconst setGlobalConfig = (app, options) => {\n  var _a;\n  if (options && options.classPrefix) {\n    app.config.globalProperties[GLOBAL_CONFIG_NAME] = {\n      ...(_a = app.config.globalProperties[GLOBAL_CONFIG_NAME]) != null ? _a : {},\n      classPrefix: options.classPrefix\n    };\n  }\n};\nconst getPrefixCls = (componentName) => {\n  var _a, _b, _c;\n  const instance = getCurrentInstance();\n  const configProvider = inject(configProviderInjectionKey, void 0);\n  const prefix = (_c = (_b = configProvider == null ? void 0 : configProvider.prefixCls) != null ? _b : (_a = instance == null ? void 0 : instance.appContext.config.globalProperties[GLOBAL_CONFIG_NAME]) == null ? void 0 : _a.classPrefix) != null ? _c : CLASS_PREFIX;\n  if (componentName) {\n    return `${prefix}-${componentName}`;\n  }\n  return prefix;\n};\nexport { getComponentPrefix, getPrefixCls, setGlobalConfig };\n","import { cloneVNode, isVNode, Fragment } from \"vue\";\nimport { isArray, isFunction, isString } from \"./is.js\";\nconst isElement = (vn) => {\n  return Boolean(vn && vn.shapeFlag & 1);\n};\nconst isComponent = (vn, type) => {\n  return Boolean(vn && vn.shapeFlag & 6);\n};\nconst isTextChildren = (child, children) => {\n  return Boolean(child && child.shapeFlag & 8);\n};\nconst isArrayChildren = (vn, children) => {\n  return Boolean(vn && vn.shapeFlag & 16);\n};\nconst isSlotsChildren = (vn, children) => {\n  return Boolean(vn && vn.shapeFlag & 32);\n};\nconst getFirstComponent = (children) => {\n  var _a, _b;\n  if (!children) {\n    return void 0;\n  }\n  for (const child of children) {\n    if (isElement(child) || isComponent(child)) {\n      return child;\n    }\n    if (isArrayChildren(child, child.children)) {\n      const result = getFirstComponent(child.children);\n      if (result)\n        return result;\n    } else if (isSlotsChildren(child, child.children)) {\n      const children2 = (_b = (_a = child.children).default) == null ? void 0 : _b.call(_a);\n      if (children2) {\n        const result = getFirstComponent(children2);\n        if (result)\n          return result;\n      }\n    } else if (isArray(child)) {\n      const result = getFirstComponent(child);\n      if (result)\n        return result;\n    }\n  }\n  return void 0;\n};\nconst isEmptyChildren = (children) => {\n  if (!children) {\n    return true;\n  }\n  for (const item of children) {\n    if (item.children) {\n      return false;\n    }\n  }\n  return true;\n};\nconst mergeFirstChild = (children, extraProps) => {\n  if (children && children.length > 0) {\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (isElement(child) || isComponent(child)) {\n        const props = isFunction(extraProps) ? extraProps(child) : extraProps;\n        children[i] = cloneVNode(child, props, true);\n        return true;\n      }\n      const _children = getChildrenArray(child);\n      if (_children && _children.length > 0) {\n        const result = mergeFirstChild(_children, extraProps);\n        if (result)\n          return true;\n      }\n    }\n  }\n  return false;\n};\nconst getChildrenArray = (vn) => {\n  if (isArrayChildren(vn, vn.children)) {\n    return vn.children;\n  }\n  if (isArray(vn)) {\n    return vn;\n  }\n  return void 0;\n};\nconst getFirstElementFromVNode = (vn) => {\n  var _a, _b;\n  if (isElement(vn)) {\n    return vn.el;\n  }\n  if (isComponent(vn)) {\n    if (((_a = vn.el) == null ? void 0 : _a.nodeType) === 1) {\n      return vn.el;\n    }\n    if ((_b = vn.component) == null ? void 0 : _b.subTree) {\n      const ele = getFirstElementFromVNode(vn.component.subTree);\n      if (ele)\n        return ele;\n    }\n  } else {\n    const children = getChildrenArray(vn);\n    return getFirstElementFromChildren(children);\n  }\n  return void 0;\n};\nconst getFirstElementFromChildren = (children) => {\n  if (children && children.length > 0) {\n    for (const child of children) {\n      const element = getFirstElementFromVNode(child);\n      if (element)\n        return element;\n    }\n  }\n  return void 0;\n};\nconst getAllElements = (children, includeText = false) => {\n  var _a, _b;\n  const results = [];\n  for (const item of children != null ? children : []) {\n    if (isElement(item) || isComponent(item) || includeText && isTextChildren(item, item.children)) {\n      results.push(item);\n    } else if (isArrayChildren(item, item.children)) {\n      results.push(...getAllElements(item.children, includeText));\n    } else if (isSlotsChildren(item, item.children)) {\n      results.push(...getAllElements((_b = (_a = item.children).default) == null ? void 0 : _b.call(_a), includeText));\n    } else if (isArray(item)) {\n      results.push(...getAllElements(item, includeText));\n    }\n  }\n  return results;\n};\nfunction unFragment(nodeList) {\n  function loop(nodes) {\n    const unFragmentNodeList = [];\n    nodes.forEach((node) => {\n      var _a, _b;\n      if (isVNode(node) && node.type === Fragment) {\n        if (isSlotsChildren(node, node.children)) {\n          unFragmentNodeList.push(...loop(((_b = (_a = node.children).default) == null ? void 0 : _b.call(_a)) || []));\n        } else if (isArrayChildren(node, node.children)) {\n          unFragmentNodeList.push(...loop(node.children));\n        } else if (isString(node.children)) {\n          unFragmentNodeList.push(node.children);\n        }\n      } else {\n        unFragmentNodeList.push(node);\n      }\n    });\n    return unFragmentNodeList;\n  }\n  return loop(nodeList);\n}\nconst getSlotFunction = (param) => {\n  if (param) {\n    if (isFunction(param))\n      return param;\n    return () => param;\n  }\n  return void 0;\n};\nconst getComponentsFromVNode = (vn, name) => {\n  var _a;\n  const components = [];\n  if (isComponent(vn, vn.type)) {\n    if (vn.type.name === name) {\n      if (vn.component) {\n        components.push(vn.component.uid);\n      }\n    } else if ((_a = vn.component) == null ? void 0 : _a.subTree) {\n      components.push(...getComponentsFromVNode(vn.component.subTree, name));\n    }\n  } else {\n    const children = getChildrenArray(vn);\n    if (children) {\n      components.push(...getComponentsFromChildren(children, name));\n    }\n  }\n  return components;\n};\nconst getComponentsFromChildren = (children, name) => {\n  const components = [];\n  if (children && children.length > 0) {\n    for (const child of children) {\n      components.push(...getComponentsFromVNode(child, name));\n    }\n  }\n  return components;\n};\nexport { getAllElements, getChildrenArray, getComponentsFromChildren, getComponentsFromVNode, getFirstComponent, getFirstElementFromChildren, getFirstElementFromVNode, getSlotFunction, isArrayChildren, isComponent, isElement, isEmptyChildren, isSlotsChildren, isTextChildren, mergeFirstChild, unFragment };\n","import { isString } from \"./is.js\";\nconst NOOP = () => {\n  return void 0;\n};\nconst getDocumentSize = () => {\n  const { body } = document;\n  const html = document.documentElement;\n  let topBody;\n  try {\n    const topWindow = window.top || window.self || window;\n    topBody = topWindow.document.body;\n  } catch {\n  }\n  return {\n    height: Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight,\n      (topBody == null ? void 0 : topBody.scrollHeight) || 0,\n      (topBody == null ? void 0 : topBody.clientHeight) || 0\n    ),\n    width: Math.max(\n      body.scrollWidth,\n      body.offsetWidth,\n      html.clientWidth,\n      html.scrollWidth,\n      html.offsetWidth,\n      (topBody == null ? void 0 : topBody.scrollWidth) || 0,\n      (topBody == null ? void 0 : topBody.clientWidth) || 0\n    )\n  };\n};\nconst isServerRendering = (() => {\n  try {\n    return !(typeof window !== \"undefined\" && document !== void 0);\n  } catch (e) {\n    return true;\n  }\n})();\nconst on = (() => {\n  if (isServerRendering) {\n    return NOOP;\n  }\n  return (element, event, handler, options = false) => {\n    element.addEventListener(\n      event,\n      handler,\n      options\n    );\n  };\n})();\nconst off = (() => {\n  if (isServerRendering) {\n    return NOOP;\n  }\n  return (element, type, handler, options = false) => {\n    element.removeEventListener(\n      type,\n      handler,\n      options\n    );\n  };\n})();\nconst contains = (root, ele) => {\n  if (!root || !ele) {\n    return false;\n  }\n  let node = ele;\n  while (node) {\n    if (node === root) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n  return false;\n};\nconst getOverlay = (type) => {\n  const popper = document.createElement(\"div\");\n  popper.setAttribute(\"class\", `arco-overlay arco-overlay-${type}`);\n  return popper;\n};\nconst querySelector = (selectors, container) => {\n  var _a;\n  if (isServerRendering) {\n    return NOOP();\n  }\n  return (_a = (container != null ? container : document).querySelector(selectors)) != null ? _a : void 0;\n};\nconst getElement = (target, container) => {\n  if (isString(target)) {\n    const selector = target[0] === \"#\" ? `[id='${target.slice(1)}']` : target;\n    return querySelector(selector, container);\n  }\n  return target;\n};\nconst getRelativeRect = (target, relative) => {\n  const targetRect = target.getBoundingClientRect();\n  const relativeRect = relative.getBoundingClientRect();\n  return {\n    top: targetRect.top - relativeRect.top,\n    bottom: relativeRect.bottom - targetRect.bottom,\n    left: targetRect.left - relativeRect.left,\n    right: relativeRect.right - targetRect.right,\n    width: targetRect.width,\n    height: targetRect.height\n  };\n};\nconst isScroll = (element) => {\n  return element.tagName === \"BODY\" ? document.documentElement.scrollHeight > window.innerHeight : element.scrollHeight > element.offsetHeight;\n};\nconst getScrollBarWidth = (element) => {\n  return element.tagName === \"BODY\" ? window.innerWidth - getDocumentSize().width : element.offsetWidth - element.clientWidth;\n};\nexport { NOOP, contains, getDocumentSize, getElement, getOverlay, getRelativeRect, getScrollBarWidth, isScroll, isServerRendering, off, on, querySelector };\n","var _export_sfc = (sfc, props) => {\n  for (const [key, val] of props) {\n    sfc[key] = val;\n  }\n  return sfc;\n};\nexport { _export_sfc as default };\n","import { defineComponent, openBlock, createElementBlock, normalizeClass, renderSlot } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport _export_sfc from \"../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconHover\",\n  props: {\n    prefix: {\n      type: String\n    },\n    size: {\n      type: String,\n      default: \"medium\"\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup() {\n    const prefixCls = getPrefixCls(\"icon-hover\");\n    return {\n      prefixCls\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"span\", {\n    class: normalizeClass([\n      _ctx.prefixCls,\n      {\n        [`${_ctx.prefix}-icon-hover`]: _ctx.prefix,\n        [`${_ctx.prefixCls}-size-${_ctx.size}`]: _ctx.size !== \"medium\",\n        [`${_ctx.prefixCls}-disabled`]: _ctx.disabled\n      }\n    ])\n  }, [\n    renderSlot(_ctx.$slots, \"default\")\n  ], 2);\n}\nvar IconHover = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { IconHover as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconClose\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-close`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", { d: \"M9.857 9.858 24 24m0 0 14.142 14.142M24 24 38.142 9.858M24 24 9.857 38.142\" }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconClose = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconClose as default };\n","import _IconClose from \"./icon-close.js\";\nconst IconClose = Object.assign(_IconClose, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconClose.name, _IconClose);\n  }\n});\nexport { IconClose as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconInfoCircleFill\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-info-circle-fill`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      \"clip-rule\": \"evenodd\",\n      d: \"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z\",\n      fill: \"currentColor\",\n      stroke: \"none\"\n    }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconInfoCircleFill = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconInfoCircleFill as default };\n","import _IconInfoCircleFill from \"./icon-info-circle-fill.js\";\nconst IconInfoCircleFill = Object.assign(_IconInfoCircleFill, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconInfoCircleFill.name, _IconInfoCircleFill);\n  }\n});\nexport { IconInfoCircleFill as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconCheckCircleFill\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-check-circle-fill`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      \"clip-rule\": \"evenodd\",\n      d: \"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm10.207-24.379a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0L22 26.172l-4.878-4.88a1 1 0 0 0-1.415 0l-1.414 1.415a1 1 0 0 0 0 1.414l7 7a1 1 0 0 0 1.414 0l11.5-11.5Z\",\n      fill: \"currentColor\",\n      stroke: \"none\"\n    }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconCheckCircleFill = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconCheckCircleFill as default };\n","import _IconCheckCircleFill from \"./icon-check-circle-fill.js\";\nconst IconCheckCircleFill = Object.assign(_IconCheckCircleFill, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconCheckCircleFill.name, _IconCheckCircleFill);\n  }\n});\nexport { IconCheckCircleFill as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconExclamationCircleFill\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-exclamation-circle-fill`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      \"clip-rule\": \"evenodd\",\n      d: \"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm-2-11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2Zm4-18a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V15Z\",\n      fill: \"currentColor\",\n      stroke: \"none\"\n    }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconExclamationCircleFill = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconExclamationCircleFill as default };\n","import _IconExclamationCircleFill from \"./icon-exclamation-circle-fill.js\";\nconst IconExclamationCircleFill = Object.assign(_IconExclamationCircleFill, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconExclamationCircleFill.name, _IconExclamationCircleFill);\n  }\n});\nexport { IconExclamationCircleFill as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconCloseCircleFill\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-close-circle-fill`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      \"clip-rule\": \"evenodd\",\n      d: \"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm4.955-27.771-4.95 4.95-4.95-4.95a1 1 0 0 0-1.414 0l-1.414 1.414a1 1 0 0 0 0 1.414l4.95 4.95-4.95 4.95a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-4.95-4.95 4.95-4.95a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0Z\",\n      fill: \"currentColor\",\n      stroke: \"none\"\n    }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconCloseCircleFill = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconCloseCircleFill as default };\n","import _IconCloseCircleFill from \"./icon-close-circle-fill.js\";\nconst IconCloseCircleFill = Object.assign(_IconCloseCircleFill, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconCloseCircleFill.name, _IconCloseCircleFill);\n  }\n});\nexport { IconCloseCircleFill as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconLoading\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-loading`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", { d: \"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6\" }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconLoading = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconLoading as default };\n","import _IconLoading from \"./icon-loading.js\";\nconst IconLoading = Object.assign(_IconLoading, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconLoading.name, _IconLoading);\n  }\n});\nexport { IconLoading as default };\n","import { ref, watch, onMounted, onBeforeUnmount, readonly } from \"vue\";\nconst POPUP_BASE_Z_INDEX = 1e3;\nconst MESSAGE_BASE_Z_INDEX = 5e3;\nconst Z_INDEX_STEP = 1;\nclass PopupManager {\n  constructor() {\n    this.popupStack = {\n      popup: /* @__PURE__ */ new Set(),\n      dialog: /* @__PURE__ */ new Set(),\n      message: /* @__PURE__ */ new Set()\n    };\n    this.getNextZIndex = (type) => {\n      const current = type === \"message\" ? Array.from(this.popupStack.message).pop() || MESSAGE_BASE_Z_INDEX : Array.from(this.popupStack.popup).pop() || POPUP_BASE_Z_INDEX;\n      return current + Z_INDEX_STEP;\n    };\n    this.add = (type) => {\n      const zIndex = this.getNextZIndex(type);\n      this.popupStack[type].add(zIndex);\n      if (type === \"dialog\") {\n        this.popupStack.popup.add(zIndex);\n      }\n      return zIndex;\n    };\n    this.delete = (zIndex, type) => {\n      this.popupStack[type].delete(zIndex);\n      if (type === \"dialog\") {\n        this.popupStack.popup.delete(zIndex);\n      }\n    };\n    this.isLastDialog = (zIndex) => {\n      if (this.popupStack.dialog.size > 1) {\n        return zIndex === Array.from(this.popupStack.dialog).pop();\n      }\n      return true;\n    };\n  }\n}\nconst popupManager = new PopupManager();\nfunction usePopupManager(type, {\n  visible,\n  runOnMounted\n} = {}) {\n  const zIndex = ref(0);\n  const open = () => {\n    zIndex.value = popupManager.add(type);\n  };\n  const close = () => {\n    popupManager.delete(zIndex.value, type);\n  };\n  const isLastDialog = () => {\n    if (type === \"dialog\") {\n      return popupManager.isLastDialog(zIndex.value);\n    }\n    return false;\n  };\n  watch(\n    () => visible == null ? void 0 : visible.value,\n    (visible2) => {\n      if (visible2) {\n        open();\n      } else {\n        close();\n      }\n    },\n    {\n      immediate: true\n    }\n  );\n  if (runOnMounted) {\n    onMounted(() => {\n      open();\n    });\n    onBeforeUnmount(() => {\n      close();\n    });\n  }\n  return {\n    zIndex: readonly(zIndex),\n    open,\n    close,\n    isLastDialog\n  };\n}\nexport { usePopupManager as default };\n","import { defineComponent, onMounted, onUpdated, onUnmounted, resolveComponent, openBlock, createElementBlock, normalizeClass, renderSlot, createBlock, createCommentVNode, createElementVNode, createVNode, withCtx } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport IconHover from \"../_components/icon-hover.js\";\nimport IconClose from \"../icon/icon-close/index.js\";\nimport IconInfoCircleFill from \"../icon/icon-info-circle-fill/index.js\";\nimport IconCheckCircleFill from \"../icon/icon-check-circle-fill/index.js\";\nimport IconExclamationCircleFill from \"../icon/icon-exclamation-circle-fill/index.js\";\nimport IconCloseCircleFill from \"../icon/icon-close-circle-fill/index.js\";\nimport IconLoading from \"../icon/icon-loading/index.js\";\nimport _export_sfc from \"../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"Message\",\n  components: {\n    AIconHover: IconHover,\n    IconInfoCircleFill,\n    IconCheckCircleFill,\n    IconExclamationCircleFill,\n    IconCloseCircleFill,\n    IconClose,\n    IconLoading\n  },\n  props: {\n    type: {\n      type: String,\n      default: \"info\"\n    },\n    closable: {\n      type: Boolean,\n      default: false\n    },\n    showIcon: {\n      type: Boolean,\n      default: true\n    },\n    duration: {\n      type: Number,\n      default: 3e3\n    },\n    resetOnUpdate: {\n      type: Boolean,\n      default: false\n    },\n    resetOnHover: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"close\"],\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"message\");\n    let timer = 0;\n    const handleClose = () => {\n      emit(\"close\");\n    };\n    const startTimer = () => {\n      if (props.duration > 0) {\n        timer = window.setTimeout(handleClose, props.duration);\n      }\n    };\n    const clearTimer = () => {\n      if (timer) {\n        window.clearTimeout(timer);\n        timer = 0;\n      }\n    };\n    onMounted(() => {\n      startTimer();\n    });\n    onUpdated(() => {\n      if (props.resetOnUpdate) {\n        clearTimer();\n        startTimer();\n      }\n    });\n    onUnmounted(() => {\n      clearTimer();\n    });\n    const handleMouseEnter = () => {\n      if (props.resetOnHover) {\n        clearTimer();\n      }\n    };\n    const handleMouseLeave = () => {\n      if (props.resetOnHover) {\n        startTimer();\n      }\n    };\n    return {\n      handleMouseEnter,\n      handleMouseLeave,\n      prefixCls,\n      handleClose\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_icon_info_circle_fill = resolveComponent(\"icon-info-circle-fill\");\n  const _component_icon_check_circle_fill = resolveComponent(\"icon-check-circle-fill\");\n  const _component_icon_exclamation_circle_fill = resolveComponent(\"icon-exclamation-circle-fill\");\n  const _component_icon_close_circle_fill = resolveComponent(\"icon-close-circle-fill\");\n  const _component_icon_loading = resolveComponent(\"icon-loading\");\n  const _component_icon_close = resolveComponent(\"icon-close\");\n  const _component_a_icon_hover = resolveComponent(\"a-icon-hover\");\n  return openBlock(), createElementBlock(\"li\", {\n    role: \"alert\",\n    class: normalizeClass([\n      _ctx.prefixCls,\n      `${_ctx.prefixCls}-${_ctx.type}`,\n      { [`${_ctx.prefixCls}-closable`]: _ctx.closable }\n    ]),\n    onMouseenter: _cache[1] || (_cache[1] = (...args) => _ctx.handleMouseEnter && _ctx.handleMouseEnter(...args)),\n    onMouseleave: _cache[2] || (_cache[2] = (...args) => _ctx.handleMouseLeave && _ctx.handleMouseLeave(...args))\n  }, [\n    _ctx.showIcon && !(_ctx.type === \"normal\" && !_ctx.$slots.icon) ? (openBlock(), createElementBlock(\"span\", {\n      key: 0,\n      class: normalizeClass(`${_ctx.prefixCls}-icon`)\n    }, [\n      renderSlot(_ctx.$slots, \"icon\", {}, () => [\n        _ctx.type === \"info\" ? (openBlock(), createBlock(_component_icon_info_circle_fill, { key: 0 })) : _ctx.type === \"success\" ? (openBlock(), createBlock(_component_icon_check_circle_fill, { key: 1 })) : _ctx.type === \"warning\" ? (openBlock(), createBlock(_component_icon_exclamation_circle_fill, { key: 2 })) : _ctx.type === \"error\" ? (openBlock(), createBlock(_component_icon_close_circle_fill, { key: 3 })) : _ctx.type === \"loading\" ? (openBlock(), createBlock(_component_icon_loading, { key: 4 })) : createCommentVNode(\"v-if\", true)\n      ])\n    ], 2)) : createCommentVNode(\"v-if\", true),\n    createElementVNode(\"span\", {\n      class: normalizeClass(`${_ctx.prefixCls}-content`)\n    }, [\n      renderSlot(_ctx.$slots, \"default\")\n    ], 2),\n    _ctx.closable ? (openBlock(), createElementBlock(\"span\", {\n      key: 1,\n      class: normalizeClass(`${_ctx.prefixCls}-close-btn`),\n      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleClose && _ctx.handleClose(...args))\n    }, [\n      createVNode(_component_a_icon_hover, null, {\n        default: withCtx(() => [\n          createVNode(_component_icon_close)\n        ]),\n        _: 1\n      })\n    ], 2)) : createCommentVNode(\"v-if\", true)\n  ], 34);\n}\nvar Message = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { Message as default };\n","import { defineComponent, createVNode, TransitionGroup, isVNode } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport Message from \"./message.js\";\nimport usePopupManager from \"../_hooks/use-popup-manager.js\";\nimport { getSlotFunction } from \"../_utils/vue-utils.js\";\nfunction _isSlot(s) {\n  return typeof s === \"function\" || Object.prototype.toString.call(s) === \"[object Object]\" && !isVNode(s);\n}\nvar MessageList = defineComponent({\n  name: \"MessageList\",\n  props: {\n    messages: {\n      type: Array,\n      default: () => []\n    },\n    position: {\n      type: String,\n      default: \"top\"\n    }\n  },\n  emits: [\"close\", \"afterClose\"],\n  setup(props, context) {\n    const prefixCls = getPrefixCls(\"message-list\");\n    const {\n      zIndex\n    } = usePopupManager(\"message\", {\n      runOnMounted: true\n    });\n    return () => {\n      let _slot;\n      return createVNode(TransitionGroup, {\n        \"class\": [prefixCls, `${prefixCls}-${props.position}`],\n        \"name\": \"fade-message\",\n        \"tag\": \"ul\",\n        \"style\": {\n          zIndex: zIndex.value\n        },\n        \"onAfterLeave\": () => context.emit(\"afterClose\")\n      }, _isSlot(_slot = props.messages.map((item) => {\n        const slots = {\n          default: getSlotFunction(item.content),\n          icon: getSlotFunction(item.icon)\n        };\n        return createVNode(Message, {\n          \"key\": item.id,\n          \"type\": item.type,\n          \"duration\": item.duration,\n          \"closable\": item.closable,\n          \"resetOnUpdate\": item.resetOnUpdate,\n          \"resetOnHover\": item.resetOnHover,\n          \"onClose\": () => context.emit(\"close\", item.id)\n        }, slots);\n      })) ? _slot : {\n        default: () => [_slot]\n      });\n    };\n  }\n});\nexport { MessageList as default };\n","import { reactive, render, ref, createVNode } from \"vue\";\nimport { MESSAGE_TYPES } from \"../_utils/constant.js\";\nimport { getOverlay } from \"../_utils/dom.js\";\nimport { isString, isUndefined, isFunction } from \"../_utils/is.js\";\nimport MessageList from \"./message-list.js\";\nclass MessageManger {\n  constructor(config, appContext) {\n    this.messageCount = 0;\n    this.add = (config2) => {\n      var _a;\n      this.messageCount++;\n      const id = (_a = config2.id) != null ? _a : `__arco_message_${this.messageCount}`;\n      if (this.messageIds.has(id)) {\n        return this.update(id, config2);\n      }\n      const message2 = reactive({ id, ...config2 });\n      this.messages.value.push(message2);\n      this.messageIds.add(id);\n      return {\n        close: () => this.remove(id)\n      };\n    };\n    this.update = (id, config2) => {\n      for (let i = 0; i < this.messages.value.length; i++) {\n        if (this.messages.value[i].id === id) {\n          const resetOnUpdate = !isUndefined(config2.duration);\n          Object.assign(this.messages.value[i], { ...config2, id, resetOnUpdate });\n          break;\n        }\n      }\n      return {\n        close: () => this.remove(id)\n      };\n    };\n    this.remove = (id) => {\n      for (let i = 0; i < this.messages.value.length; i++) {\n        const item = this.messages.value[i];\n        if (item.id === id) {\n          if (isFunction(item.onClose)) {\n            item.onClose(id);\n          }\n          this.messages.value.splice(i, 1);\n          this.messageIds.delete(id);\n          break;\n        }\n      }\n    };\n    this.clear = () => {\n      this.messages.value.splice(0);\n    };\n    this.destroy = () => {\n      if (this.messages.value.length === 0 && this.container) {\n        render(null, this.container);\n        document.body.removeChild(this.container);\n        this.container = null;\n        messageInstance[this.position] = void 0;\n      }\n    };\n    const { position = \"top\" } = config;\n    this.container = getOverlay(\"message\");\n    this.messageIds = /* @__PURE__ */ new Set();\n    this.messages = ref([]);\n    this.position = position;\n    const vm = createVNode(MessageList, {\n      messages: this.messages.value,\n      position,\n      onClose: this.remove,\n      onAfterClose: this.destroy\n    });\n    if (appContext != null ? appContext : Message._context) {\n      vm.appContext = appContext != null ? appContext : Message._context;\n    }\n    render(vm, this.container);\n    document.body.appendChild(this.container);\n  }\n}\nconst messageInstance = {};\nconst types = [...MESSAGE_TYPES, \"loading\", \"normal\"];\nconst message = types.reduce((pre, value) => {\n  pre[value] = (config, appContext) => {\n    if (isString(config)) {\n      config = { content: config };\n    }\n    const _config = { type: value, ...config };\n    const { position = \"top\" } = _config;\n    if (!messageInstance[position]) {\n      messageInstance[position] = new MessageManger(_config, appContext);\n    }\n    return messageInstance[position].add(_config);\n  };\n  return pre;\n}, {});\nmessage.clear = (position) => {\n  var _a;\n  if (position) {\n    (_a = messageInstance[position]) == null ? void 0 : _a.clear();\n  } else {\n    Object.values(messageInstance).forEach((item) => item == null ? void 0 : item.clear());\n  }\n};\nconst Message = {\n  ...message,\n  install: (app) => {\n    const _message = {\n      clear: message.clear\n    };\n    for (const key of types) {\n      _message[key] = (config, appContext = app._context) => message[key](config, appContext);\n    }\n    app.config.globalProperties.$message = _message;\n  },\n  _context: null\n};\nexport { Message as default };\n","const MESSAGE_TYPES = [\"info\", \"success\", \"warning\", \"error\"];\nconst INPUT_EVENTS = [\n  \"onFocus\",\n  \"onFocusin\",\n  \"onFocusout\",\n  \"onBlur\",\n  \"onChange\",\n  \"onBeforeinput\",\n  \"onInput\",\n  \"onReset\",\n  \"onSubmit\",\n  \"onInvalid\",\n  \"onKeydown\",\n  \"onKeypress\",\n  \"onKeyup\",\n  \"onCopy\",\n  \"onCut\",\n  \"onPaste\",\n  \"onCompositionstart\",\n  \"onCompositionupdate\",\n  \"onCompositionend\",\n  \"onSelect\",\n  \"autocomplete\",\n  \"autofocus\",\n  \"maxlength\",\n  \"minlength\",\n  \"name\",\n  \"pattern\",\n  \"readonly\",\n  \"required\"\n];\nexport { INPUT_EVENTS, MESSAGE_TYPES };\n","<template>\r\n  <header class=\"grid-header\">\r\n    <div class=\"grid-header_left\"></div>\r\n    <div class=\"grid-header_right\">\r\n      <a-space>\r\n        <a-button type=\"primary\" @click=\"openModal\">添加组件</a-button>\r\n        <slot name=\"extra\"></slot>\r\n      </a-space>\r\n    </div>\r\n  </header>\r\n  <div class=\"grid-container\">\r\n    <div ref=\"gridContainer\" class=\"grid-content\" :style=\"gridStyle\" @dragover=\"onDragOver\">\r\n      <!-- 网格背景 -->\r\n      <div class=\"grid-background\" :style=\"gridBackgroundStyle\">\r\n        <div class=\"grid-cell\" v-for=\"item in COLUMNS\" :key=\"item\">\r\n        </div>\r\n      </div>\r\n      <GridsterItem\r\n        v-for=\"component in addedComponents\" \r\n        :key=\"component.id\" \r\n        :component=\"component\"\r\n        :grid-config=\"gridConfig\" \r\n        :container-info=\"containerInfo\" \r\n        @resize=\"onComponentResize\" \r\n        @drag=\"onComponentDrag\"\r\n        @remove=\"removeComponent\">\r\n        <slot name=\"item\" :itemData=\"component\"></slot>\r\n      </GridsterItem>\r\n    </div>\r\n  </div>\r\n  <AddComponent \r\n    ref=\"addComponentRef\" \r\n    @confirm=\"addComponents\"\r\n    :component-library=\"props.componentLibrary\"\r\n  >\r\n    <template v-for=\"slot in Object.keys($slots)\" :key=\"slot\" #[slot]=\"slotProps\">\r\n      <slot :name=\"slot\" v-bind=\"slotProps || {}\"></slot>\r\n    </template>\r\n  </AddComponent>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, reactive, nextTick, onMounted, onUnmounted, watch } from 'vue';\r\nimport type { ComponentItemModel, GridConfig, Position, Size, ContainerInfo } from '../types/layout';\r\nimport { COLUMNS } from '../utils/constant';\r\nimport GridsterItem from './GridsterItem.vue';\r\nimport AddComponent from './AddComponent.vue';\r\nimport { Message } from '@arco-design/web-vue';\r\n\r\nimport {\r\n  reorganizeLayout,\r\n  resizeComponentWithAutoFill,\r\n  validatePositionWithLayout,\r\n  validateDragPosition,\r\n  findAvailablePosition,\r\n  autoFillComponentToGrid,\r\n} from '../utils/grid';\r\n\r\ninterface Props {\r\n  componentLibrary: ComponentItemModel[]\r\n  addedComponents: ComponentItemModel[]\r\n}\r\nconst props = defineProps<Props>()\r\nconst emit = defineEmits([\r\n  'get-container-size', \r\n  'add-component',\r\n  'update:added-components'\r\n])\r\n\r\nconst components = computed({\r\n  get: () => {\r\n    return props.addedComponents ? props.addedComponents : [];\r\n  },\r\n  set: (val: ComponentItemModel[]) => {\r\n    emit('update:added-components', val);\r\n  },\r\n})\r\n\r\nconst gridConfig = reactive<GridConfig>({\r\n  gap: 10,\r\n  cellWidth: 0, // 动态计算\r\n  cellHeight: 80 // 固定行高\r\n})\r\n\r\nconst containerInfo = reactive<ContainerInfo>({\r\n  width: 0,\r\n  height: 0,\r\n  scrollTop: 0\r\n})\r\nconst gridContainer = ref<HTMLElement>()\r\n\r\n// 计算容器高度 - 不允许超出容器高度\r\nconst containerHeight = computed(() => {\r\n  return containerInfo.height // 直接使用容器高度，不允许滚动\r\n})\r\n\r\n// 计算列宽（自适应）\r\nconst updateCellWidth = () => {\r\n  if (!gridContainer.value) return\r\n\r\n  const container = gridContainer.value\r\n  containerInfo.width = container.clientWidth\r\n  containerInfo.height = container.clientHeight\r\n\r\n  // 固定24列，直接计算列宽\r\n  const totalGapWidth = 23 * gridConfig.gap\r\n  const cellWidth = (containerInfo.width - totalGapWidth) / 24\r\n\r\n  // 保留2位小数，设置最小列宽\r\n  gridConfig.cellWidth = Math.max(parseFloat(cellWidth.toFixed(2)), 20)\r\n}\r\n\r\n\r\n// 计算网格样式\r\nconst gridStyle = computed(() => {\r\n  const gap = gridConfig.gap\r\n  const cols = COLUMNS\r\n\r\n  return {\r\n    gridTemplateColumns: `repeat(${cols}, minmax(0, 1fr))`,\r\n    gridTemplateRows: `repeat(auto-fit, 100%)`,\r\n    gap: `${gap}px`,\r\n    width: '100%',\r\n    minHeight: `${containerHeight.value}px`,\r\n  }\r\n})\r\n\r\n// 计算网格背景样式\r\nconst gridBackgroundStyle = computed(() => {\r\n  const gap = gridConfig.gap\r\n  const cols = COLUMNS\r\n\r\n  return {\r\n    gridTemplateColumns: `repeat(${cols}, minmax(0, 1fr))`,\r\n    gap: `${gap}px`,\r\n    gridTemplateRows: `repeat(auto-fit, 100%)`,\r\n    width: '100%',\r\n  }\r\n})\r\n\r\n\r\n// 在容器大小变化时重新布局\r\nconst updateContainerInfo = () => {\r\n  if (!gridContainer.value) return\r\n\r\n  const container = gridContainer.value\r\n  const oldWidth = containerInfo.width\r\n  const oldHeight = containerInfo.height\r\n\r\n  containerInfo.width = container.clientWidth\r\n  containerInfo.height = container.clientHeight\r\n\r\n  updateCellWidth()\r\n\r\n  // 只有当宽度或高度增加时，才进行重新布局\r\n  const widthIncreased = containerInfo.width > oldWidth\r\n  const heightIncreased = containerInfo.height > oldHeight\r\n  \r\n  if (widthIncreased || heightIncreased) {\r\n    console.log('容器尺寸增加，重新布局')\r\n    reorganizeLayout(components.value, containerInfo, gridConfig)\r\n  } else if (oldWidth !== containerInfo.width || oldHeight !== containerInfo.height) {\r\n    console.log('容器尺寸减小，保持原有布局')\r\n    // 尺寸减小时，只进行边界检查和调整，不重新布局\r\n    reorganizeLayout(components.value, containerInfo, gridConfig, false, true)\r\n  }\r\n}\r\n\r\nconst onComponentResize = (id: string, newData: Size & Partial<Position> & { resizeType?: string }) => {\r\n  const componentIndex = components.value.findIndex(c => c.id === id)\r\n  if (componentIndex === -1) return\r\n\r\n  const component = components.value[componentIndex]!\r\n  \r\n  const newSize: Size = {\r\n    width: newData.width || component!.width,\r\n    height: newData.height || component!.height\r\n  }\r\n\r\n  const newPosition: Position = {\r\n    x: newData.x !== undefined ? newData.x : component!.x,\r\n    y: newData.y !== undefined ? newData.y : component!.y\r\n  }\r\n\r\n  // 根据调整类型决定是否应用自动填充\r\n  let filledSize = newSize\r\n  const resizeType = newData.resizeType || ''\r\n  const isWidthResize = ['left', 'right', 'top-left', 'top-right', 'bottom-left', 'bottom-right'].includes(resizeType)\r\n\r\n  if (isWidthResize) {\r\n    // 只有在调整宽度相关的操作时才进行栅格填充\r\n    filledSize = resizeComponentWithAutoFill(component, newSize, gridConfig, containerInfo.width)\r\n  }\r\n\r\n  // 使用智能验证（考虑动态布局）\r\n  const validationResult = validatePositionWithLayout(\r\n    components.value,\r\n    id,\r\n    newPosition,\r\n    filledSize,\r\n    containerInfo,\r\n    gridConfig\r\n  )\r\n\r\n  if (validationResult.valid) {\r\n    component.x = newPosition.x\r\n    component.y = newPosition.y\r\n    component.width = filledSize.width\r\n    component.height = filledSize.height\r\n\r\n    // 更新受影响的组件\r\n    if (validationResult.affectedComponents.length > 0) {\r\n      validationResult.affectedComponents.forEach(affectedComp => {\r\n        const targetComp = components.value.find(c => c.id === affectedComp.id)\r\n        if (targetComp) {\r\n          targetComp.x = affectedComp.x\r\n          targetComp.y = affectedComp.y\r\n        }\r\n      })\r\n    }\r\n\r\n    // 新的碰撞检测逻辑已经在validatePositionWithLayout中处理了布局调整\r\n    // 不需要额外的reorganizeLayout调用\r\n  } else {\r\n    // 可以尝试只调整尺寸不调整位置\r\n    const fallbackResult = validatePositionWithLayout(\r\n      components.value,\r\n      id,\r\n      { x: component.x, y: component.y }, // 保持原位置\r\n      filledSize, // 使用填充后的尺寸\r\n      containerInfo,\r\n      gridConfig\r\n    )\r\n\r\n    if (fallbackResult.valid) {\r\n      component.width = filledSize.width\r\n      component.height = filledSize.height\r\n\r\n      // 更新受影响的组件\r\n      if (fallbackResult.affectedComponents.length > 0) {\r\n        fallbackResult.affectedComponents.forEach(affectedComp => {\r\n          const targetComp = components.value.find(c => c.id === affectedComp.id)\r\n          if (targetComp) {\r\n            targetComp.x = affectedComp.x\r\n            targetComp.y = affectedComp.y\r\n          }\r\n        })\r\n      }\r\n\r\n      // 新的碰撞检测逻辑已经在validatePositionWithLayout中处理了布局调整\r\n      // 不需要额外的reorganizeLayout调用\r\n    }\r\n  }\r\n}\r\n\r\n// 组件拖拽\r\nconst onComponentDrag = (id: string, newPosition: Position) => {\r\n  const component = components.value.find(c => c.id === id)\r\n  if (!component) return\r\n\r\n  // 使用智能拖拽验证（内部包含智能吸附逻辑）\r\n  const dragResult = validateDragPosition(\r\n    components.value,\r\n    id,\r\n    newPosition,\r\n    containerInfo,\r\n    gridConfig\r\n  )\r\n\r\n  if (dragResult.valid) {\r\n    // 使用经过智能吸附处理的最终位置\r\n    component.x = dragResult.finalPosition.x\r\n    component.y = dragResult.finalPosition.y\r\n\r\n    // 更新受影响的组件\r\n    if (dragResult.affectedComponents.length > 0) {\r\n      dragResult.affectedComponents.forEach(affectedComp => {\r\n        const targetComp = components.value.find(c => c.id === affectedComp.id)\r\n        if (targetComp) {\r\n          targetComp.x = affectedComp.x\r\n          targetComp.y = affectedComp.y\r\n        }\r\n      })\r\n    }\r\n\r\n    // 智能拖拽验证已经处理了布局调整，不需要额外的reorganizeLayout调用\r\n  }\r\n}\r\n\r\n// 移除组件\r\nconst removeComponent = (id: string) => {\r\n  const index = components.value.findIndex(c => c.id === id)\r\n  if (index !== -1) {\r\n    components.value.splice(index, 1)\r\n    console.log(`已移除组件: ${id}`)\r\n\r\n    // 移除后重新组织布局\r\n    nextTick(() => {\r\n      reorganizeLayout(components.value, containerInfo, gridConfig)\r\n    })\r\n  }\r\n}\r\n\r\n// 拖拽放置处理\r\nconst onDragOver = (e: DragEvent) => {\r\n  e.preventDefault()\r\n  if (e.dataTransfer) {\r\n    e.dataTransfer.dropEffect = 'move'\r\n  }\r\n}\r\n\r\n\r\n\r\n// ResizeObserver 监听容器大小变化\r\nlet resizeObserver: ResizeObserver | null = null\r\n\r\n// 初始化\r\nonMounted(() => {\r\n  if (gridContainer.value) {\r\n    resizeObserver = new ResizeObserver(() => {\r\n      updateContainerInfo()\r\n    })\r\n    resizeObserver.observe(gridContainer.value)\r\n  }\r\n\r\n  updateContainerInfo()\r\n  window.addEventListener('resize', updateContainerInfo)\r\n})\r\n\r\n// 清理\r\nonUnmounted(() => {\r\n  if (resizeObserver) {\r\n    resizeObserver.disconnect()\r\n  }\r\n  window.removeEventListener('resize', updateContainerInfo)\r\n})\r\n\r\nwatch(\r\n  () => containerInfo,\r\n  () => emit('get-container-size', containerInfo),\r\n  { deep: true }\r\n)\r\n\r\nconst addComponentRef = ref()\r\n\r\nconst openModal = () => {\r\n  addComponentRef.value.open()\r\n}\r\n\r\n// 添加组件时的优化逻辑（自动向后排列，不重新布局）\r\nconst addComponents = (selectedComponents: ComponentItemModel[]) => {\r\n  let addedCount = 0\r\n  const failedComponents: string[] = []\r\n\r\n  selectedComponents.forEach(comp => {\r\n    const position = findAvailablePosition(components.value, comp, containerInfo, gridConfig)\r\n    if (position) {\r\n      const newComponent: ComponentItemModel = {\r\n        ...comp,\r\n        id: `${comp.type}-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`,\r\n        x: position.x,\r\n        y: position.y\r\n      }\r\n\r\n      // 确保组件尺寸正确\r\n      autoFillComponentToGrid(newComponent, gridConfig.cellWidth, gridConfig.gap)\r\n\r\n      // 直接添加组件，不重新布局\r\n      components.value.push(newComponent)\r\n      addedCount++\r\n      console.log(`✓ 成功添加: ${comp.name} 位置: (${position.x}, ${position.y})`)\r\n    } else {\r\n      console.warn(`✗ 找不到合适位置: ${comp.name}`)\r\n      failedComponents.push(comp.name)\r\n    }\r\n  })\r\n\r\n  if (failedComponents.length > 0) {\r\n    Message.warning(`以下组件无法添加（空间不足）：\\n${failedComponents.join('\\n')}`)\r\n    return\r\n  }\r\n\r\n  if (addedCount > 0) {\r\n    console.log(`成功添加 ${addedCount} 个组件`)\r\n  }\r\n\r\n  addComponentRef.value.close()\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.grid-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 60px;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 20px;\r\n\r\n  &_right,\r\n  &_left {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  &_right {\r\n    justify-content: flex-end;\r\n  }\r\n}\r\n\r\n.grid-container {\r\n  display: flex;\r\n  height: calc(100% - 60px);\r\n  overflow: hidden;\r\n  padding: 10px;\r\n  background: #fff;\r\n}\r\n\r\n.grid-content {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n  flex: 1;\r\n  display: grid;\r\n  // background: white;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n  justify-content: start;\r\n  align-content: start;\r\n  min-width: 0;\r\n  /* 防止网格溢出 */\r\n}\r\n\r\n.grid-background {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  pointer-events: none;\r\n  z-index: 0;\r\n  background: #fff;\r\n  display: grid;\r\n\r\n  .grid-cell {\r\n    background: #f0f5f5;\r\n    height: 100%;\r\n  }\r\n}\r\n</style>\r\n","// 导出组件\r\nexport { default as GridDrag } from './components/GridDrag.vue'\r\nexport { default as GridsterItem } from './components/GridsterItem.vue'\r\nexport { default as AddComponent } from './components/AddComponent.vue'\r\n\r\n// 导出类型\r\nexport type {\r\n  ComponentItemModel,\r\n  GridConfig,\r\n  Position,\r\n  Size,\r\n  ContainerInfo\r\n} from './types/layout'\r\n\r\n// 导出工具函数\r\nexport {\r\n  validatePosition,\r\n  validatePositionWithLayout,\r\n  validateDragPosition,\r\n  findAvailablePosition,\r\n  canAddComponent,\r\n  calculateAvailableSpace,\r\n  snapToGrid,\r\n  snapToColumnGrid,\r\n  snapToColumnGridWithSize,\r\n  snapToColumnGridWithSmartHeight,\r\n  reorganizeLayout,\r\n  autoFillComponentToGrid,\r\n  resizeComponentWithAutoFill,\r\n  getAffectedComponents\r\n} from './utils/grid'\r\n\r\n// 导出常量\r\nexport { COLUMNS } from './utils/constant'\r\n\r\n// Vue插件安装函数\r\nimport type { App } from 'vue'\r\nimport GridDrag from './components/GridDrag.vue'\r\nimport GridsterItem from './components/GridsterItem.vue'\r\nimport AddComponent from './components/AddComponent.vue'\r\n\r\nexport function install(app: App): void {\r\n  app.component('GridDrag', GridDrag)\r\n  app.component('GridsterItem', GridsterItem)\r\n  app.component('AddComponent', AddComponent)\r\n}\r\n\r\n// 插件对象\r\nexport interface VueGridLayoutPlugin {\r\n  install: (app: App) => void\r\n  GridDrag: typeof GridDrag\r\n  GridsterItem: typeof GridsterItem\r\n  AddComponent: typeof AddComponent\r\n}\r\n\r\n// 默认导出\r\nconst plugin: VueGridLayoutPlugin = {\r\n  install,\r\n  GridDrag,\r\n  GridsterItem,\r\n  AddComponent\r\n}\r\n\r\nexport default plugin"],"names":["COLUMNS","getComponentDistance","comp1","comp2","horizontalDistance","x","width","verticalDistance","y","height","Math","min","shouldTriggerLayout","resizingComponent","newPosition","newSize","allComponents","gap","resizedComponent","otherComponent","id","findAvailablePosition","components","newComponent","containerInfo","gridConfig","containerWidth","containerHeight","columnWidth","console","log","name","autoFillComponentToGrid","warn","spanCols","ceil","actualSpanCols","columnHeights","Array","fill","comp","startCol","floor","compSpanCols","endCol","compBottomY","i","max","slice","bestStartCol","minHeight","Infinity","maxHeightInRange","newX","newY","parseFloat","toFixed","existingComp","hasOverlap","snapToColumnGridWithSmartHeight","position","componentSize","currentId","unitWidth","nearestColumn","round","componentCols","maxColumn","snappedX","snappedY","candidateComponents","filter","horizontalOverlap","isAbove","length","closestComponent","minDistance","distance","reorganizeLayout","skipAutoFill","onlyOnSizeIncrease","newHeight","component","minWidth","requiredCols","actualCols","filledWidth","resizeComponentWithAutoFill","cellWidth","actualWidth","actualHeight","finalWidth","finalHeight","getAffectedComponents","affected","needsLayoutAdjustment","tempComponents","map","canResize","forEach","tempComp","find","tc","push","validatePositionWithLayout","size","valid","affectedComponents","currentComponent","c","pos1","size1","pos2","size2","overlapX","overlapY","validateDragPosition","finalPosition","currentSize","snappedPosition","draggedComponent","j","props","__props","emit","__emit","isDragging","ref","isResizing","currentResizeType","dragStartPosition","dragOffset","componentStyle","computed","left","top","zIndex","value","cursor","getResizeCursor","type","right","bottom","onEdgeMouseDown","edge","e","preventDefault","stopPropagation","onResizeStart","onCornerMouseDown","corner","onDragStart","dataTransfer","setData","effectAllowed","dragImage","currentTarget","setDragImage","rect","getBoundingClientRect","clientX","clientY","onDrag","containerRect","parentElement","pixelX","pixelY","onDragEnd","startX","startY","startWidth","startHeight","startXPos","startYPos","onMouseMove","moveEvent","buttons","onMouseUp","deltaX","deltaY","newWidth","includes","filledSize","resizeType","document","removeEventListener","addEventListener","_createElementBlock","class","_normalizeClass","resizing","style","draggable","onDragstart","onDragend","_renderSlot","_ctx","$slots","_createElementVNode","_hoisted_1","onMousedown","_cache","$event","_createVNode","_component_icon_delete","onClick","$emit","visible","selectedComponents","searchQuery","filteredComponents","componentLibrary","query","toLowerCase","isSelected","some","selected","onComponentClick","index","findIndex","item","splice","onComponentSelect","Date","now","random","toString","substr","handleOk","close","__expose","open","_createBlock","_component_a_modal","title","onOk","onCancel","_component_a_alert","_toDisplayString","_hoisted_2","_hoisted_3","_component_a_input","placeholder","_component_a_scrollbar","overflow","_hoisted_4","_Fragment","_renderList","key","_hoisted_6","_hoisted_7","opt","Object","prototype","isNumber","obj","call","isUndefined","isFunction","configProviderInjectionKey","Symbol","getPrefixCls","componentName","_a","_b","_c","instance","getCurrentInstance","configProvider","inject","prefix","prefixCls","appContext","config","globalProperties","classPrefix","getSlotFunction","param","window","_export_sfc","sfc","val","IconHover","defineComponent","String","default","disabled","Boolean","setup","$props","$setup","$data","$options","openBlock","createElementBlock","normalizeClass","renderSlot","_sfc_main","Number","strokeWidth","strokeLinecap","validator","strokeLinejoin","rotate","spin","emits","click","ev","cls","innerStyle","styles","fontSize","transform","_IconClose","viewBox","xmlns","stroke","normalizeStyle","args","createElementVNode","d","IconClose","assign","install","app","options","iconPrefix","_IconInfoCircleFill","IconInfoCircleFill","_IconCheckCircleFill","IconCheckCircleFill","_IconExclamationCircleFill","IconExclamationCircleFill","_IconCloseCircleFill","IconCloseCircleFill","_IconLoading","IconLoading","popupManager","constructor","this","popupStack","popup","Set","dialog","message","getNextZIndex","from","pop","add","delete","isLastDialog","Message","AIconHover","closable","showIcon","duration","resetOnUpdate","resetOnHover","timer","handleClose","startTimer","setTimeout","clearTimer","clearTimeout","onMounted","onUpdated","onUnmounted","handleMouseEnter","handleMouseLeave","_component_icon_info_circle_fill","resolveComponent","_component_icon_check_circle_fill","_component_icon_exclamation_circle_fill","_component_icon_close_circle_fill","_component_icon_loading","_component_icon_close","_component_a_icon_hover","role","onMouseenter","onMouseleave","icon","createBlock","createCommentVNode","createVNode","withCtx","_","MessageList","messages","context","runOnMounted","watch","visible2","immediate","onBeforeUnmount","readonly","usePopupManager","_slot","TransitionGroup","tag","onAfterLeave","s","slots","content","onClose","isVNode","MessageManger","messageCount","config2","messageIds","has","update","message2","reactive","remove","clear","destroy","container","render","body","removeChild","messageInstance","popper","createElement","setAttribute","getOverlay","vm","onAfterClose","_context","appendChild","types","reduce","pre","_config","values","_message","$message","get","addedComponents","set","cellHeight","scrollTop","gridContainer","gridStyle","gridTemplateColumns","gridTemplateRows","gridBackgroundStyle","updateContainerInfo","oldWidth","oldHeight","clientWidth","clientHeight","totalGapWidth","updateCellWidth","widthIncreased","heightIncreased","onComponentResize","newData","componentIndex","validationResult","affectedComp","targetComp","fallbackResult","onComponentDrag","dragResult","removeComponent","nextTick","onDragOver","dropEffect","resizeObserver","ResizeObserver","observe","disconnect","deep","addComponentRef","openModal","addComponents","addedCount","failedComponents","substring","warning","join","_component_a_space","_component_a_button","onDragover","_unref","GridsterItem","onResize","onRemove","itemData","AddComponent","onConfirm","keys","slot","fn","_withCtx","slotProps","_normalizeProps","_guardReactiveProps","GridDrag","plugin","_gridConfig","usedArea","total","totalArea","availableArea","utilization","unitHeight","nearestRow","nearestGridX","nearestGridY"],"mappings":"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","x_google_ignoreList":[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]}