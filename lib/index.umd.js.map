{"version":3,"file":"index.umd.js","sources":["../packages/src/utils/constant.ts","../packages/src/utils/grid.ts","../packages/src/components/GridsterItem.vue","../packages/src/components/AddComponent.vue","../node_modules/@arco-design/web-vue/es/_utils/is.js","../node_modules/@arco-design/web-vue/es/config-provider/context.js","../node_modules/@arco-design/web-vue/es/_utils/global-config.js","../node_modules/@arco-design/web-vue/es/_utils/vue-utils.js","../node_modules/@arco-design/web-vue/es/_utils/dom.js","../node_modules/@arco-design/web-vue/es/_virtual/plugin-vue_export-helper.js","../node_modules/@arco-design/web-vue/es/_components/icon-hover.js","../node_modules/@arco-design/web-vue/es/icon/icon-close/icon-close.js","../node_modules/@arco-design/web-vue/es/icon/icon-close/index.js","../node_modules/@arco-design/web-vue/es/icon/icon-info-circle-fill/icon-info-circle-fill.js","../node_modules/@arco-design/web-vue/es/icon/icon-info-circle-fill/index.js","../node_modules/@arco-design/web-vue/es/icon/icon-check-circle-fill/icon-check-circle-fill.js","../node_modules/@arco-design/web-vue/es/icon/icon-check-circle-fill/index.js","../node_modules/@arco-design/web-vue/es/icon/icon-exclamation-circle-fill/icon-exclamation-circle-fill.js","../node_modules/@arco-design/web-vue/es/icon/icon-exclamation-circle-fill/index.js","../node_modules/@arco-design/web-vue/es/icon/icon-close-circle-fill/icon-close-circle-fill.js","../node_modules/@arco-design/web-vue/es/icon/icon-close-circle-fill/index.js","../node_modules/@arco-design/web-vue/es/icon/icon-loading/icon-loading.js","../node_modules/@arco-design/web-vue/es/icon/icon-loading/index.js","../node_modules/@arco-design/web-vue/es/_hooks/use-popup-manager.js","../node_modules/@arco-design/web-vue/es/message/message.js","../node_modules/@arco-design/web-vue/es/message/message-list.js","../node_modules/@arco-design/web-vue/es/message/index.js","../node_modules/@arco-design/web-vue/es/_utils/constant.js","../packages/src/components/GridDrag.vue","../packages/src/index.ts"],"sourcesContent":["export const COLUMNS = 24","import type { ComponentItemModel, GridConfig, Position, Size, ContainerInfo } from \"../types/layout\";\r\nimport { COLUMNS } from \"./constant\";\r\n\r\n// 查找可用位置（不重新布局，自动向后排列）\r\nexport function findAvailablePosition(\r\n  components: ComponentItemModel[],\r\n  newComponent: ComponentItemModel,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): Position | null {\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n  const { gap, cellWidth } = gridConfig\r\n\r\n\r\n  console.log(`🔍 查找位置 - 容器宽度: ${containerWidth}, 列宽: ${cellWidth}, 间距: ${gap}`)\r\n  console.log(`📦 原始组件: ${newComponent.name}, 宽度: ${newComponent.width}, 高度: ${newComponent.height}`)\r\n\r\n  // 首先对组件进行自动填充\r\n  autoFillComponentToGrid(newComponent, gridConfig)\r\n\r\n  console.log(`📦 填充后组件: ${newComponent.name}, 宽度: ${newComponent.width}, 高度: ${newComponent.height}`)\r\n\r\n  // 如果组件宽度超过容器宽度，无法放置\r\n  if (newComponent.width > containerWidth) {\r\n    console.warn('组件宽度超过容器宽度')\r\n    return null\r\n  }\r\n\r\n  // 计算组件占用的列数（组件宽度已经包含了间距，不需要再加gap）\r\n  const spanCols = Math.ceil(newComponent.width / (cellWidth + gap))\r\n  const actualSpanCols = Math.min(spanCols, COLUMNS)\r\n\r\n  console.log(`📏 组件占用列数: ${spanCols} -> ${actualSpanCols}`)\r\n\r\n  // 计算每列的当前高度\r\n  const columnHeights: number[] = new Array(COLUMNS).fill(0)\r\n\r\n  // 根据现有组件更新列高度\r\n  for (const comp of components) {\r\n    // 计算组件起始列：x坐标除以(列宽+间距)\r\n    const startCol = Math.floor(comp.x / (cellWidth + gap))\r\n    // 计算组件占用的列数（组件宽度已经包含了间距）\r\n    const compSpanCols = Math.ceil(comp.width / (cellWidth + gap))\r\n    const endCol = Math.min(startCol + compSpanCols, COLUMNS)\r\n    const compBottomY = comp.y + comp.height + gap\r\n\r\n    console.log(`📍 现有组件: ${comp.name}, 位置: (${comp.x}, ${comp.y}), 尺寸: ${comp.width}x${comp.height}`)\r\n    console.log(`📍 占用列: ${startCol} -> ${endCol} (${compSpanCols}列), 底部Y: ${compBottomY}`)\r\n\r\n    for (let i = startCol; i < endCol; i++) {\r\n      if (i >= 0 && i < COLUMNS) {\r\n        columnHeights[i] = Math.max(columnHeights[i] || 0, compBottomY)\r\n      }\r\n    }\r\n  }\r\n\r\n  console.log(`📊 列高度数组:`, columnHeights.slice(0, 12)) // 只显示前12列\r\n\r\n  // 找到最佳放置位置（高度最低的连续列）\r\n  let bestStartCol = 0\r\n  let minHeight = Infinity\r\n\r\n  for (let startCol = 0; startCol <= COLUMNS - actualSpanCols; startCol++) {\r\n    let maxHeightInRange = 0\r\n    for (let i = startCol; i < startCol + actualSpanCols; i++) {\r\n      maxHeightInRange = Math.max(maxHeightInRange, columnHeights[i] || 0)\r\n    }\r\n\r\n    if (maxHeightInRange < minHeight) {\r\n      minHeight = maxHeightInRange\r\n      bestStartCol = startCol\r\n    }\r\n  }\r\n\r\n  // 计算实际位置：列索引 * (列宽 + 间距)\r\n  const newX = bestStartCol * (cellWidth + gap)\r\n  const newY = minHeight\r\n\r\n  console.log(`🎯 最佳位置: 列${bestStartCol}, 高度${minHeight} -> 坐标(${newX}, ${newY})`)\r\n\r\n  // 检查是否超出容器高度\r\n  if (newY + newComponent.height > containerHeight) {\r\n    console.warn(`❌ 位置超出容器高度: ${newY + newComponent.height} > ${containerHeight}`)\r\n    return null\r\n  }\r\n\r\n  // 验证新位置不与现有组件重叠\r\n  const newPosition = { x: parseFloat(newX.toFixed(2)), y: parseFloat(newY.toFixed(2)) }\r\n  const newSize = { width: newComponent.width, height: newComponent.height }\r\n\r\n  for (const existingComp of components) {\r\n    if (hasOverlap(\r\n      newPosition,\r\n      newSize,\r\n      { x: existingComp.x, y: existingComp.y },\r\n      { width: existingComp.width, height: existingComp.height }\r\n    )) {\r\n      console.warn('新组件位置与现有组件重叠')\r\n      return null\r\n    }\r\n  }\r\n\r\n  return newPosition\r\n}\r\n\r\n// 智能高度吸附（只在与上面紧邻组件距离小于等于gap时才吸附）\r\nexport function snapToColumnGridWithSmartHeight(\r\n  position: Position,\r\n  componentSize: Size,\r\n  components: ComponentItemModel[],\r\n  currentId: string,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): Position {\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n  const { gap } = gridConfig\r\n\r\n  // 计算每列的宽度（24列固定）\r\n  const columnWidth = (containerWidth - (COLUMNS - 1) * gap) / COLUMNS\r\n  const unitWidth = columnWidth + gap\r\n\r\n  // 计算最近的列位置\r\n  let nearestColumn = Math.round(position.x / unitWidth)\r\n\r\n  // 计算组件占用的列数（组件宽度已经包含了间距）\r\n  const componentCols = Math.ceil(componentSize.width / unitWidth)\r\n\r\n  // 确保组件不会超出右边界\r\n  const maxColumn = COLUMNS - componentCols\r\n  nearestColumn = Math.max(0, Math.min(nearestColumn, maxColumn))\r\n\r\n  // 计算吸附后的X坐标：列索引 * (列宽 + 间距)\r\n  const snappedX = nearestColumn * unitWidth\r\n\r\n  // 智能Y坐标处理\r\n  let snappedY = position.y\r\n\r\n  // 查找在当前组件上方且有水平重叠的组件\r\n  const candidateComponents = components.filter(comp => {\r\n    if (comp.id === currentId) return false\r\n\r\n    // 检查水平重叠（使用吸附后的X坐标）\r\n    const horizontalOverlap = snappedX < comp.x + comp.width && snappedX + componentSize.width > comp.x\r\n\r\n    // 检查是否在上方（组件底部在当前位置上方）\r\n    const isAbove = comp.y + comp.height <= position.y\r\n\r\n    return horizontalOverlap && isAbove\r\n  })\r\n\r\n  if (candidateComponents.length > 0) {\r\n    // 找到最接近的上方组件（距离当前位置最近的）\r\n    let closestComponent: ComponentItemModel | null = null\r\n    let minDistance = Infinity\r\n\r\n    for (const comp of candidateComponents) {\r\n      const distance = position.y - (comp.y + comp.height)\r\n      if (distance >= 0 && distance < minDistance) {\r\n        minDistance = distance\r\n        closestComponent = comp\r\n      }\r\n    }\r\n\r\n    // 如果距离小于等于gap，则吸附到该组件下方并留出gap距离\r\n    if (closestComponent && minDistance <= gap) {\r\n      snappedY = closestComponent.y + closestComponent.height + gap\r\n      console.log(`高度吸附: 距离=${minDistance}, 吸附到Y=${snappedY}`)\r\n    } else {\r\n      console.log(`不进行高度吸附: 距离=${minDistance} > gap=${gap}`)\r\n    }\r\n  }\r\n\r\n  // 确保组件不会超出下边界\r\n  if (snappedY + componentSize.height > containerHeight) {\r\n    snappedY = containerHeight - componentSize.height\r\n  }\r\n\r\n  // 确保Y坐标不为负数\r\n  snappedY = Math.max(0, snappedY)\r\n\r\n  return {\r\n    x: parseFloat(snappedX.toFixed(2)),\r\n    y: parseFloat(snappedY.toFixed(2))\r\n  }\r\n}\r\n\r\n// 重新组织布局（瀑布流布局，固定24列）\r\nexport function reorganizeLayout(\r\n  components: ComponentItemModel[],\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig,\r\n  skipAutoFill: boolean = false,\r\n  onlyOnSizeIncrease: boolean = false\r\n): boolean {\r\n  if (components.length === 0) return true\r\n\r\n  const { gap } = gridConfig\r\n  const containerWidth = containerInfo.width\r\n  const containerHeight = containerInfo.height\r\n\r\n  // 计算每列的宽度（24列固定）\r\n  const columnWidth = (containerWidth - (COLUMNS - 1) * gap) / COLUMNS\r\n\r\n  // 如果是尺寸减小的情况，只检查边界，不重新布局\r\n  if (onlyOnSizeIncrease) {\r\n    // 检查所有组件是否仍在容器范围内\r\n    for (const comp of components) {\r\n      if (comp.x + comp.width > containerWidth || comp.y + comp.height > containerHeight) {\r\n        // 如果有组件超出边界，需要调整\r\n        comp.x = Math.min(comp.x, containerWidth - comp.width)\r\n        comp.y = Math.min(comp.y, containerHeight - comp.height)\r\n        comp.x = Math.max(0, comp.x)\r\n        comp.y = Math.max(0, comp.y)\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  // 记录每列的当前高度\r\n  const columnHeights: number[] = new Array(COLUMNS).fill(0)\r\n\r\n  for (const comp of components) {\r\n    // 自动填充组件尺寸到栅格（可选）\r\n    if (!skipAutoFill) {\r\n      autoFillComponentToGrid(comp, gridConfig)\r\n    }\r\n\r\n    // 计算组件占用的列数（组件宽度已经包含了间距）\r\n    const spanCols = Math.ceil(comp.width / (columnWidth + gap))\r\n    const actualSpanCols = Math.min(spanCols, COLUMNS)\r\n\r\n    // 找到最佳放置位置（高度最低的连续列）\r\n    let bestStartCol = 0\r\n    let minHeight = Infinity\r\n\r\n    for (let startCol = 0; startCol <= COLUMNS - actualSpanCols; startCol++) {\r\n      // 计算这个位置的最大高度\r\n      let maxHeightInRange = 0\r\n      for (let i = startCol; i < startCol + actualSpanCols; i++) {\r\n        maxHeightInRange = Math.max(maxHeightInRange, columnHeights[i] || 0)\r\n      }\r\n\r\n      // 如果这个位置的高度更低，选择这个位置\r\n      if (maxHeightInRange < minHeight) {\r\n        minHeight = maxHeightInRange\r\n        bestStartCol = startCol\r\n      }\r\n    }\r\n\r\n    // 计算组件的实际位置：列索引 * (列宽 + 间距)\r\n    comp.x = parseFloat((bestStartCol * (columnWidth + gap)).toFixed(2))\r\n    comp.y = parseFloat(minHeight.toFixed(2))\r\n\r\n    // 检查是否超出容器高度\r\n    if (comp.y + comp.height > containerHeight) {\r\n      console.warn('组件超出容器高度，无法完成布局')\r\n      return false // 布局失败\r\n    }\r\n\r\n    // 更新占用列的高度\r\n    const newHeight = comp.y + comp.height + gap\r\n    for (let i = bestStartCol; i < bestStartCol + actualSpanCols; i++) {\r\n      columnHeights[i] = newHeight\r\n    }\r\n  }\r\n\r\n  return true // 布局成功\r\n}\r\n\r\n// 基于24列栅格系统的组件自动填充\r\nexport function autoFillComponentToGrid(\r\n  component: ComponentItemModel,\r\n  gridConfig: GridConfig\r\n): void {\r\n  // 确保最小尺寸\r\n  const { cellWidth, gap } = gridConfig\r\n  const minWidth = component.minWidth || cellWidth\r\n  const minHeight = component.minHeight || 60\r\n\r\n  component.width = Math.max(component.width, minWidth)\r\n  component.height = Math.max(component.height, minHeight)\r\n\r\n  // 如果组件宽度未填满栅格，则进行填充\r\n  // 计算组件应该占用的列数\r\n  const requiredCols = Math.ceil(component.width / (cellWidth + gap))\r\n  const actualCols = Math.min(requiredCols, COLUMNS)\r\n\r\n  // 计算填充后的宽度\r\n  const filledWidth = actualCols * cellWidth + (actualCols - 1) * gap\r\n\r\n  // 更新组件宽度为填充后的宽度\r\n  component.width = parseFloat(filledWidth.toFixed(2))\r\n}\r\n\r\n// 修改组件调整大小时也支持自动填充（基于24列栅格）\r\nexport function resizeComponentWithAutoFill(\r\n  component: ComponentItemModel,\r\n  newSize: Size,\r\n  gridConfig: GridConfig,\r\n): Size {\r\n  const { gap, cellWidth } = gridConfig\r\n\r\n  // 确保最小尺寸\r\n  const minWidth = component.minWidth || cellWidth\r\n  const minHeight = component.minHeight || 60\r\n\r\n  const actualWidth = Math.max(newSize.width, minWidth)\r\n  const actualHeight = Math.max(newSize.height, minHeight)\r\n\r\n  // 计算组件应该占用的列数\r\n  const requiredCols = Math.ceil(actualWidth / (cellWidth + gap))\r\n  const actualCols = Math.min(requiredCols, COLUMNS)\r\n\r\n  // 计算填充后的宽度\r\n  const filledWidth = actualCols * cellWidth + (actualCols - 1) * gap\r\n\r\n  // 确保填充后的宽度不小于最小值\r\n  const finalWidth = Math.max(filledWidth, minWidth)\r\n  // 高度不进行栅格填充，保持用户设置的高度\r\n  const finalHeight = Math.max(actualHeight, minHeight)\r\n\r\n  return {\r\n    width: parseFloat(finalWidth.toFixed(2)),\r\n    height: parseFloat(finalHeight.toFixed(2))\r\n  }\r\n}\r\n\r\n// 智能处理向右扩展宽度时的碰撞\r\nfunction handleRightExpansion(\r\n  components: ComponentItemModel[],\r\n  resizingComponent: ComponentItemModel,\r\n  newPosition: Position,\r\n  newSize: Size,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): { affected: ComponentItemModel[]; canResize: boolean } {\r\n  const affected: ComponentItemModel[] = []\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n  const { gap } = gridConfig\r\n\r\n  // 创建调整后的组件副本\r\n  const resizedComponent = {\r\n    ...resizingComponent,\r\n    x: newPosition.x,\r\n    y: newPosition.y,\r\n    width: newSize.width,\r\n    height: newSize.height\r\n  }\r\n\r\n  // 找到所有与调整后组件有垂直重叠且在右侧的组件\r\n  const rightComponents = components.filter(comp => {\r\n    if (comp.id === resizingComponent.id) return false\r\n    \r\n    // 检查垂直重叠\r\n    const verticalOverlap = !(resizedComponent.y + resizedComponent.height <= comp.y || comp.y + comp.height <= resizedComponent.y)\r\n    \r\n    // 检查是否在右侧（原始位置的右侧）\r\n    const isOnRight = comp.x >= resizingComponent.x + resizingComponent.width - gap\r\n    \r\n    return verticalOverlap && isOnRight\r\n  })\r\n\r\n  if (rightComponents.length === 0) {\r\n    return { affected: [], canResize: true }\r\n  }\r\n\r\n  // 按X坐标排序，从左到右处理\r\n  rightComponents.sort((a, b) => a.x - b.x)\r\n\r\n  const newRightEdge = resizedComponent.x + resizedComponent.width\r\n\r\n  // 检查是否会与右侧组件碰撞\r\n  let needsPush = false\r\n  let pushDistance = 0\r\n\r\n  for (const comp of rightComponents) {\r\n    const requiredDistance = newRightEdge + gap - comp.x\r\n    if (requiredDistance > 0) {\r\n      needsPush = true\r\n      pushDistance = requiredDistance\r\n      break // 只需要检查最近的组件\r\n    }\r\n  }\r\n\r\n  if (!needsPush) {\r\n    return { affected: [], canResize: true }\r\n  }\r\n\r\n  // 需要推动右侧组件\r\n  const componentsToMove: ComponentItemModel[] = []\r\n  const componentsToWrap: ComponentItemModel[] = [] // 需要换行的组件\r\n  \r\n  // 首先确定哪些组件需要换行\r\n  for (const comp of rightComponents) {\r\n    const newX = comp.x + pushDistance\r\n    \r\n    // 检查是否超出容器右边界\r\n    if (newX + comp.width > containerWidth) {\r\n      componentsToWrap.push(comp)\r\n    } else {\r\n      // 可以在当前行右移\r\n      componentsToMove.push({ ...comp, x: newX, y: comp.y })\r\n    }\r\n  }\r\n  \r\n  // 处理需要换行的组件，确保它们不重叠\r\n  if (componentsToWrap.length > 0) {\r\n    // 创建包含调整后组件和已移动组件的临时列表\r\n    const allComponents = [\r\n      ...components.filter(c => c.id !== resizingComponent.id && !rightComponents.some(rc => rc.id === c.id)),\r\n      resizedComponent,\r\n      ...componentsToMove\r\n    ]\r\n    \r\n    // 按X坐标排序需要换行的组件，确保从左到右处理\r\n    componentsToWrap.sort((a, b) => a.x - b.x)\r\n    \r\n    for (const comp of componentsToWrap) {\r\n      // 为每个需要换行的组件找到正下方的位置\r\n      const newY = findPositionBelowComponent(allComponents, comp, containerInfo, gridConfig)\r\n      \r\n      // 检查是否超出容器底部\r\n      if (newY + comp.height > containerHeight) {\r\n        return { affected: [], canResize: false } // 无法调整\r\n      }\r\n      \r\n      // 创建移动后的组件\r\n      const movedComponent = { ...comp, x: comp.x, y: newY }\r\n      componentsToMove.push(movedComponent)\r\n      \r\n      // 将移动后的组件添加到临时列表中，供后续组件计算位置时参考\r\n      allComponents.push(movedComponent)\r\n    }\r\n  }\r\n  \r\n  affected.push(...componentsToMove)\r\n  return { affected, canResize: true }\r\n}\r\n\r\n// 智能处理向下扩展高度时的碰撞\r\nfunction handleBottomExpansion(\r\n  components: ComponentItemModel[],\r\n  resizingComponent: ComponentItemModel,\r\n  newPosition: Position,\r\n  newSize: Size,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): { affected: ComponentItemModel[]; canResize: boolean } {\r\n  const affected: ComponentItemModel[] = []\r\n  const { height: containerHeight } = containerInfo\r\n  const { gap } = gridConfig\r\n\r\n  // 创建调整后的组件副本\r\n  const resizedComponent = {\r\n    ...resizingComponent,\r\n    x: newPosition.x,\r\n    y: newPosition.y,\r\n    width: newSize.width,\r\n    height: newSize.height\r\n  }\r\n\r\n  // 找到所有与调整后组件有水平重叠且在下方的组件\r\n  const bottomComponents = components.filter(comp => {\r\n    if (comp.id === resizingComponent.id) return false\r\n    \r\n    // 检查水平重叠\r\n    const horizontalOverlap = !(resizedComponent.x + resizedComponent.width <= comp.x || comp.x + comp.width <= resizedComponent.x)\r\n    \r\n    // 检查是否在下方（原始位置的下方，考虑gap）\r\n    const isBelow = comp.y >= resizingComponent.y + resizingComponent.height - gap\r\n    \r\n    return horizontalOverlap && isBelow\r\n  })\r\n\r\n  if (bottomComponents.length === 0) {\r\n    return { affected: [], canResize: true }\r\n  }\r\n\r\n  // 按Y坐标排序，从上到下处理\r\n  bottomComponents.sort((a, b) => a.y - b.y)\r\n\r\n  const newBottomEdge = resizedComponent.y + resizedComponent.height\r\n\r\n  // 检查是否会与下方组件碰撞\r\n  let needsPush = false\r\n  let pushDistance = 0\r\n\r\n  for (const comp of bottomComponents) {\r\n    const requiredDistance = newBottomEdge + gap - comp.y\r\n    if (requiredDistance > 0) {\r\n      needsPush = true\r\n      pushDistance = requiredDistance\r\n      break // 只需要检查最近的组件\r\n    }\r\n  }\r\n\r\n  if (!needsPush) {\r\n    return { affected: [], canResize: true }\r\n  }\r\n\r\n  // 需要推动下方组件\r\n  for (const comp of bottomComponents) {\r\n    const newY = comp.y + pushDistance\r\n    \r\n    // 检查是否超出容器底部\r\n    if (newY + comp.height > containerHeight) {\r\n      return { affected: [], canResize: false } // 无法调整\r\n    }\r\n    \r\n    affected.push({ ...comp, x: comp.x, y: newY })\r\n  }\r\n\r\n  return { affected, canResize: true }\r\n}\r\n\r\n// 查找组件正下方的位置\r\nfunction findPositionBelowComponent(\r\n  components: ComponentItemModel[],\r\n  component: ComponentItemModel,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): number {\r\n  const { gap } = gridConfig\r\n  \r\n  // 从组件底部开始查找\r\n  let targetY = component.y + component.height + gap\r\n  \r\n  // 找到与当前组件有水平重叠的所有组件\r\n  const overlappingComponents = components.filter(comp => {\r\n    if (comp.id === component.id) return false\r\n    \r\n    // 检查是否有水平重叠（使用组件的原始X位置）\r\n    const horizontalOverlap = !(component.x + component.width <= comp.x || comp.x + comp.width <= component.x)\r\n    \r\n    return horizontalOverlap\r\n  })\r\n  \r\n  // 按Y坐标排序\r\n  overlappingComponents.sort((a, b) => a.y - b.y)\r\n  \r\n  // 持续检查直到找到合适的位置\r\n  let foundPosition = false\r\n  while (!foundPosition) {\r\n    foundPosition = true\r\n    \r\n    // 检查在targetY位置是否与任何组件重叠\r\n    for (const comp of overlappingComponents) {\r\n      // 检查垂直重叠\r\n      const verticalOverlap = !(targetY + component.height <= comp.y || comp.y + comp.height <= targetY)\r\n      \r\n      if (verticalOverlap) {\r\n        // 有重叠，需要移到这个组件下方\r\n        targetY = comp.y + comp.height + gap\r\n        foundPosition = false\r\n        break\r\n      }\r\n    }\r\n  }\r\n  \r\n  return targetY\r\n}\r\n\r\n// 检查调整大小是否会影响其他组件，并返回需要更新的组件\r\nexport function getAffectedComponents(\r\n  components: ComponentItemModel[],\r\n  resizingComponent: ComponentItemModel,\r\n  newPosition: Position,\r\n  newSize: Size,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig,\r\n  resizeType?: string\r\n): { affected: ComponentItemModel[]; canResize: boolean } {\r\n  // 判断调整类型\r\n  const widthIncreased = newSize.width > resizingComponent.width\r\n  const heightIncreased = newSize.height > resizingComponent.height\r\n  const positionChanged = newPosition.x !== resizingComponent.x || newPosition.y !== resizingComponent.y\r\n\r\n  // 如果位置改变了（左侧或上侧调整），使用原有逻辑\r\n  if (positionChanged) {\r\n    // 检查是否与其他组件重叠\r\n    const resizedComponent = {\r\n      ...resizingComponent,\r\n      x: newPosition.x,\r\n      y: newPosition.y,\r\n      width: newSize.width,\r\n      height: newSize.height\r\n    }\r\n\r\n    for (const otherComponent of components) {\r\n      if (otherComponent.id === resizingComponent.id) continue\r\n\r\n      if (hasOverlap(\r\n        { x: resizedComponent.x, y: resizedComponent.y },\r\n        { width: resizedComponent.width, height: resizedComponent.height },\r\n        { x: otherComponent.x, y: otherComponent.y },\r\n        { width: otherComponent.width, height: otherComponent.height }\r\n      )) {\r\n        return { affected: [], canResize: false }\r\n      }\r\n    }\r\n\r\n    return { affected: [], canResize: true }\r\n  }\r\n\r\n  // 根据调整类型选择处理方式\r\n  if (widthIncreased && (resizeType === 'right' || resizeType?.includes('right'))) {\r\n    // 向右扩展宽度\r\n    return handleRightExpansion(components, resizingComponent, newPosition, newSize, containerInfo, gridConfig)\r\n  } else if (heightIncreased && (resizeType === 'bottom' || resizeType?.includes('bottom'))) {\r\n    // 向下扩展高度\r\n    return handleBottomExpansion(components, resizingComponent, newPosition, newSize, containerInfo, gridConfig)\r\n  } else {\r\n    // 其他情况，检查重叠\r\n    const resizedComponent = {\r\n      ...resizingComponent,\r\n      x: newPosition.x,\r\n      y: newPosition.y,\r\n      width: newSize.width,\r\n      height: newSize.height\r\n    }\r\n\r\n    for (const otherComponent of components) {\r\n      if (otherComponent.id === resizingComponent.id) continue\r\n\r\n      if (hasOverlap(\r\n        { x: resizedComponent.x, y: resizedComponent.y },\r\n        { width: resizedComponent.width, height: resizedComponent.height },\r\n        { x: otherComponent.x, y: otherComponent.y },\r\n        { width: otherComponent.width, height: otherComponent.height }\r\n      )) {\r\n        return { affected: [], canResize: false }\r\n      }\r\n    }\r\n\r\n    return { affected: [], canResize: true }\r\n  }\r\n}\r\n\r\n// 智能验证位置（考虑动态布局）\r\nexport function validatePositionWithLayout(\r\n  components: ComponentItemModel[],\r\n  currentId: string,\r\n  position: Position,\r\n  size: Size,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig,\r\n  resizeType?: string\r\n): { valid: boolean; affectedComponents: ComponentItemModel[] } {\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n\r\n  // 基础边界检查\r\n  if (position.x < 0 ||\r\n    position.y < 0 ||\r\n    position.x + size.width > containerWidth ||\r\n    position.y + size.height > containerHeight) {\r\n    return { valid: false, affectedComponents: [] }\r\n  }\r\n\r\n  // 获取受影响的组件\r\n  const currentComponent = components.find(c => c.id === currentId)\r\n  if (!currentComponent) {\r\n    return { valid: false, affectedComponents: [] }\r\n  }\r\n\r\n  const { affected, canResize } = getAffectedComponents(\r\n    components,\r\n    currentComponent,\r\n    position,\r\n    size,\r\n    containerInfo,\r\n    gridConfig,\r\n    resizeType\r\n  )\r\n\r\n  return { valid: canResize, affectedComponents: affected }\r\n}\r\n\r\n// 严格检查组件重叠\r\nfunction hasOverlap(\r\n  pos1: Position,\r\n  size1: Size,\r\n  pos2: Position,\r\n  size2: Size\r\n): boolean {\r\n  const overlapX = pos1.x < pos2.x + size2.width && pos1.x + size1.width > pos2.x\r\n  const overlapY = pos1.y < pos2.y + size2.height && pos1.y + size1.height > pos2.y\r\n  return overlapX && overlapY\r\n}\r\n\r\n// 智能验证拖拽位置（严格防止重叠）\r\nexport function validateDragPosition(\r\n  components: ComponentItemModel[],\r\n  currentId: string,\r\n  newPosition: Position,\r\n  containerInfo: ContainerInfo,\r\n  gridConfig: GridConfig\r\n): { valid: boolean; affectedComponents: ComponentItemModel[]; finalPosition: Position } {\r\n  const { width: containerWidth, height: containerHeight } = containerInfo\r\n\r\n  // 获取当前组件\r\n  const currentComponent = components.find(c => c.id === currentId)\r\n  if (!currentComponent) {\r\n    return { valid: false, affectedComponents: [], finalPosition: newPosition }\r\n  }\r\n\r\n  const currentSize = { width: currentComponent.width, height: currentComponent.height }\r\n\r\n  // 使用智能高度吸附，只在与上面紧邻组件距离小于等于gap时才吸附\r\n  const snappedPosition = snapToColumnGridWithSmartHeight(\r\n    newPosition,\r\n    currentSize,\r\n    components,\r\n    currentId,\r\n    containerInfo,\r\n    gridConfig\r\n  )\r\n\r\n  // 基础边界检查\r\n  if (snappedPosition.x < 0 ||\r\n    snappedPosition.y < 0 ||\r\n    snappedPosition.x + currentSize.width > containerWidth ||\r\n    snappedPosition.y + currentSize.height > containerHeight) {\r\n    return { valid: false, affectedComponents: [], finalPosition: snappedPosition }\r\n  }\r\n\r\n  // 严格检查是否与其他组件重叠\r\n  for (const otherComponent of components) {\r\n    if (otherComponent.id === currentId) continue\r\n\r\n    if (hasOverlap(\r\n      snappedPosition,\r\n      currentSize,\r\n      { x: otherComponent.x, y: otherComponent.y },\r\n      { width: otherComponent.width, height: otherComponent.height }\r\n    )) {\r\n      // 发现重叠，拒绝此位置\r\n      return { valid: false, affectedComponents: [], finalPosition: snappedPosition }\r\n    }\r\n  }\r\n\r\n  // 没有重叠，可以自由拖拽\r\n  return { valid: true, affectedComponents: [], finalPosition: snappedPosition }\r\n}","<template>\r\n  <div class=\"gridster-item\" :class=\"{ resizing: isResizing }\" :style=\"componentStyle\" draggable=\"true\"\r\n    @dragstart=\"onDragStart\" @drag=\"onDrag\" @dragend=\"onDragEnd\">\r\n\r\n    <slot></slot>\r\n\r\n    <!-- 调整手柄 -->\r\n    <div class=\"resize-overlay\">\r\n      <div class=\"edge top\" @mousedown=\"onEdgeMouseDown('top', $event)\"></div>\r\n      <div class=\"edge right\" @mousedown=\"onEdgeMouseDown('right', $event)\"></div>\r\n      <div class=\"edge bottom\" @mousedown=\"onEdgeMouseDown('bottom', $event)\"></div>\r\n      <div class=\"edge left\" @mousedown=\"onEdgeMouseDown('left', $event)\"></div>\r\n      <div class=\"corner top-left\" @mousedown=\"onCornerMouseDown('top-left', $event)\"></div>\r\n      <div class=\"corner top-right\" @mousedown=\"onCornerMouseDown('top-right', $event)\"></div>\r\n      <div class=\"corner bottom-left\" @mousedown=\"onCornerMouseDown('bottom-left', $event)\"></div>\r\n      <div class=\"corner bottom-right\" @mousedown=\"onCornerMouseDown('bottom-right', $event)\"></div>\r\n    </div>\r\n\r\n    <icon-delete :size=\"16\" class=\"remove-btn\" @click=\"$emit('remove', component.id)\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref } from 'vue';\r\nimport type { ComponentItemModel, GridConfig, Position, Size, ContainerInfo } from '../types/layout';\r\nimport { resizeComponentWithAutoFill } from '../utils/grid'\r\n\r\ninterface Props {\r\n  component: ComponentItemModel\r\n  gridConfig: GridConfig\r\n  containerInfo: ContainerInfo\r\n  allComponents?: ComponentItemModel[] // 添加所有组件列表\r\n}\r\n\r\nconst props = defineProps<Props>()\r\nconst emit = defineEmits<{\r\n  resize: [id: string, size: Size & Partial<Position> & { resizeType?: string }]\r\n  drag: [id: string, position: Position]\r\n  remove: [id: string]\r\n}>()\r\n\r\nconst isDragging = ref(false)\r\nconst isResizing = ref(false)\r\nconst currentResizeType = ref<string>('') // 'edge' or 'corner' + direction\r\nconst dragStartPosition = ref<Position>({ x: 0, y: 0 })\r\nconst dragOffset = ref<Position>({ x: 0, y: 0 })\r\n\r\n// 计算组件样式\r\nconst componentStyle = computed((): any => {\r\n  return {\r\n    position: 'absolute',\r\n    left: `${props.component.x}px`,\r\n    top: `${props.component.y}px`,\r\n    width: `${props.component.width}px`,\r\n    height: `${props.component.height}px`,\r\n    zIndex: isDragging.value || isResizing.value ? 100 : 1,\r\n    cursor: isResizing.value ? getResizeCursor(currentResizeType.value) : 'move'\r\n  }\r\n})\r\n\r\n// 获取调整时的光标样式\r\nconst getResizeCursor = (type: string) => {\r\n  const cursorMap: { [key: string]: string } = {\r\n    'top': 'n-resize',\r\n    'right': 'e-resize',\r\n    'bottom': 's-resize',\r\n    'left': 'w-resize',\r\n    'top-left': 'nw-resize',\r\n    'top-right': 'ne-resize',\r\n    'bottom-left': 'sw-resize',\r\n    'bottom-right': 'se-resize'\r\n  }\r\n  return cursorMap[type] || 'move'\r\n}\r\n\r\n// 边缘拖拽调整\r\nconst onEdgeMouseDown = (edge: string, e: MouseEvent) => {\r\n  e.preventDefault()\r\n  e.stopPropagation()\r\n\r\n  onResizeStart(edge, e)\r\n}\r\n\r\n// 角落拖拽调整\r\nconst onCornerMouseDown = (corner: string, e: MouseEvent) => {\r\n  e.preventDefault()\r\n  e.stopPropagation()\r\n\r\n  onResizeStart(corner, e)\r\n}\r\n\r\nconst onDragStart = (e: DragEvent) => {\r\n  isDragging.value = true;\r\n\r\n  e.dataTransfer?.setData('text/plain', props.component.id);\r\n  e.dataTransfer!.effectAllowed = 'move'\r\n\r\n  // 设置拖拽预览\r\n  const dragImage = e.currentTarget as HTMLElement\r\n  e.dataTransfer?.setDragImage(dragImage, 0, 0)\r\n\r\n\r\n  // 记录拖拽起始位置和鼠标偏移\r\n  const rect = dragImage.getBoundingClientRect()\r\n  dragStartPosition.value = {\r\n    x: props.component.x,\r\n    y: props.component.y\r\n  }\r\n  dragOffset.value = {\r\n    x: e.clientX - rect.left,\r\n    y: e.clientY - rect.top\r\n  }\r\n}\r\n\r\n// 添加拖拽过程中的实时位置更新\r\nconst onDrag = (e: DragEvent) => {\r\n  if (!isDragging.value) return\r\n\r\n  // 计算实时拖拽位置\r\n  const containerRect = (e.currentTarget as HTMLElement).parentElement?.getBoundingClientRect()\r\n\r\n  if (!containerRect) return\r\n\r\n  // 计算在容器内的位置\r\n  const pixelX = e.clientX - containerRect.left - dragOffset.value.x\r\n  const pixelY = e.clientY - containerRect.top - dragOffset.value.y\r\n\r\n  // 发射 drag 事件，让父组件处理位置更新\r\n  emit('drag', props.component.id, { x: pixelX, y: pixelY })\r\n}\r\n\r\n\r\nconst onDragEnd = () => {\r\n  isDragging.value = false\r\n  dragStartPosition.value = { x: 0, y: 0 }\r\n  dragOffset.value = { x: 0, y: 0 }\r\n}\r\n\r\n// 获取其他组件列表（排除当前组件）\r\nconst getOtherComponents = () => {\r\n  if (!props.allComponents) return []\r\n  return props.allComponents.filter(comp => comp.id !== props.component.id)\r\n}\r\n\r\n// 检查与左侧组件的距离\r\nconst checkLeftGap = (newX: number) => {\r\n  const otherComponents = getOtherComponents()\r\n  const gap = props.gridConfig.gap\r\n\r\n  for (const comp of otherComponents) {\r\n    // 检查是否在垂直方向有重叠\r\n    const verticalOverlap = !(props.component.y + props.component.height <= comp.y || comp.y + comp.height <= props.component.y)\r\n\r\n    if (verticalOverlap) {\r\n      // 检查是否在左侧\r\n      if (comp.x + comp.width <= props.component.x) {\r\n        const distance = newX - (comp.x + comp.width)\r\n        if (distance < gap) {\r\n          return comp.x + comp.width + gap // 返回最小允许的X坐标\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return newX // 没有冲突，返回原值\r\n}\r\n\r\n// 检查与上方组件的距离\r\nconst checkTopGap = (newY: number) => {\r\n  const otherComponents = getOtherComponents()\r\n  const gap = props.gridConfig.gap\r\n\r\n  for (const comp of otherComponents) {\r\n    // 检查是否在水平方向有重叠\r\n    const horizontalOverlap = !(props.component.x + props.component.width <= comp.x || comp.x + comp.width <= props.component.x)\r\n\r\n    if (horizontalOverlap) {\r\n      // 检查是否在上方\r\n      if (comp.y + comp.height <= props.component.y) {\r\n        const distance = newY - (comp.y + comp.height)\r\n        if (distance < gap) {\r\n          return comp.y + comp.height + gap // 返回最小允许的Y坐标\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return newY // 没有冲突，返回原值\r\n}\r\n\r\n// 调整大小（像素计算）\r\nconst onResizeStart = (type: string, e: MouseEvent) => {\r\n  e.preventDefault()\r\n  e.stopPropagation()\r\n\r\n  const startX = e.clientX\r\n  const startY = e.clientY\r\n  const startWidth = props.component.width\r\n  const startHeight = props.component.height\r\n  const startXPos = props.component.x\r\n  const startYPos = props.component.y\r\n\r\n  const containerWidth = props.containerInfo.width\r\n  const containerHeight = props.containerInfo.height\r\n\r\n  currentResizeType.value = type\r\n  isResizing.value = true\r\n\r\n  const onMouseMove = (moveEvent: MouseEvent) => {\r\n    if (moveEvent.buttons === 0) {\r\n      // 鼠标按钮释放，结束调整\r\n      onMouseUp()\r\n      return\r\n    }\r\n\r\n    const deltaX = moveEvent.clientX - startX\r\n    const deltaY = moveEvent.clientY - startY\r\n\r\n    let newWidth = startWidth\r\n    let newHeight = startHeight\r\n    let newX = startXPos\r\n    let newY = startYPos\r\n\r\n    // 根据手柄位置计算新的像素尺寸（简化逻辑，边缘调整不改变位置）\r\n    switch (type) {\r\n      case 'right':\r\n        // 右边缘：只改变宽度，从右侧扩展，左边缘保持不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth + deltaX)\r\n        // 位置不变\r\n        break\r\n\r\n      case 'left':\r\n        // 左边缘：改变宽度，从左侧变化，右边缘保持不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth - deltaX)\r\n        // 调整位置以保持右边缘不变\r\n        newX = startXPos + startWidth - newWidth\r\n        // 检查与左侧组件的gap距离\r\n        newX = checkLeftGap(newX)\r\n        // 根据调整后的X重新计算宽度\r\n        newWidth = startXPos + startWidth - newX\r\n        break\r\n\r\n      case 'bottom':\r\n        // 下边缘：只改变高度，从下侧扩展，上边缘保持不变\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight + deltaY)\r\n        // 位置不变\r\n        break\r\n\r\n      case 'top':\r\n        // 上边缘：改变高度，从上侧变化，下边缘保持不变\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight - deltaY)\r\n        // 调整位置以保持下边缘不变\r\n        newY = startYPos + startHeight - newHeight\r\n        // 检查与上方组件的gap距离\r\n        newY = checkTopGap(newY)\r\n        // 根据调整后的Y重新计算高度\r\n        newHeight = startYPos + startHeight - newY\r\n        break\r\n\r\n      case 'top-right':\r\n        // 右上角：左侧和底部不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth + deltaX)\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight - deltaY)\r\n        // 调整Y位置以保持底部不变\r\n        newY = startYPos + startHeight - newHeight\r\n        // 检查与上方组件的gap距离\r\n        newY = checkTopGap(newY)\r\n        // 根据调整后的Y重新计算高度\r\n        newHeight = startYPos + startHeight - newY\r\n        // X位置不变（左侧不变）\r\n        break\r\n\r\n      case 'top-left':\r\n        // 左上角：右侧和底部不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth - deltaX)\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight - deltaY)\r\n        // 调整位置以保持右侧和底部不变\r\n        newX = startXPos + startWidth - newWidth\r\n        newY = startYPos + startHeight - newHeight\r\n        // 检查与左侧和上方组件的gap距离\r\n        newX = checkLeftGap(newX)\r\n        newY = checkTopGap(newY)\r\n        // 根据调整后的位置重新计算尺寸\r\n        newWidth = startXPos + startWidth - newX\r\n        newHeight = startYPos + startHeight - newY\r\n        break\r\n\r\n      case 'bottom-left':\r\n        // 左下角：右侧和上侧不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth - deltaX)\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight + deltaY)\r\n        // 调整X位置以保持右侧不变\r\n        newX = startXPos + startWidth - newWidth\r\n        // 检查与左侧组件的gap距离\r\n        newX = checkLeftGap(newX)\r\n        // 根据调整后的X重新计算宽度\r\n        newWidth = startXPos + startWidth - newX\r\n        // Y位置不变（上侧不变）\r\n        break\r\n\r\n      case 'bottom-right':\r\n        // 右下角：左侧和上侧不变\r\n        newWidth = Math.max(props.component.minWidth || 100, startWidth + deltaX)\r\n        newHeight = Math.max(props.component.minHeight || 60, startHeight + deltaY)\r\n        // 位置不变（左侧和上侧不变）\r\n        break\r\n    }\r\n\r\n    // 边界检查：确保组件不超出容器\r\n    // 确保位置不为负数\r\n    newX = Math.max(0, newX)\r\n    newY = Math.max(0, newY)\r\n\r\n    // 确保组件不超出容器右边界和下边界\r\n    if (newX + newWidth > containerWidth) {\r\n      if (type.includes('left')) {\r\n        // 如果是从左侧调整，调整位置而不是宽度\r\n        newX = containerWidth - newWidth\r\n        newX = Math.max(0, newX)\r\n      } else {\r\n        // 如果是从右侧调整，调整宽度\r\n        newWidth = containerWidth - newX\r\n      }\r\n    }\r\n\r\n    if (newY + newHeight > containerHeight) {\r\n      if (type.includes('top')) {\r\n        // 如果是从上侧调整，调整位置而不是高度\r\n        newY = containerHeight - newHeight\r\n        newY = Math.max(0, newY)\r\n      } else {\r\n        // 如果是从下侧调整，调整高度\r\n        newHeight = containerHeight - newY\r\n      }\r\n    }\r\n\r\n    // 确保最小尺寸\r\n    newWidth = Math.max(props.component.minWidth || 100, newWidth)\r\n    newHeight = Math.max(props.component.minHeight || 60, newHeight)\r\n\r\n    // 根据调整类型决定是否应用自动填充\r\n    let filledSize = { width: newWidth, height: newHeight }\r\n\r\n    // 只有在调整宽度相关的操作时才进行栅格填充\r\n    const isWidthResize = ['left', 'right', 'top-left', 'top-right', 'bottom-left', 'bottom-right'].includes(type)\r\n\r\n    if (isWidthResize) {\r\n      // 应用自动填充（只对宽度）\r\n      filledSize = resizeComponentWithAutoFill(\r\n        props.component,\r\n        { width: newWidth, height: newHeight },\r\n        props.gridConfig\r\n      )\r\n    }\r\n\r\n    // 填充后的边界检查\r\n    if (newX + filledSize.width > containerWidth) {\r\n      filledSize.width = containerWidth - newX\r\n    }\r\n\r\n    // 高度边界检查（填充不会改变高度）\r\n    if (newY + filledSize.height > containerHeight) {\r\n      filledSize.height = containerHeight - newY\r\n    }\r\n\r\n    // 确保最终尺寸不小于最小值\r\n    filledSize.width = Math.max(props.component.minWidth || 100, filledSize.width)\r\n    filledSize.height = Math.max(props.component.minHeight || 60, filledSize.height)\r\n\r\n    // 发射 resize 事件\r\n    emit('resize', props.component.id, {\r\n      width: parseFloat(filledSize.width.toFixed(2)),\r\n      height: parseFloat(filledSize.height.toFixed(2)),\r\n      x: parseFloat(newX.toFixed(2)),\r\n      y: parseFloat(newY.toFixed(2)),\r\n      resizeType: type\r\n    })\r\n  }\r\n\r\n  const onMouseUp = () => {\r\n    document.removeEventListener('mousemove', onMouseMove)\r\n    document.removeEventListener('mouseup', onMouseUp)\r\n    document.removeEventListener('mouseleave', onMouseUp) // 添加鼠标离开监听\r\n    isResizing.value = false\r\n    currentResizeType.value = ''\r\n  }\r\n\r\n  document.addEventListener('mousemove', onMouseMove)\r\n  document.addEventListener('mouseup', onMouseUp)\r\n  document.addEventListener('mouseleave', onMouseUp) // 鼠标离开窗口时也结束\r\n  isResizing.value = true\r\n  currentResizeType.value = ''\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.gridster-item {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  position: relative;\r\n  cursor: move;\r\n  transition: all 0.2s ease;\r\n  min-height: 0;\r\n  /* 允许收缩 */\r\n  min-width: 0;\r\n  /* 允许收缩 */\r\n\r\n  &:hover {\r\n    border-color: #007bff;\r\n    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.15);\r\n  }\r\n\r\n  &:active {\r\n    transform: scale(0.98);\r\n  }\r\n\r\n  .remove-btn {\r\n    position: absolute;\r\n    top: 2px;\r\n    right: 2px;\r\n    opacity: 0;\r\n    transition: opacity 0.2s;\r\n    cursor: pointer;\r\n    color: red;\r\n  }\r\n}\r\n\r\n.resize-overlay {\r\n  position: absolute;\r\n  top: -6px;\r\n  left: -6px;\r\n  right: -6px;\r\n  bottom: -6px;\r\n  pointer-events: none;\r\n}\r\n\r\n.gridster-item:hover .resize-overlay {\r\n  pointer-events: auto;\r\n}\r\n\r\n\r\n.edge {\r\n  position: absolute;\r\n  background: transparent;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n}\r\n\r\n.edge:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.edge.top {\r\n  top: 0;\r\n  left: 6px;\r\n  right: 6px;\r\n  height: 6px;\r\n  cursor: n-resize;\r\n}\r\n\r\n.edge.right {\r\n  top: 6px;\r\n  right: 0;\r\n  bottom: 6px;\r\n  width: 6px;\r\n  cursor: e-resize;\r\n}\r\n\r\n.edge.bottom {\r\n  bottom: 0;\r\n  left: 6px;\r\n  right: 6px;\r\n  height: 6px;\r\n  cursor: s-resize;\r\n}\r\n\r\n.edge.left {\r\n  top: 6px;\r\n  left: 0;\r\n  bottom: 6px;\r\n  width: 6px;\r\n  cursor: w-resize;\r\n}\r\n\r\n.corner {\r\n  position: absolute;\r\n  background: transparent;\r\n  width: 12px;\r\n  height: 12px;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n}\r\n\r\n.corner:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.corner.top-left {\r\n  top: 0;\r\n  left: 0;\r\n  cursor: nw-resize;\r\n}\r\n\r\n.corner.top-right {\r\n  top: 0;\r\n  right: 0;\r\n  cursor: ne-resize;\r\n}\r\n\r\n.corner.bottom-left {\r\n  bottom: 0;\r\n  left: 0;\r\n  cursor: sw-resize;\r\n}\r\n\r\n.corner.bottom-right {\r\n  bottom: 0;\r\n  right: 0;\r\n  cursor: se-resize;\r\n}\r\n\r\n.gridster-item:hover .remove-btn {\r\n  opacity: 1;\r\n}\r\n</style>","<template>\r\n  <a-modal \r\n    v-model:visible=\"visible\" \r\n    title=\"添加组件 \"\r\n    width=\"1000px\"\r\n    @ok=\"handleOk\" \r\n    @cancel=\"close\"\r\n  >\r\n    <div class=\"add-container\">\r\n      <a-alert>已选择：{{ selectedComponents .length }}</a-alert>\r\n      <div class=\"component-library\">\r\n        <div class=\"search-section\">\r\n          <a-input\r\n            v-model=\"searchQuery\"\r\n            type=\"text\"\r\n            placeholder=\"搜索组件...\"\r\n            class=\"search-input\"\r\n          />\r\n        </div>\r\n        \r\n        <a-scrollbar style=\"height: 500px;overflow: auto;\">\r\n          <div class=\"components-grid\">\r\n            <div\r\n              v-for=\"component in filteredComponents\"\r\n              :key=\"component.type\"\r\n              class=\"component-card\"\r\n              :class=\"{\r\n                'selected': isSelected(component),\r\n              }\"\r\n              @click=\"onComponentClick(component)\"\r\n            >\r\n              <slot name=\"component\" :component=\"component\"></slot>\r\n              <div class=\"selection-indicator\" v-if=\"isSelected(component)\">\r\n                ✓\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </a-scrollbar>\r\n        <div class=\"empty-state\" v-if=\"filteredComponents.length === 0\">\r\n          未找到匹配的组件\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed } from 'vue';\r\nimport type { ComponentItemModel } from '../types/layout';\r\n\r\ninterface Props {\r\n  componentLibrary: ComponentItemModel[]\r\n}\r\nconst props = defineProps<Props>()\r\nconst visible = ref(false)\r\nconst selectedComponents  = ref<ComponentItemModel[]>([])\r\n\r\ninterface Emits {\r\n  (e: 'confirm', components: ComponentItemModel[]): void\r\n  (e: 'cancel'): void\r\n}\r\n\r\nconst emit = defineEmits<Emits>()\r\n\r\nconst onComponentSelect = (component: ComponentItemModel) => {\r\n  const index = selectedComponents.value.findIndex(\r\n    item => item.type === component.type\r\n  )\r\n  \r\n  if (index > -1) {\r\n    // 如果已存在，则移除\r\n    selectedComponents.value.splice(index, 1)\r\n  } else {\r\n    // 如果不存在，则添加\r\n    selectedComponents.value.push(component)\r\n  }\r\n}\r\n\r\nconst searchQuery = ref('')\r\n\r\n// 过滤组件列表\r\nconst filteredComponents = computed(() => {\r\n  if (!searchQuery.value) {\r\n    return props.componentLibrary\r\n  }\r\n  \r\n  const query = searchQuery.value.toLowerCase()\r\n  return props.componentLibrary.filter(component =>\r\n    component.name.toLowerCase().includes(query) ||\r\n    component.type.toLowerCase().includes(query)\r\n  )\r\n})\r\n\r\n// 检查组件是否被选中\r\nconst isSelected = (component: ComponentItemModel) => {\r\n  return selectedComponents.value.some(\r\n    selected => selected.type === component.type\r\n  )\r\n}\r\n\r\nconst onComponentClick = (component: ComponentItemModel) => {\r\n    // 创建组件副本，确保每次添加都是新的实例\r\n    const componentCopy: ComponentItemModel = {\r\n    ...component,\r\n    id: `${component.type}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n    x: 0,\r\n    y: 0\r\n  }\r\n  onComponentSelect(componentCopy)\r\n}\r\n\r\nconst handleOk = () => {\r\n  if (selectedComponents.value.length > 0) {\r\n    close()\r\n    emit('confirm', selectedComponents.value)\r\n    // 重置选择状态\r\n    selectedComponents.value = []\r\n  }\r\n}\r\n\r\nconst close = () => {\r\n  visible.value = false\r\n}\r\n\r\nconst open = () => {\r\n  visible.value = true\r\n}\r\n\r\ndefineExpose({\r\n  open,\r\n  close\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-container {\r\n\r\n  :deep(.arco-alert) {\r\n    margin: 10px 0;\r\n  }\r\n\r\n  .component-list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 20px;\r\n\r\n    .component-item {\r\n      flex: 1;\r\n    }\r\n  }\r\n}\r\n\r\n.component-library {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.search-section {\r\n  padding: 16px 0;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.components-grid {\r\n  flex: 1;\r\n  padding: 16px 0;\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\r\n  gap: 16px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.component-card {\r\n  border: 2px solid #e8e8e8;\r\n  border-radius: 8px;\r\n  padding: 12px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  position: relative;\r\n  background: white;\r\n}\r\n\r\n.component-card:hover {\r\n  border-color: #007bff;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.component-card.selected {\r\n  border-color: #007bff;\r\n  background: #f0f8ff;\r\n}\r\n\r\n.component-card.disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.component-card.disabled:hover {\r\n  border-color: #e8e8e8;\r\n  transform: none;\r\n  box-shadow: none;\r\n}\r\n\r\n\r\n\r\n.selection-indicator {\r\n  position: absolute;\r\n  top: 8px;\r\n  right: 8px;\r\n  width: 20px;\r\n  height: 20px;\r\n  background: #007bff;\r\n  color: white;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 12px;\r\n}\r\n\r\n.disabled-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 6px;\r\n  font-size: 12px;\r\n  color: #ff4444;\r\n  font-weight: 500;\r\n}\r\n\r\n.empty-state {\r\n  padding: 40px 24px;\r\n  text-align: center;\r\n  color: #999;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 滚动条样式 */\r\n.components-grid::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.components-grid::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.components-grid::-webkit-scrollbar-thumb {\r\n  background: #c1c1c1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.components-grid::-webkit-scrollbar-thumb:hover {\r\n  background: #a8a8a8;\r\n}\r\n</style>","const opt = Object.prototype.toString;\nfunction isArray(obj) {\n  return opt.call(obj) === \"[object Array]\";\n}\nfunction isNull(obj) {\n  return opt.call(obj) === \"[object Null]\";\n}\nfunction isBoolean(obj) {\n  return opt.call(obj) === \"[object Boolean]\";\n}\nfunction isObject(obj) {\n  return opt.call(obj) === \"[object Object]\";\n}\nconst isPromise = (obj) => {\n  return opt.call(obj) === \"[object Promise]\";\n};\nfunction isString(obj) {\n  return opt.call(obj) === \"[object String]\";\n}\nfunction isNumber(obj) {\n  return opt.call(obj) === \"[object Number]\" && obj === obj;\n}\nfunction isUndefined(obj) {\n  return obj === void 0;\n}\nfunction isFunction(obj) {\n  return typeof obj === \"function\";\n}\nfunction isEmptyObject(obj) {\n  return isObject(obj) && Object.keys(obj).length === 0;\n}\nfunction isExist(obj) {\n  return obj || obj === 0;\n}\nfunction isWindow(el) {\n  return el === window;\n}\nconst isComponentInstance = (value) => {\n  return (value == null ? void 0 : value.$) !== void 0;\n};\nconst isQuarter = (fromat) => {\n  return /\\[Q]Q/.test(fromat);\n};\nfunction isDayjs(time) {\n  return isObject(time) && \"$y\" in time && \"$M\" in time && \"$D\" in time && \"$d\" in time && \"$H\" in time && \"$m\" in time && \"$s\" in time;\n}\nexport { isArray, isBoolean, isComponentInstance, isDayjs, isEmptyObject, isExist, isFunction, isNull, isNumber, isObject, isPromise, isQuarter, isString, isUndefined, isWindow };\n","const configProviderInjectionKey = Symbol(\"ArcoConfigProvider\");\nexport { configProviderInjectionKey };\n","import { getCurrentInstance, inject } from \"vue\";\nimport { configProviderInjectionKey } from \"../config-provider/context.js\";\nconst COMPONENT_PREFIX = \"A\";\nconst CLASS_PREFIX = \"arco\";\nconst GLOBAL_CONFIG_NAME = \"$arco\";\nconst getComponentPrefix = (options) => {\n  var _a;\n  return (_a = options == null ? void 0 : options.componentPrefix) != null ? _a : COMPONENT_PREFIX;\n};\nconst setGlobalConfig = (app, options) => {\n  var _a;\n  if (options && options.classPrefix) {\n    app.config.globalProperties[GLOBAL_CONFIG_NAME] = {\n      ...(_a = app.config.globalProperties[GLOBAL_CONFIG_NAME]) != null ? _a : {},\n      classPrefix: options.classPrefix\n    };\n  }\n};\nconst getPrefixCls = (componentName) => {\n  var _a, _b, _c;\n  const instance = getCurrentInstance();\n  const configProvider = inject(configProviderInjectionKey, void 0);\n  const prefix = (_c = (_b = configProvider == null ? void 0 : configProvider.prefixCls) != null ? _b : (_a = instance == null ? void 0 : instance.appContext.config.globalProperties[GLOBAL_CONFIG_NAME]) == null ? void 0 : _a.classPrefix) != null ? _c : CLASS_PREFIX;\n  if (componentName) {\n    return `${prefix}-${componentName}`;\n  }\n  return prefix;\n};\nexport { getComponentPrefix, getPrefixCls, setGlobalConfig };\n","import { cloneVNode, isVNode, Fragment } from \"vue\";\nimport { isArray, isFunction, isString } from \"./is.js\";\nconst isElement = (vn) => {\n  return Boolean(vn && vn.shapeFlag & 1);\n};\nconst isComponent = (vn, type) => {\n  return Boolean(vn && vn.shapeFlag & 6);\n};\nconst isTextChildren = (child, children) => {\n  return Boolean(child && child.shapeFlag & 8);\n};\nconst isArrayChildren = (vn, children) => {\n  return Boolean(vn && vn.shapeFlag & 16);\n};\nconst isSlotsChildren = (vn, children) => {\n  return Boolean(vn && vn.shapeFlag & 32);\n};\nconst getFirstComponent = (children) => {\n  var _a, _b;\n  if (!children) {\n    return void 0;\n  }\n  for (const child of children) {\n    if (isElement(child) || isComponent(child)) {\n      return child;\n    }\n    if (isArrayChildren(child, child.children)) {\n      const result = getFirstComponent(child.children);\n      if (result)\n        return result;\n    } else if (isSlotsChildren(child, child.children)) {\n      const children2 = (_b = (_a = child.children).default) == null ? void 0 : _b.call(_a);\n      if (children2) {\n        const result = getFirstComponent(children2);\n        if (result)\n          return result;\n      }\n    } else if (isArray(child)) {\n      const result = getFirstComponent(child);\n      if (result)\n        return result;\n    }\n  }\n  return void 0;\n};\nconst isEmptyChildren = (children) => {\n  if (!children) {\n    return true;\n  }\n  for (const item of children) {\n    if (item.children) {\n      return false;\n    }\n  }\n  return true;\n};\nconst mergeFirstChild = (children, extraProps) => {\n  if (children && children.length > 0) {\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (isElement(child) || isComponent(child)) {\n        const props = isFunction(extraProps) ? extraProps(child) : extraProps;\n        children[i] = cloneVNode(child, props, true);\n        return true;\n      }\n      const _children = getChildrenArray(child);\n      if (_children && _children.length > 0) {\n        const result = mergeFirstChild(_children, extraProps);\n        if (result)\n          return true;\n      }\n    }\n  }\n  return false;\n};\nconst getChildrenArray = (vn) => {\n  if (isArrayChildren(vn, vn.children)) {\n    return vn.children;\n  }\n  if (isArray(vn)) {\n    return vn;\n  }\n  return void 0;\n};\nconst getFirstElementFromVNode = (vn) => {\n  var _a, _b;\n  if (isElement(vn)) {\n    return vn.el;\n  }\n  if (isComponent(vn)) {\n    if (((_a = vn.el) == null ? void 0 : _a.nodeType) === 1) {\n      return vn.el;\n    }\n    if ((_b = vn.component) == null ? void 0 : _b.subTree) {\n      const ele = getFirstElementFromVNode(vn.component.subTree);\n      if (ele)\n        return ele;\n    }\n  } else {\n    const children = getChildrenArray(vn);\n    return getFirstElementFromChildren(children);\n  }\n  return void 0;\n};\nconst getFirstElementFromChildren = (children) => {\n  if (children && children.length > 0) {\n    for (const child of children) {\n      const element = getFirstElementFromVNode(child);\n      if (element)\n        return element;\n    }\n  }\n  return void 0;\n};\nconst getAllElements = (children, includeText = false) => {\n  var _a, _b;\n  const results = [];\n  for (const item of children != null ? children : []) {\n    if (isElement(item) || isComponent(item) || includeText && isTextChildren(item, item.children)) {\n      results.push(item);\n    } else if (isArrayChildren(item, item.children)) {\n      results.push(...getAllElements(item.children, includeText));\n    } else if (isSlotsChildren(item, item.children)) {\n      results.push(...getAllElements((_b = (_a = item.children).default) == null ? void 0 : _b.call(_a), includeText));\n    } else if (isArray(item)) {\n      results.push(...getAllElements(item, includeText));\n    }\n  }\n  return results;\n};\nfunction unFragment(nodeList) {\n  function loop(nodes) {\n    const unFragmentNodeList = [];\n    nodes.forEach((node) => {\n      var _a, _b;\n      if (isVNode(node) && node.type === Fragment) {\n        if (isSlotsChildren(node, node.children)) {\n          unFragmentNodeList.push(...loop(((_b = (_a = node.children).default) == null ? void 0 : _b.call(_a)) || []));\n        } else if (isArrayChildren(node, node.children)) {\n          unFragmentNodeList.push(...loop(node.children));\n        } else if (isString(node.children)) {\n          unFragmentNodeList.push(node.children);\n        }\n      } else {\n        unFragmentNodeList.push(node);\n      }\n    });\n    return unFragmentNodeList;\n  }\n  return loop(nodeList);\n}\nconst getSlotFunction = (param) => {\n  if (param) {\n    if (isFunction(param))\n      return param;\n    return () => param;\n  }\n  return void 0;\n};\nconst getComponentsFromVNode = (vn, name) => {\n  var _a;\n  const components = [];\n  if (isComponent(vn, vn.type)) {\n    if (vn.type.name === name) {\n      if (vn.component) {\n        components.push(vn.component.uid);\n      }\n    } else if ((_a = vn.component) == null ? void 0 : _a.subTree) {\n      components.push(...getComponentsFromVNode(vn.component.subTree, name));\n    }\n  } else {\n    const children = getChildrenArray(vn);\n    if (children) {\n      components.push(...getComponentsFromChildren(children, name));\n    }\n  }\n  return components;\n};\nconst getComponentsFromChildren = (children, name) => {\n  const components = [];\n  if (children && children.length > 0) {\n    for (const child of children) {\n      components.push(...getComponentsFromVNode(child, name));\n    }\n  }\n  return components;\n};\nexport { getAllElements, getChildrenArray, getComponentsFromChildren, getComponentsFromVNode, getFirstComponent, getFirstElementFromChildren, getFirstElementFromVNode, getSlotFunction, isArrayChildren, isComponent, isElement, isEmptyChildren, isSlotsChildren, isTextChildren, mergeFirstChild, unFragment };\n","import { isString } from \"./is.js\";\nconst NOOP = () => {\n  return void 0;\n};\nconst getDocumentSize = () => {\n  const { body } = document;\n  const html = document.documentElement;\n  let topBody;\n  try {\n    const topWindow = window.top || window.self || window;\n    topBody = topWindow.document.body;\n  } catch {\n  }\n  return {\n    height: Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight,\n      (topBody == null ? void 0 : topBody.scrollHeight) || 0,\n      (topBody == null ? void 0 : topBody.clientHeight) || 0\n    ),\n    width: Math.max(\n      body.scrollWidth,\n      body.offsetWidth,\n      html.clientWidth,\n      html.scrollWidth,\n      html.offsetWidth,\n      (topBody == null ? void 0 : topBody.scrollWidth) || 0,\n      (topBody == null ? void 0 : topBody.clientWidth) || 0\n    )\n  };\n};\nconst isServerRendering = (() => {\n  try {\n    return !(typeof window !== \"undefined\" && document !== void 0);\n  } catch (e) {\n    return true;\n  }\n})();\nconst on = (() => {\n  if (isServerRendering) {\n    return NOOP;\n  }\n  return (element, event, handler, options = false) => {\n    element.addEventListener(\n      event,\n      handler,\n      options\n    );\n  };\n})();\nconst off = (() => {\n  if (isServerRendering) {\n    return NOOP;\n  }\n  return (element, type, handler, options = false) => {\n    element.removeEventListener(\n      type,\n      handler,\n      options\n    );\n  };\n})();\nconst contains = (root, ele) => {\n  if (!root || !ele) {\n    return false;\n  }\n  let node = ele;\n  while (node) {\n    if (node === root) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n  return false;\n};\nconst getOverlay = (type) => {\n  const popper = document.createElement(\"div\");\n  popper.setAttribute(\"class\", `arco-overlay arco-overlay-${type}`);\n  return popper;\n};\nconst querySelector = (selectors, container) => {\n  var _a;\n  if (isServerRendering) {\n    return NOOP();\n  }\n  return (_a = (container != null ? container : document).querySelector(selectors)) != null ? _a : void 0;\n};\nconst getElement = (target, container) => {\n  if (isString(target)) {\n    const selector = target[0] === \"#\" ? `[id='${target.slice(1)}']` : target;\n    return querySelector(selector, container);\n  }\n  return target;\n};\nconst getRelativeRect = (target, relative) => {\n  const targetRect = target.getBoundingClientRect();\n  const relativeRect = relative.getBoundingClientRect();\n  return {\n    top: targetRect.top - relativeRect.top,\n    bottom: relativeRect.bottom - targetRect.bottom,\n    left: targetRect.left - relativeRect.left,\n    right: relativeRect.right - targetRect.right,\n    width: targetRect.width,\n    height: targetRect.height\n  };\n};\nconst isScroll = (element) => {\n  return element.tagName === \"BODY\" ? document.documentElement.scrollHeight > window.innerHeight : element.scrollHeight > element.offsetHeight;\n};\nconst getScrollBarWidth = (element) => {\n  return element.tagName === \"BODY\" ? window.innerWidth - getDocumentSize().width : element.offsetWidth - element.clientWidth;\n};\nexport { NOOP, contains, getDocumentSize, getElement, getOverlay, getRelativeRect, getScrollBarWidth, isScroll, isServerRendering, off, on, querySelector };\n","var _export_sfc = (sfc, props) => {\n  for (const [key, val] of props) {\n    sfc[key] = val;\n  }\n  return sfc;\n};\nexport { _export_sfc as default };\n","import { defineComponent, openBlock, createElementBlock, normalizeClass, renderSlot } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport _export_sfc from \"../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconHover\",\n  props: {\n    prefix: {\n      type: String\n    },\n    size: {\n      type: String,\n      default: \"medium\"\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup() {\n    const prefixCls = getPrefixCls(\"icon-hover\");\n    return {\n      prefixCls\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"span\", {\n    class: normalizeClass([\n      _ctx.prefixCls,\n      {\n        [`${_ctx.prefix}-icon-hover`]: _ctx.prefix,\n        [`${_ctx.prefixCls}-size-${_ctx.size}`]: _ctx.size !== \"medium\",\n        [`${_ctx.prefixCls}-disabled`]: _ctx.disabled\n      }\n    ])\n  }, [\n    renderSlot(_ctx.$slots, \"default\")\n  ], 2);\n}\nvar IconHover = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { IconHover as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconClose\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-close`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", { d: \"M9.857 9.858 24 24m0 0 14.142 14.142M24 24 38.142 9.858M24 24 9.857 38.142\" }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconClose = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconClose as default };\n","import _IconClose from \"./icon-close.js\";\nconst IconClose = Object.assign(_IconClose, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconClose.name, _IconClose);\n  }\n});\nexport { IconClose as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconInfoCircleFill\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-info-circle-fill`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      \"clip-rule\": \"evenodd\",\n      d: \"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z\",\n      fill: \"currentColor\",\n      stroke: \"none\"\n    }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconInfoCircleFill = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconInfoCircleFill as default };\n","import _IconInfoCircleFill from \"./icon-info-circle-fill.js\";\nconst IconInfoCircleFill = Object.assign(_IconInfoCircleFill, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconInfoCircleFill.name, _IconInfoCircleFill);\n  }\n});\nexport { IconInfoCircleFill as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconCheckCircleFill\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-check-circle-fill`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      \"clip-rule\": \"evenodd\",\n      d: \"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm10.207-24.379a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0L22 26.172l-4.878-4.88a1 1 0 0 0-1.415 0l-1.414 1.415a1 1 0 0 0 0 1.414l7 7a1 1 0 0 0 1.414 0l11.5-11.5Z\",\n      fill: \"currentColor\",\n      stroke: \"none\"\n    }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconCheckCircleFill = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconCheckCircleFill as default };\n","import _IconCheckCircleFill from \"./icon-check-circle-fill.js\";\nconst IconCheckCircleFill = Object.assign(_IconCheckCircleFill, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconCheckCircleFill.name, _IconCheckCircleFill);\n  }\n});\nexport { IconCheckCircleFill as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconExclamationCircleFill\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-exclamation-circle-fill`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      \"clip-rule\": \"evenodd\",\n      d: \"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm-2-11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2Zm4-18a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V15Z\",\n      fill: \"currentColor\",\n      stroke: \"none\"\n    }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconExclamationCircleFill = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconExclamationCircleFill as default };\n","import _IconExclamationCircleFill from \"./icon-exclamation-circle-fill.js\";\nconst IconExclamationCircleFill = Object.assign(_IconExclamationCircleFill, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconExclamationCircleFill.name, _IconExclamationCircleFill);\n  }\n});\nexport { IconExclamationCircleFill as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconCloseCircleFill\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-close-circle-fill`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      \"clip-rule\": \"evenodd\",\n      d: \"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm4.955-27.771-4.95 4.95-4.95-4.95a1 1 0 0 0-1.414 0l-1.414 1.414a1 1 0 0 0 0 1.414l4.95 4.95-4.95 4.95a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-4.95-4.95 4.95-4.95a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0Z\",\n      fill: \"currentColor\",\n      stroke: \"none\"\n    }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconCloseCircleFill = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconCloseCircleFill as default };\n","import _IconCloseCircleFill from \"./icon-close-circle-fill.js\";\nconst IconCloseCircleFill = Object.assign(_IconCloseCircleFill, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconCloseCircleFill.name, _IconCloseCircleFill);\n  }\n});\nexport { IconCloseCircleFill as default };\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, normalizeStyle, createElementVNode } from \"vue\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nimport _export_sfc from \"../../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"IconLoading\",\n  props: {\n    size: {\n      type: [Number, String]\n    },\n    strokeWidth: {\n      type: Number,\n      default: 4\n    },\n    strokeLinecap: {\n      type: String,\n      default: \"butt\",\n      validator: (value) => {\n        return [\"butt\", \"round\", \"square\"].includes(value);\n      }\n    },\n    strokeLinejoin: {\n      type: String,\n      default: \"miter\",\n      validator: (value) => {\n        return [\"arcs\", \"bevel\", \"miter\", \"miter-clip\", \"round\"].includes(value);\n      }\n    },\n    rotate: Number,\n    spin: Boolean\n  },\n  emits: {\n    click: (ev) => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"icon\");\n    const cls = computed(() => [prefixCls, `${prefixCls}-loading`, { [`${prefixCls}-spin`]: props.spin }]);\n    const innerStyle = computed(() => {\n      const styles = {};\n      if (props.size) {\n        styles.fontSize = isNumber(props.size) ? `${props.size}px` : props.size;\n      }\n      if (props.rotate) {\n        styles.transform = `rotate(${props.rotate}deg)`;\n      }\n      return styles;\n    });\n    const onClick = (ev) => {\n      emit(\"click\", ev);\n    };\n    return {\n      cls,\n      innerStyle,\n      onClick\n    };\n  }\n});\nconst _hoisted_1 = [\"stroke-width\", \"stroke-linecap\", \"stroke-linejoin\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", {\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"currentColor\",\n    class: normalizeClass(_ctx.cls),\n    style: normalizeStyle(_ctx.innerStyle),\n    \"stroke-width\": _ctx.strokeWidth,\n    \"stroke-linecap\": _ctx.strokeLinecap,\n    \"stroke-linejoin\": _ctx.strokeLinejoin,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, _cache[1] || (_cache[1] = [\n    createElementVNode(\"path\", { d: \"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6\" }, null, -1)\n  ]), 14, _hoisted_1);\n}\nvar _IconLoading = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _IconLoading as default };\n","import _IconLoading from \"./icon-loading.js\";\nconst IconLoading = Object.assign(_IconLoading, {\n  install: (app, options) => {\n    var _a;\n    const iconPrefix = (_a = options == null ? void 0 : options.iconPrefix) != null ? _a : \"\";\n    app.component(iconPrefix + _IconLoading.name, _IconLoading);\n  }\n});\nexport { IconLoading as default };\n","import { ref, watch, onMounted, onBeforeUnmount, readonly } from \"vue\";\nconst POPUP_BASE_Z_INDEX = 1e3;\nconst MESSAGE_BASE_Z_INDEX = 5e3;\nconst Z_INDEX_STEP = 1;\nclass PopupManager {\n  constructor() {\n    this.popupStack = {\n      popup: /* @__PURE__ */ new Set(),\n      dialog: /* @__PURE__ */ new Set(),\n      message: /* @__PURE__ */ new Set()\n    };\n    this.getNextZIndex = (type) => {\n      const current = type === \"message\" ? Array.from(this.popupStack.message).pop() || MESSAGE_BASE_Z_INDEX : Array.from(this.popupStack.popup).pop() || POPUP_BASE_Z_INDEX;\n      return current + Z_INDEX_STEP;\n    };\n    this.add = (type) => {\n      const zIndex = this.getNextZIndex(type);\n      this.popupStack[type].add(zIndex);\n      if (type === \"dialog\") {\n        this.popupStack.popup.add(zIndex);\n      }\n      return zIndex;\n    };\n    this.delete = (zIndex, type) => {\n      this.popupStack[type].delete(zIndex);\n      if (type === \"dialog\") {\n        this.popupStack.popup.delete(zIndex);\n      }\n    };\n    this.isLastDialog = (zIndex) => {\n      if (this.popupStack.dialog.size > 1) {\n        return zIndex === Array.from(this.popupStack.dialog).pop();\n      }\n      return true;\n    };\n  }\n}\nconst popupManager = new PopupManager();\nfunction usePopupManager(type, {\n  visible,\n  runOnMounted\n} = {}) {\n  const zIndex = ref(0);\n  const open = () => {\n    zIndex.value = popupManager.add(type);\n  };\n  const close = () => {\n    popupManager.delete(zIndex.value, type);\n  };\n  const isLastDialog = () => {\n    if (type === \"dialog\") {\n      return popupManager.isLastDialog(zIndex.value);\n    }\n    return false;\n  };\n  watch(\n    () => visible == null ? void 0 : visible.value,\n    (visible2) => {\n      if (visible2) {\n        open();\n      } else {\n        close();\n      }\n    },\n    {\n      immediate: true\n    }\n  );\n  if (runOnMounted) {\n    onMounted(() => {\n      open();\n    });\n    onBeforeUnmount(() => {\n      close();\n    });\n  }\n  return {\n    zIndex: readonly(zIndex),\n    open,\n    close,\n    isLastDialog\n  };\n}\nexport { usePopupManager as default };\n","import { defineComponent, onMounted, onUpdated, onUnmounted, resolveComponent, openBlock, createElementBlock, normalizeClass, renderSlot, createBlock, createCommentVNode, createElementVNode, createVNode, withCtx } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport IconHover from \"../_components/icon-hover.js\";\nimport IconClose from \"../icon/icon-close/index.js\";\nimport IconInfoCircleFill from \"../icon/icon-info-circle-fill/index.js\";\nimport IconCheckCircleFill from \"../icon/icon-check-circle-fill/index.js\";\nimport IconExclamationCircleFill from \"../icon/icon-exclamation-circle-fill/index.js\";\nimport IconCloseCircleFill from \"../icon/icon-close-circle-fill/index.js\";\nimport IconLoading from \"../icon/icon-loading/index.js\";\nimport _export_sfc from \"../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"Message\",\n  components: {\n    AIconHover: IconHover,\n    IconInfoCircleFill,\n    IconCheckCircleFill,\n    IconExclamationCircleFill,\n    IconCloseCircleFill,\n    IconClose,\n    IconLoading\n  },\n  props: {\n    type: {\n      type: String,\n      default: \"info\"\n    },\n    closable: {\n      type: Boolean,\n      default: false\n    },\n    showIcon: {\n      type: Boolean,\n      default: true\n    },\n    duration: {\n      type: Number,\n      default: 3e3\n    },\n    resetOnUpdate: {\n      type: Boolean,\n      default: false\n    },\n    resetOnHover: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"close\"],\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"message\");\n    let timer = 0;\n    const handleClose = () => {\n      emit(\"close\");\n    };\n    const startTimer = () => {\n      if (props.duration > 0) {\n        timer = window.setTimeout(handleClose, props.duration);\n      }\n    };\n    const clearTimer = () => {\n      if (timer) {\n        window.clearTimeout(timer);\n        timer = 0;\n      }\n    };\n    onMounted(() => {\n      startTimer();\n    });\n    onUpdated(() => {\n      if (props.resetOnUpdate) {\n        clearTimer();\n        startTimer();\n      }\n    });\n    onUnmounted(() => {\n      clearTimer();\n    });\n    const handleMouseEnter = () => {\n      if (props.resetOnHover) {\n        clearTimer();\n      }\n    };\n    const handleMouseLeave = () => {\n      if (props.resetOnHover) {\n        startTimer();\n      }\n    };\n    return {\n      handleMouseEnter,\n      handleMouseLeave,\n      prefixCls,\n      handleClose\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_icon_info_circle_fill = resolveComponent(\"icon-info-circle-fill\");\n  const _component_icon_check_circle_fill = resolveComponent(\"icon-check-circle-fill\");\n  const _component_icon_exclamation_circle_fill = resolveComponent(\"icon-exclamation-circle-fill\");\n  const _component_icon_close_circle_fill = resolveComponent(\"icon-close-circle-fill\");\n  const _component_icon_loading = resolveComponent(\"icon-loading\");\n  const _component_icon_close = resolveComponent(\"icon-close\");\n  const _component_a_icon_hover = resolveComponent(\"a-icon-hover\");\n  return openBlock(), createElementBlock(\"li\", {\n    role: \"alert\",\n    class: normalizeClass([\n      _ctx.prefixCls,\n      `${_ctx.prefixCls}-${_ctx.type}`,\n      { [`${_ctx.prefixCls}-closable`]: _ctx.closable }\n    ]),\n    onMouseenter: _cache[1] || (_cache[1] = (...args) => _ctx.handleMouseEnter && _ctx.handleMouseEnter(...args)),\n    onMouseleave: _cache[2] || (_cache[2] = (...args) => _ctx.handleMouseLeave && _ctx.handleMouseLeave(...args))\n  }, [\n    _ctx.showIcon && !(_ctx.type === \"normal\" && !_ctx.$slots.icon) ? (openBlock(), createElementBlock(\"span\", {\n      key: 0,\n      class: normalizeClass(`${_ctx.prefixCls}-icon`)\n    }, [\n      renderSlot(_ctx.$slots, \"icon\", {}, () => [\n        _ctx.type === \"info\" ? (openBlock(), createBlock(_component_icon_info_circle_fill, { key: 0 })) : _ctx.type === \"success\" ? (openBlock(), createBlock(_component_icon_check_circle_fill, { key: 1 })) : _ctx.type === \"warning\" ? (openBlock(), createBlock(_component_icon_exclamation_circle_fill, { key: 2 })) : _ctx.type === \"error\" ? (openBlock(), createBlock(_component_icon_close_circle_fill, { key: 3 })) : _ctx.type === \"loading\" ? (openBlock(), createBlock(_component_icon_loading, { key: 4 })) : createCommentVNode(\"v-if\", true)\n      ])\n    ], 2)) : createCommentVNode(\"v-if\", true),\n    createElementVNode(\"span\", {\n      class: normalizeClass(`${_ctx.prefixCls}-content`)\n    }, [\n      renderSlot(_ctx.$slots, \"default\")\n    ], 2),\n    _ctx.closable ? (openBlock(), createElementBlock(\"span\", {\n      key: 1,\n      class: normalizeClass(`${_ctx.prefixCls}-close-btn`),\n      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleClose && _ctx.handleClose(...args))\n    }, [\n      createVNode(_component_a_icon_hover, null, {\n        default: withCtx(() => [\n          createVNode(_component_icon_close)\n        ]),\n        _: 1\n      })\n    ], 2)) : createCommentVNode(\"v-if\", true)\n  ], 34);\n}\nvar Message = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { Message as default };\n","import { defineComponent, createVNode, TransitionGroup, isVNode } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport Message from \"./message.js\";\nimport usePopupManager from \"../_hooks/use-popup-manager.js\";\nimport { getSlotFunction } from \"../_utils/vue-utils.js\";\nfunction _isSlot(s) {\n  return typeof s === \"function\" || Object.prototype.toString.call(s) === \"[object Object]\" && !isVNode(s);\n}\nvar MessageList = defineComponent({\n  name: \"MessageList\",\n  props: {\n    messages: {\n      type: Array,\n      default: () => []\n    },\n    position: {\n      type: String,\n      default: \"top\"\n    }\n  },\n  emits: [\"close\", \"afterClose\"],\n  setup(props, context) {\n    const prefixCls = getPrefixCls(\"message-list\");\n    const {\n      zIndex\n    } = usePopupManager(\"message\", {\n      runOnMounted: true\n    });\n    return () => {\n      let _slot;\n      return createVNode(TransitionGroup, {\n        \"class\": [prefixCls, `${prefixCls}-${props.position}`],\n        \"name\": \"fade-message\",\n        \"tag\": \"ul\",\n        \"style\": {\n          zIndex: zIndex.value\n        },\n        \"onAfterLeave\": () => context.emit(\"afterClose\")\n      }, _isSlot(_slot = props.messages.map((item) => {\n        const slots = {\n          default: getSlotFunction(item.content),\n          icon: getSlotFunction(item.icon)\n        };\n        return createVNode(Message, {\n          \"key\": item.id,\n          \"type\": item.type,\n          \"duration\": item.duration,\n          \"closable\": item.closable,\n          \"resetOnUpdate\": item.resetOnUpdate,\n          \"resetOnHover\": item.resetOnHover,\n          \"onClose\": () => context.emit(\"close\", item.id)\n        }, slots);\n      })) ? _slot : {\n        default: () => [_slot]\n      });\n    };\n  }\n});\nexport { MessageList as default };\n","import { reactive, render, ref, createVNode } from \"vue\";\nimport { MESSAGE_TYPES } from \"../_utils/constant.js\";\nimport { getOverlay } from \"../_utils/dom.js\";\nimport { isString, isUndefined, isFunction } from \"../_utils/is.js\";\nimport MessageList from \"./message-list.js\";\nclass MessageManger {\n  constructor(config, appContext) {\n    this.messageCount = 0;\n    this.add = (config2) => {\n      var _a;\n      this.messageCount++;\n      const id = (_a = config2.id) != null ? _a : `__arco_message_${this.messageCount}`;\n      if (this.messageIds.has(id)) {\n        return this.update(id, config2);\n      }\n      const message2 = reactive({ id, ...config2 });\n      this.messages.value.push(message2);\n      this.messageIds.add(id);\n      return {\n        close: () => this.remove(id)\n      };\n    };\n    this.update = (id, config2) => {\n      for (let i = 0; i < this.messages.value.length; i++) {\n        if (this.messages.value[i].id === id) {\n          const resetOnUpdate = !isUndefined(config2.duration);\n          Object.assign(this.messages.value[i], { ...config2, id, resetOnUpdate });\n          break;\n        }\n      }\n      return {\n        close: () => this.remove(id)\n      };\n    };\n    this.remove = (id) => {\n      for (let i = 0; i < this.messages.value.length; i++) {\n        const item = this.messages.value[i];\n        if (item.id === id) {\n          if (isFunction(item.onClose)) {\n            item.onClose(id);\n          }\n          this.messages.value.splice(i, 1);\n          this.messageIds.delete(id);\n          break;\n        }\n      }\n    };\n    this.clear = () => {\n      this.messages.value.splice(0);\n    };\n    this.destroy = () => {\n      if (this.messages.value.length === 0 && this.container) {\n        render(null, this.container);\n        document.body.removeChild(this.container);\n        this.container = null;\n        messageInstance[this.position] = void 0;\n      }\n    };\n    const { position = \"top\" } = config;\n    this.container = getOverlay(\"message\");\n    this.messageIds = /* @__PURE__ */ new Set();\n    this.messages = ref([]);\n    this.position = position;\n    const vm = createVNode(MessageList, {\n      messages: this.messages.value,\n      position,\n      onClose: this.remove,\n      onAfterClose: this.destroy\n    });\n    if (appContext != null ? appContext : Message._context) {\n      vm.appContext = appContext != null ? appContext : Message._context;\n    }\n    render(vm, this.container);\n    document.body.appendChild(this.container);\n  }\n}\nconst messageInstance = {};\nconst types = [...MESSAGE_TYPES, \"loading\", \"normal\"];\nconst message = types.reduce((pre, value) => {\n  pre[value] = (config, appContext) => {\n    if (isString(config)) {\n      config = { content: config };\n    }\n    const _config = { type: value, ...config };\n    const { position = \"top\" } = _config;\n    if (!messageInstance[position]) {\n      messageInstance[position] = new MessageManger(_config, appContext);\n    }\n    return messageInstance[position].add(_config);\n  };\n  return pre;\n}, {});\nmessage.clear = (position) => {\n  var _a;\n  if (position) {\n    (_a = messageInstance[position]) == null ? void 0 : _a.clear();\n  } else {\n    Object.values(messageInstance).forEach((item) => item == null ? void 0 : item.clear());\n  }\n};\nconst Message = {\n  ...message,\n  install: (app) => {\n    const _message = {\n      clear: message.clear\n    };\n    for (const key of types) {\n      _message[key] = (config, appContext = app._context) => message[key](config, appContext);\n    }\n    app.config.globalProperties.$message = _message;\n  },\n  _context: null\n};\nexport { Message as default };\n","const MESSAGE_TYPES = [\"info\", \"success\", \"warning\", \"error\"];\nconst INPUT_EVENTS = [\n  \"onFocus\",\n  \"onFocusin\",\n  \"onFocusout\",\n  \"onBlur\",\n  \"onChange\",\n  \"onBeforeinput\",\n  \"onInput\",\n  \"onReset\",\n  \"onSubmit\",\n  \"onInvalid\",\n  \"onKeydown\",\n  \"onKeypress\",\n  \"onKeyup\",\n  \"onCopy\",\n  \"onCut\",\n  \"onPaste\",\n  \"onCompositionstart\",\n  \"onCompositionupdate\",\n  \"onCompositionend\",\n  \"onSelect\",\n  \"autocomplete\",\n  \"autofocus\",\n  \"maxlength\",\n  \"minlength\",\n  \"name\",\n  \"pattern\",\n  \"readonly\",\n  \"required\"\n];\nexport { INPUT_EVENTS, MESSAGE_TYPES };\n","<template>\r\n  <header class=\"grid-header\">\r\n    <div class=\"grid-header_left\"></div>\r\n    <div class=\"grid-header_right\">\r\n      <a-space>\r\n        <a-button type=\"primary\" @click=\"openModal\">添加组件</a-button>\r\n        <slot name=\"extra\"></slot>\r\n      </a-space>\r\n    </div>\r\n  </header>\r\n  <div class=\"grid-container\">\r\n    <div ref=\"gridContainer\" class=\"grid-content\" :style=\"gridStyle\" @dragover=\"onDragOver\">\r\n      <!-- 网格背景 -->\r\n      <div class=\"grid-background\" :style=\"gridBackgroundStyle\">\r\n        <div class=\"grid-cell\" v-for=\"item in COLUMNS\" :key=\"item\">\r\n        </div>\r\n      </div>\r\n      <GridsterItem v-for=\"component in addedComponents\" :key=\"component.id\" :component=\"component\"\r\n        :grid-config=\"gridConfig\" :container-info=\"containerInfo\" :all-components=\"addedComponents\"\r\n        @resize=\"onComponentResize\" @drag=\"onComponentDrag\" @remove=\"removeComponent\">\r\n        <slot name=\"item\" :itemData=\"component\"></slot>\r\n      </GridsterItem>\r\n    </div>\r\n  </div>\r\n  <AddComponent ref=\"addComponentRef\" @confirm=\"addComponents\" :component-library=\"props.componentLibrary\">\r\n    <template v-for=\"slot in Object.keys($slots)\" :key=\"slot\" #[slot]=\"slotProps\">\r\n      <slot :name=\"slot\" v-bind=\"slotProps || {}\"></slot>\r\n    </template>\r\n  </AddComponent>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, reactive, nextTick, onMounted, onUnmounted, watch } from 'vue';\r\nimport type { ComponentItemModel, GridConfig, Position, Size, ContainerInfo } from '../types/layout';\r\nimport { COLUMNS } from '../utils/constant';\r\nimport GridsterItem from './GridsterItem.vue';\r\nimport AddComponent from './AddComponent.vue';\r\nimport { Message } from '@arco-design/web-vue';\r\n\r\nimport {\r\n  reorganizeLayout,\r\n  resizeComponentWithAutoFill,\r\n  validatePositionWithLayout,\r\n  validateDragPosition,\r\n  findAvailablePosition,\r\n  autoFillComponentToGrid,\r\n} from '../utils/grid';\r\n\r\ninterface Props {\r\n  componentLibrary: ComponentItemModel[]\r\n  addedComponents: ComponentItemModel[]\r\n}\r\nconst props = defineProps<Props>()\r\nconst emit = defineEmits([\r\n  'get-container-size',\r\n  'add-component',\r\n  'update:added-components'\r\n])\r\n\r\nconst components = computed({\r\n  get: () => {\r\n    return props.addedComponents ? props.addedComponents : [];\r\n  },\r\n  set: (val: ComponentItemModel[]) => {\r\n    emit('update:added-components', val);\r\n  },\r\n})\r\n\r\nconst gridConfig = reactive<GridConfig>({\r\n  gap: 10,\r\n  cellWidth: 0, // 动态计算\r\n})\r\n\r\nconst containerInfo = reactive<ContainerInfo>({\r\n  width: 0,\r\n  height: 0,\r\n  scrollTop: 0\r\n})\r\nconst gridContainer = ref<HTMLElement>()\r\n\r\n// 计算容器高度 - 不允许超出容器高度\r\nconst containerHeight = computed(() => {\r\n  return containerInfo.height // 直接使用容器高度，不允许滚动\r\n})\r\n\r\n// 计算列宽（自适应）\r\nconst updateCellWidth = () => {\r\n  if (!gridContainer.value) return\r\n\r\n  const container = gridContainer.value\r\n  containerInfo.width = container.clientWidth\r\n  containerInfo.height = container.clientHeight\r\n\r\n  // 固定24列，直接计算列宽\r\n  const totalGapWidth = 23 * gridConfig.gap\r\n  const cellWidth = (containerInfo.width - totalGapWidth) / 24\r\n\r\n  // 保留2位小数，设置最小列宽\r\n  gridConfig.cellWidth = Math.max(parseFloat(cellWidth.toFixed(2)), 20)\r\n}\r\n\r\n\r\n// 计算网格样式\r\nconst gridStyle = computed(() => {\r\n  const gap = gridConfig.gap\r\n  const cols = COLUMNS\r\n\r\n  return {\r\n    gridTemplateColumns: `repeat(${cols}, minmax(0, 1fr))`,\r\n    gridTemplateRows: `repeat(auto-fit, 100%)`,\r\n    gap: `${gap}px`,\r\n    width: '100%',\r\n    minHeight: `${containerHeight.value}px`,\r\n  }\r\n})\r\n\r\n// 计算网格背景样式\r\nconst gridBackgroundStyle = computed(() => {\r\n  const gap = gridConfig.gap\r\n  const cols = COLUMNS\r\n\r\n  return {\r\n    gridTemplateColumns: `repeat(${cols}, minmax(0, 1fr))`,\r\n    gap: `${gap}px`,\r\n    gridTemplateRows: `repeat(auto-fit, 100%)`,\r\n    width: '100%',\r\n  }\r\n})\r\n\r\n\r\n// 在容器大小变化时重新布局\r\nconst updateContainerInfo = () => {\r\n  if (!gridContainer.value) return\r\n\r\n  const container = gridContainer.value\r\n  const oldWidth = containerInfo.width\r\n  const oldHeight = containerInfo.height\r\n\r\n  containerInfo.width = container.clientWidth\r\n  containerInfo.height = container.clientHeight\r\n\r\n  updateCellWidth()\r\n\r\n  // 只有当宽度或高度增加时，才进行重新布局\r\n  const widthIncreased = containerInfo.width > oldWidth\r\n  const heightIncreased = containerInfo.height > oldHeight\r\n\r\n  if (widthIncreased || heightIncreased) {\r\n    console.log('容器尺寸增加，重新布局')\r\n    reorganizeLayout(components.value, containerInfo, gridConfig)\r\n  } else if (oldWidth !== containerInfo.width || oldHeight !== containerInfo.height) {\r\n    console.log('容器尺寸减小，保持原有布局')\r\n    // 尺寸减小时，只进行边界检查和调整，不重新布局\r\n    reorganizeLayout(components.value, containerInfo, gridConfig, false, true)\r\n  }\r\n}\r\n\r\nconst onComponentResize = (id: string, newData: Size & Partial<Position> & { resizeType?: string }) => {\r\n  const componentIndex = components.value.findIndex(c => c.id === id)\r\n  if (componentIndex === -1) return\r\n\r\n  const component = components.value[componentIndex]!\r\n\r\n  const newSize: Size = {\r\n    width: newData.width || component!.width,\r\n    height: newData.height || component!.height\r\n  }\r\n\r\n  const newPosition: Position = {\r\n    x: newData.x !== undefined ? newData.x : component!.x,\r\n    y: newData.y !== undefined ? newData.y : component!.y\r\n  }\r\n\r\n  // 根据调整类型决定是否应用自动填充\r\n  let filledSize = newSize\r\n  const resizeType = newData.resizeType || ''\r\n  const isWidthResize = ['left', 'right', 'top-left', 'top-right', 'bottom-left', 'bottom-right'].includes(resizeType)\r\n\r\n  if (isWidthResize) {\r\n    // 只有在调整宽度相关的操作时才进行栅格填充\r\n    filledSize = resizeComponentWithAutoFill(component, newSize, gridConfig)\r\n  }\r\n\r\n  // 使用智能验证（考虑动态布局）\r\n  const validationResult = validatePositionWithLayout(\r\n    components.value,\r\n    id,\r\n    newPosition,\r\n    filledSize,\r\n    containerInfo,\r\n    gridConfig,\r\n    resizeType\r\n  )\r\n\r\n  if (validationResult.valid) {\r\n    component.x = newPosition.x\r\n    component.y = newPosition.y\r\n    component.width = filledSize.width\r\n    component.height = filledSize.height\r\n\r\n    // 更新受影响的组件\r\n    if (validationResult.affectedComponents.length > 0) {\r\n      validationResult.affectedComponents.forEach(affectedComp => {\r\n        const targetComp = components.value.find(c => c.id === affectedComp.id)\r\n        if (targetComp) {\r\n          targetComp.x = affectedComp.x\r\n          targetComp.y = affectedComp.y\r\n        }\r\n      })\r\n    }\r\n\r\n    // 新的碰撞检测逻辑已经在validatePositionWithLayout中处理了布局调整\r\n    // 不需要额外的reorganizeLayout调用\r\n  } else {\r\n    // 可以尝试只调整尺寸不调整位置\r\n    const fallbackResult = validatePositionWithLayout(\r\n      components.value,\r\n      id,\r\n      { x: component.x, y: component.y }, // 保持原位置\r\n      filledSize, // 使用填充后的尺寸\r\n      containerInfo,\r\n      gridConfig,\r\n      resizeType\r\n    )\r\n\r\n    if (fallbackResult.valid) {\r\n      component.width = filledSize.width\r\n      component.height = filledSize.height\r\n\r\n      // 更新受影响的组件\r\n      if (fallbackResult.affectedComponents.length > 0) {\r\n        fallbackResult.affectedComponents.forEach(affectedComp => {\r\n          const targetComp = components.value.find(c => c.id === affectedComp.id)\r\n          if (targetComp) {\r\n            targetComp.x = affectedComp.x\r\n            targetComp.y = affectedComp.y\r\n          }\r\n        })\r\n      }\r\n\r\n      // 新的碰撞检测逻辑已经在validatePositionWithLayout中处理了布局调整\r\n      // 不需要额外的reorganizeLayout调用\r\n    }\r\n  }\r\n}\r\n\r\n// 组件拖拽\r\nconst onComponentDrag = (id: string, newPosition: Position) => {\r\n  const component = components.value.find(c => c.id === id)\r\n  if (!component) return\r\n\r\n  // 使用智能拖拽验证（内部包含智能吸附逻辑）\r\n  const dragResult = validateDragPosition(\r\n    components.value,\r\n    id,\r\n    newPosition,\r\n    containerInfo,\r\n    gridConfig\r\n  )\r\n\r\n  if (dragResult.valid) {\r\n    // 使用经过智能吸附处理的最终位置\r\n    component.x = dragResult.finalPosition.x\r\n    component.y = dragResult.finalPosition.y\r\n\r\n    // 更新受影响的组件\r\n    if (dragResult.affectedComponents.length > 0) {\r\n      dragResult.affectedComponents.forEach(affectedComp => {\r\n        const targetComp = components.value.find(c => c.id === affectedComp.id)\r\n        if (targetComp) {\r\n          targetComp.x = affectedComp.x\r\n          targetComp.y = affectedComp.y\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n// 移除组件\r\nconst removeComponent = (id: string) => {\r\n  const index = components.value.findIndex(c => c.id === id)\r\n  if (index !== -1) {\r\n    components.value.splice(index, 1)\r\n  }\r\n}\r\n\r\n// 拖拽放置处理\r\nconst onDragOver = (e: DragEvent) => {\r\n  e.preventDefault()\r\n  if (e.dataTransfer) {\r\n    e.dataTransfer.dropEffect = 'move'\r\n  }\r\n}\r\n\r\n\r\n\r\n// ResizeObserver 监听容器大小变化\r\nlet resizeObserver: ResizeObserver | null = null\r\n\r\n// 初始化\r\nonMounted(() => {\r\n  if (gridContainer.value) {\r\n    resizeObserver = new ResizeObserver(() => {\r\n      updateContainerInfo()\r\n    })\r\n    resizeObserver.observe(gridContainer.value)\r\n  }\r\n\r\n  updateContainerInfo()\r\n  window.addEventListener('resize', updateContainerInfo)\r\n})\r\n\r\n// 清理\r\nonUnmounted(() => {\r\n  if (resizeObserver) {\r\n    resizeObserver.disconnect()\r\n  }\r\n  window.removeEventListener('resize', updateContainerInfo)\r\n})\r\n\r\nwatch(\r\n  () => containerInfo,\r\n  () => emit('get-container-size', containerInfo),\r\n  { deep: true }\r\n)\r\n\r\nconst addComponentRef = ref()\r\n\r\nconst openModal = () => {\r\n  addComponentRef.value.open()\r\n}\r\n\r\n// 添加组件时的优化逻辑（自动向后排列，不重新布局）\r\nconst addComponents = (selectedComponents: ComponentItemModel[]) => {\r\n  let addedCount = 0\r\n  const failedComponents: string[] = []\r\n\r\n  selectedComponents.forEach(comp => {\r\n    const position = findAvailablePosition(components.value, comp, containerInfo, gridConfig)\r\n    if (position) {\r\n      const newComponent: ComponentItemModel = {\r\n        ...comp,\r\n        id: `${comp.type}-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`,\r\n        x: position.x,\r\n        y: position.y\r\n      }\r\n\r\n      // 确保组件尺寸正确\r\n      autoFillComponentToGrid(newComponent, gridConfig)\r\n\r\n      // 直接添加组件，不重新布局\r\n      components.value.push(newComponent)\r\n      addedCount++\r\n      console.log(`✓ 成功添加: ${comp.name} 位置: (${position.x}, ${position.y})`)\r\n    } else {\r\n      console.warn(`✗ 找不到合适位置: ${comp.name}`)\r\n      failedComponents.push(comp.name)\r\n    }\r\n  })\r\n\r\n  if (failedComponents.length > 0) {\r\n    Message.warning(`以下组件无法添加（空间不足）：\\n${failedComponents.join('\\n')}`)\r\n    return\r\n  }\r\n\r\n  if (addedCount > 0) {\r\n    console.log(`成功添加 ${addedCount} 个组件`)\r\n  }\r\n\r\n  addComponentRef.value.close()\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.grid-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 60px;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 20px;\r\n\r\n  &_right,\r\n  &_left {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  &_right {\r\n    justify-content: flex-end;\r\n  }\r\n}\r\n\r\n.grid-container {\r\n  display: flex;\r\n  height: calc(100% - 60px);\r\n  overflow: hidden;\r\n  padding: 10px;\r\n  background: #fff;\r\n}\r\n\r\n.grid-content {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n  flex: 1;\r\n  display: grid;\r\n  // background: white;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n  justify-content: start;\r\n  align-content: start;\r\n  min-width: 0;\r\n  /* 防止网格溢出 */\r\n}\r\n\r\n.grid-background {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  pointer-events: none;\r\n  z-index: 0;\r\n  background: #fff;\r\n  display: grid;\r\n\r\n  .grid-cell {\r\n    background: #f0f5f5;\r\n    height: 100%;\r\n  }\r\n}\r\n</style>\r\n","// 导出组件\r\nexport { default as GridDrag } from './components/GridDrag.vue'\r\nexport { default as GridsterItem } from './components/GridsterItem.vue'\r\nexport { default as AddComponent } from './components/AddComponent.vue'\r\n\r\n// 导出类型\r\nexport type {\r\n  ComponentItemModel,\r\n  GridConfig,\r\n  Position,\r\n  Size,\r\n  ContainerInfo\r\n} from './types/layout'\r\n\r\n// 导出工具函数\r\nexport {\r\n  validatePositionWithLayout,\r\n  validateDragPosition,\r\n  findAvailablePosition,\r\n  snapToColumnGridWithSmartHeight,\r\n  reorganizeLayout,\r\n  autoFillComponentToGrid,\r\n  resizeComponentWithAutoFill,\r\n  getAffectedComponents\r\n} from './utils/grid'\r\n\r\n// 导出常量\r\nexport { COLUMNS } from './utils/constant'\r\n\r\n// Vue插件安装函数\r\nimport type { App } from 'vue'\r\nimport GridDrag from './components/GridDrag.vue'\r\nimport GridsterItem from './components/GridsterItem.vue'\r\nimport AddComponent from './components/AddComponent.vue'\r\n\r\nexport function install(app: App): void {\r\n  app.component('GridDrag', GridDrag)\r\n  app.component('GridsterItem', GridsterItem)\r\n  app.component('AddComponent', AddComponent)\r\n}\r\n\r\n// 插件对象\r\nexport interface GridDragPlugin {\r\n  install: (app: App) => void\r\n  GridDrag: typeof GridDrag\r\n  GridsterItem: typeof GridsterItem\r\n  AddComponent: typeof AddComponent\r\n}\r\n\r\n// 默认导出\r\nconst plugin: GridDragPlugin = {\r\n  install,\r\n  GridDrag,\r\n  GridsterItem,\r\n  AddComponent\r\n}\r\n\r\nexport default plugin"],"names":["COLUMNS","findAvailablePosition","components","newComponent","containerInfo","gridConfig","width","containerWidth","height","containerHeight","gap","cellWidth","console","log","name","autoFillComponentToGrid","warn","spanCols","Math","ceil","actualSpanCols","min","columnHeights","Array","fill","comp","startCol","floor","x","compSpanCols","endCol","compBottomY","y","i","max","slice","bestStartCol","minHeight","Infinity","maxHeightInRange","newX","newY","newPosition","parseFloat","toFixed","newSize","existingComp","hasOverlap","snapToColumnGridWithSmartHeight","position","componentSize","currentId","unitWidth","nearestColumn","round","componentCols","maxColumn","snappedX","snappedY","candidateComponents","filter","id","horizontalOverlap","isAbove","length","closestComponent","minDistance","distance","reorganizeLayout","skipAutoFill","onlyOnSizeIncrease","columnWidth","newHeight","component","minWidth","requiredCols","actualCols","filledWidth","resizeComponentWithAutoFill","actualWidth","actualHeight","finalWidth","finalHeight","findPositionBelowComponent","targetY","overlappingComponents","sort","a","b","foundPosition","getAffectedComponents","resizingComponent","resizeType","widthIncreased","heightIncreased","resizedComponent","otherComponent","affected","canResize","includes","rightComponents","verticalOverlap","isOnRight","newRightEdge","needsPush","pushDistance","requiredDistance","componentsToMove","componentsToWrap","push","allComponents","c","some","rc","movedComponent","handleRightExpansion","bottomComponents","isBelow","newBottomEdge","handleBottomExpansion","validatePositionWithLayout","size","valid","affectedComponents","currentComponent","find","pos1","size1","pos2","size2","overlapX","overlapY","validateDragPosition","finalPosition","currentSize","snappedPosition","props","__props","emit","__emit","isDragging","ref","isResizing","currentResizeType","dragStartPosition","dragOffset","componentStyle","computed","left","top","zIndex","value","cursor","getResizeCursor","type","right","bottom","onEdgeMouseDown","edge","e","preventDefault","stopPropagation","onResizeStart","onCornerMouseDown","corner","onDragStart","dataTransfer","setData","effectAllowed","dragImage","currentTarget","setDragImage","rect","getBoundingClientRect","clientX","clientY","onDrag","containerRect","parentElement","pixelX","pixelY","onDragEnd","getOtherComponents","checkLeftGap","otherComponents","checkTopGap","startX","startY","startWidth","startHeight","startXPos","startYPos","onMouseMove","moveEvent","buttons","onMouseUp","deltaX","deltaY","newWidth","filledSize","document","removeEventListener","addEventListener","_createElementBlock","class","_normalizeClass","resizing","style","draggable","onDragstart","onDragend","_renderSlot","_ctx","$slots","_createElementVNode","_hoisted_1","onMousedown","_cache","$event","_createVNode","_component_icon_delete","onClick","$emit","visible","selectedComponents","searchQuery","filteredComponents","componentLibrary","query","toLowerCase","isSelected","selected","onComponentClick","index","findIndex","item","splice","onComponentSelect","Date","now","random","toString","substr","handleOk","close","__expose","open","_createBlock","_component_a_modal","title","onOk","onCancel","_component_a_alert","_toDisplayString","_hoisted_2","_hoisted_3","_component_a_input","placeholder","_component_a_scrollbar","overflow","_hoisted_4","_Fragment","_renderList","key","_hoisted_6","_hoisted_7","opt","Object","prototype","isNumber","obj","call","isUndefined","isFunction","configProviderInjectionKey","Symbol","getPrefixCls","componentName","_a","_b","_c","instance","getCurrentInstance","configProvider","inject","prefix","prefixCls","appContext","config","globalProperties","classPrefix","getSlotFunction","param","window","_export_sfc","sfc","val","IconHover","defineComponent","String","default","disabled","Boolean","setup","$props","$setup","$data","$options","openBlock","createElementBlock","normalizeClass","renderSlot","_sfc_main","Number","strokeWidth","strokeLinecap","validator","strokeLinejoin","rotate","spin","emits","click","ev","cls","innerStyle","styles","fontSize","transform","_IconClose","viewBox","xmlns","stroke","normalizeStyle","args","createElementVNode","d","IconClose","assign","install","app","options","iconPrefix","_IconInfoCircleFill","IconInfoCircleFill","_IconCheckCircleFill","IconCheckCircleFill","_IconExclamationCircleFill","IconExclamationCircleFill","_IconCloseCircleFill","IconCloseCircleFill","_IconLoading","IconLoading","popupManager","constructor","this","popupStack","popup","Set","dialog","message","getNextZIndex","from","pop","add","delete","isLastDialog","Message","AIconHover","closable","showIcon","duration","resetOnUpdate","resetOnHover","timer","handleClose","startTimer","setTimeout","clearTimer","clearTimeout","onMounted","onUpdated","onUnmounted","handleMouseEnter","handleMouseLeave","_component_icon_info_circle_fill","resolveComponent","_component_icon_check_circle_fill","_component_icon_exclamation_circle_fill","_component_icon_close_circle_fill","_component_icon_loading","_component_icon_close","_component_a_icon_hover","role","onMouseenter","onMouseleave","icon","createBlock","createCommentVNode","createVNode","withCtx","_","MessageList","messages","context","runOnMounted","watch","visible2","immediate","onBeforeUnmount","readonly","usePopupManager","_slot","TransitionGroup","tag","onAfterLeave","s","map","slots","content","onClose","isVNode","MessageManger","messageCount","config2","messageIds","has","update","message2","reactive","remove","clear","destroy","container","render","body","removeChild","messageInstance","popper","createElement","setAttribute","getOverlay","vm","onAfterClose","_context","appendChild","types","reduce","pre","_config","values","forEach","_message","$message","get","addedComponents","set","scrollTop","gridContainer","gridStyle","gridTemplateColumns","gridTemplateRows","gridBackgroundStyle","updateContainerInfo","oldWidth","oldHeight","clientWidth","clientHeight","totalGapWidth","updateCellWidth","onComponentResize","newData","componentIndex","validationResult","affectedComp","targetComp","fallbackResult","onComponentDrag","dragResult","removeComponent","onDragOver","dropEffect","resizeObserver","ResizeObserver","observe","disconnect","deep","addComponentRef","openModal","addComponents","addedCount","failedComponents","substring","warning","join","_component_a_space","_component_a_button","onDragover","_unref","GridsterItem","onResize","onRemove","itemData","AddComponent","onConfirm","keys","slot","fn","_withCtx","slotProps","_normalizeProps","_guardReactiveProps","GridDrag","plugin"],"mappings":"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","x_google_ignoreList":[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]}