!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).GridDrag={},e.Vue)}(this,function(e,t){"use strict";const o=24,n=60,i=100;function r(e,t,n,i){const{width:r,height:l}=n,{gap:s,cellWidth:c}=i;if(a(t,i),console.log(`📦 填充后组件: ${t.name}, 宽度: ${t.width}, 高度: ${t.height}`),t.width>r)return console.warn("组件宽度超过容器宽度"),null;const d=Math.ceil(t.width/(c+s)),h=Math.min(d,o);console.log(`📏 组件占用列数: ${d} -> ${h}`);const u=new Array(o).fill(0);for(const a of e){const e=Math.floor(a.x/(c+s)),t=Math.ceil(a.width/(c+s)),n=Math.min(e+t,o),i=a.y+a.height+s;console.log(`📍 现有组件: ${a.name}, 位置: (${a.x}, ${a.y}), 尺寸: ${a.width}x${a.height}`),console.log(`📍 占用列: ${e} -> ${n} (${t}列), 底部Y: ${i}`);for(let r=e;r<n;r++)r>=0&&r<o&&(u[r]=Math.max(u[r]||0,i))}console.log("📊 列高度数组:",u.slice(0,12));let p=0,f=1/0;for(let a=0;a<=o-h;a++){let e=0;for(let t=a;t<a+h;t++)e=Math.max(e,u[t]||0);e<f&&(f=e,p=a)}const g=p*(c+s),v=f;if(console.log(`🎯 最佳位置: 列${p}, 高度${f} -> 坐标(${g}, ${v})`),v+t.height>l)return console.warn(`❌ 位置超出容器高度: ${v+t.height} > ${l}`),null;const x={x:parseFloat(g.toFixed(3)),y:parseFloat(v.toFixed(3))},y={width:t.width,height:t.height};for(const o of e)if(m(x,y,{x:o.x,y:o.y},{width:o.width,height:o.height}))return console.warn("新组件位置与现有组件重叠"),null;return x}function l(e,t,n,i,r,l){const{width:a,height:s}=r,{gap:c}=l,d=(a-23*c)/o+c;let h=Math.round(e.x/d);const u=Math.ceil(t.width/d),p=o-u;h=Math.max(0,Math.min(h,p));const m=h*d;let f=e.y;const g=n.filter(o=>{if(o.id===i)return!1;const n=m<o.x+o.width&&m+t.width>o.x,r=o.y+o.height<=e.y;return n&&r});if(g.length>0){let t=null,o=1/0;for(const n of g){const i=e.y-(n.y+n.height);i>=0&&i<o&&(o=i,t=n)}t&&o<=c?(f=t.y+t.height+c,console.log(`高度吸附: 距离=${o}, 吸附到Y=${f}`)):console.log(`不进行高度吸附: 距离=${o} > gap=${c}`)}return f+t.height>s&&(f=s-t.height),f=Math.max(0,f),{x:parseFloat(m.toFixed(3)),y:parseFloat(f.toFixed(3))}}function a(e,t){const{cellWidth:i,gap:r}=t,l=e.minWidth||i,a=e.minHeight||n;e.width=Math.max(e.width,l),e.height=Math.max(e.height,a);const s=Math.ceil(e.width/(i+r)),c=Math.min(s,o),d=c*i+(c-1)*r;e.width=parseFloat(d.toFixed(3))}function s(e,t,i){const{gap:r,cellWidth:l}=i,a=e.minWidth||l,s=e.minHeight||n,c=Math.max(t.width,a),d=Math.max(t.height,s),h=Math.ceil(c/(l+r)),u=Math.min(h,o),p=u*l+(u-1)*r,m=Math.max(p,a),f=Math.max(d,s);return{width:parseFloat(m.toFixed(3)),height:parseFloat(f.toFixed(3))}}function c(e,t,o,n,i,r){const l=[],{width:a,height:s}=i,{gap:c}=r,d={...t,x:o.x,y:o.y,width:n.width,height:n.height},u=e.filter(e=>{if(e.id===t.id)return!1;const o=!(d.y+d.height<=e.y||e.y+e.height<=d.y),n=e.x>=t.x+t.width-c;return o&&n});if(0===u.length)return{affected:[],canResize:!0};u.sort((e,t)=>e.x-t.x);const p=d.x+d.width;let m=!1,f=0;for(const h of u){const e=p+c-h.x;if(e>0){m=!0,f=e;break}}if(!m)return{affected:[],canResize:!0};const g=[],v=[];for(const h of u){const e=h.x+f;e+h.width>a?v.push(h):g.push({...h,x:e,y:h.y})}if(v.length>0){const o=[...e.filter(e=>e.id!==t.id&&!u.some(t=>t.id===e.id)),d,...g];v.sort((e,t)=>e.x-t.x);for(const e of v){const t=h(o,e,r);if(t+e.height>s){const t=a-e.width,n={...e,x:t,y:e.y};return g.push(n),o.push(n),{affected:[],canResize:!1}}{const n={...e,x:e.x,y:t};g.push(n),o.push(n)}}}return l.push(...g),{affected:l,canResize:!0}}function d(e,t,o,n,i,r){const l=[],{height:a}=i,{gap:s}=r,c={...t,x:o.x,y:o.y,width:n.width,height:n.height},d=e.filter(e=>{if(e.id===t.id)return!1;const o=!(c.x+c.width<=e.x||e.x+e.width<=c.x),n=e.y>=t.y+t.height-s;return o&&n});if(0===d.length)return{affected:[],canResize:!0};d.sort((e,t)=>e.y-t.y);const h=c.y+c.height;let u=!1,p=0;for(const m of d){const e=h+s-m.y;if(e>0){u=!0,p=e;break}}if(!u)return{affected:[],canResize:!0};for(const m of d){const e=m.y+p;if(e+m.height>a)return{affected:[],canResize:!1};l.push({...m,x:parseFloat(m.x.toFixed(3)),y:parseFloat(e.toFixed(3))})}return{affected:l,canResize:!0}}function h(e,t,o){const{gap:n}=o;let i=t.y+t.height+n;const r=e.filter(e=>{if(e.id===t.id)return!1;return!(t.x+t.width<=e.x||e.x+e.width<=t.x)});r.sort((e,t)=>e.y-t.y);let l=!1;for(;!l;){l=!0;for(const e of r){if(!(i+t.height<=e.y||e.y+e.height<=i)){i=e.y+e.height+n,l=!1;break}}}return i}function u(e,t,o,n,i,r,l){const a=n.width>t.width,s=n.height>t.height,h=o.x!==t.x||o.y!==t.y;if(h){const i={...t,x:o.x,y:o.y,width:n.width,height:n.height};for(const o of e)if(o.id!==t.id&&m({x:i.x,y:i.y},{width:i.width,height:i.height},{x:o.x,y:o.y},{width:o.width,height:o.height}))return{affected:[],canResize:!1};return{affected:[],canResize:!0}}if("bottom-right"===l&&a&&s)return function(e,t,o,n,i,r){const l=c(e,t,o,n,i,r);if(!l.canResize)return l;const a=d(e.map(e=>{const t=l.affected.find(t=>t.id===e.id);return t?{...e,x:t.x,y:t.y}:e}),t,o,n,i,r);if(!a.canResize)return a;const s=[],h=new Set;for(const c of l.affected)s.push(c),h.add(c.id);for(const c of a.affected)if(h.has(c.id)){const e=s.find(e=>e.id===c.id);e&&(e.y=c.y)}else s.push(c);return{affected:s,canResize:!0}}(e,t,o,n,i,r);if("top-right"===l&&a&&h)return s?c(e,t,o,n,i,r):{affected:[],canResize:!f(e,t,o,n)};if("bottom-left"===l&&s&&h)return a?d(e,t,o,n,i,r):{affected:[],canResize:!f(e,t,o,n)};if("top-left"===l&&h)return{affected:[],canResize:!f(e,t,o,n)};if(a&&("right"===l||l?.includes("right")))return c(e,t,o,n,i,r);if(s&&("bottom"===l||l?.includes("bottom")))return d(e,t,o,n,i,r);{const i={...t,x:o.x,y:o.y,width:n.width,height:n.height};for(const o of e)if(o.id!==t.id&&m({x:i.x,y:i.y},{width:i.width,height:i.height},{x:o.x,y:o.y},{width:o.width,height:o.height}))return{affected:[],canResize:!1};return{affected:[],canResize:!0}}}function p(e,t,o,n,i,r,l){const{width:a,height:s}=i;if(o.x<0||o.y<0||o.x+n.width>a||o.y+n.height>s)return{valid:!1,affectedComponents:[]};const c=e.find(e=>e.id===t);if(!c)return{valid:!1,affectedComponents:[]};const{affected:d,canResize:h}=u(e,c,o,n,i,r,l);return{valid:h,affectedComponents:d}}function m(e,t,o,n){const i=e.x<o.x+n.width&&e.x+t.width>o.x,r=e.y<o.y+n.height&&e.y+t.height>o.y;return i&&r}function f(e,t,o,n){const i={...t,x:o.x,y:o.y,width:n.width,height:n.height};for(const r of e)if(r.id!==t.id&&m({x:i.x,y:i.y},{width:i.width,height:i.height},{x:r.x,y:r.y},{width:r.width,height:r.height}))return!0;return!1}function g(e,t,o,n,i){const{width:r,height:a}=n,s=e.find(e=>e.id===t);if(!s)return{valid:!1,affectedComponents:[],finalPosition:o};const c={width:s.width,height:s.height},d=l(o,c,e,t,n,i);if(d.x<0||d.y<0||d.x+c.width>r||d.y+c.height>a)return{valid:!1,affectedComponents:[],finalPosition:d};for(const l of e)if(l.id!==t&&m(d,c,{x:l.x,y:l.y},{width:l.width,height:l.height}))return{valid:!1,affectedComponents:[],finalPosition:d};return{valid:!0,affectedComponents:[],finalPosition:d}}const v={class:"resize-overlay"},x=(e,t)=>{const o=e.__vccOpts||e;for(const[n,i]of t)o[n]=i;return o},y=x(t.defineComponent({__name:"GridsterItem",props:{component:{},gridConfig:{},containerInfo:{},allComponents:{}},emits:["resize","drag","remove"],setup(e,{emit:o}){const r=e,l=o,a=t.ref(!1),c=t.ref(!1),d=t.ref(""),h=t.ref({x:0,y:0}),u=t.ref({x:0,y:0}),p=t.computed(()=>({position:"absolute",left:`${r.component.x}px`,top:`${r.component.y}px`,width:`${r.component.width}px`,height:`${r.component.height}px`,zIndex:a.value||c.value?i:1,cursor:c.value?m(d.value):"move"})),m=e=>({top:"n-resize",right:"e-resize",bottom:"s-resize",left:"w-resize","top-left":"nw-resize","top-right":"ne-resize","bottom-left":"sw-resize","bottom-right":"se-resize"}[e]||"move"),f=(e,t)=>{t.preventDefault(),t.stopPropagation(),z(e,t)},g=(e,t)=>{t.preventDefault(),t.stopPropagation(),z(e,t)},x=e=>{a.value=!0,e.dataTransfer?.setData("text/plain",r.component.id),e.dataTransfer.effectAllowed="move";const t=e.currentTarget;e.dataTransfer?.setDragImage(t,0,0);const o=t.getBoundingClientRect();h.value={x:r.component.x,y:r.component.y},u.value={x:e.clientX-o.left,y:e.clientY-o.top}},y=e=>{if(!a.value)return;const t=e.currentTarget.parentElement?.getBoundingClientRect();if(!t)return;const o=e.clientX-t.left-u.value.x,n=e.clientY-t.top-u.value.y;l("drag",r.component.id,{x:o,y:n})},w=()=>{a.value=!1,h.value={x:0,y:0},u.value={x:0,y:0}},k=()=>r.allComponents?r.allComponents.filter(e=>e.id!==r.component.id):[],C=e=>{const t=k(),o=r.gridConfig.gap;for(const n of t){if(!(r.component.y+r.component.height<=n.y||n.y+n.height<=r.component.y)&&n.x+n.width<=r.component.x){if(e-(n.x+n.width)<o)return n.x+n.width+o}}return e},b=e=>{const t=k(),o=r.gridConfig.gap;for(const n of t){if(!(r.component.x+r.component.width<=n.x||n.x+n.width<=r.component.x)&&n.y+n.height<=r.component.y){if(e-(n.y+n.height)<o)return n.y+n.height+o}}return e},z=(e,t)=>{t.preventDefault(),t.stopPropagation();const o=t.clientX,a=t.clientY,h=r.component.width,u=r.component.height,p=r.component.x,m=r.component.y,f=r.containerInfo.width,g=r.containerInfo.height;d.value=e,c.value=!0;const v=t=>{if(0===t.buttons)return void x();const c=t.clientX-o,d=t.clientY-a;let v=h,y=u,w=p,k=m;switch(e){case"right":v=Math.max(r.component.minWidth||i,h+c);break;case"left":v=Math.max(r.component.minWidth||i,h-c),w=p+h-v,w=C(w),v=p+h-w;break;case"bottom":y=Math.max(r.component.minHeight||n,u+d);break;case"top":y=Math.max(r.component.minHeight||n,u-d),k=m+u-y,k=b(k),y=m+u-k;break;case"top-right":v=Math.max(r.component.minWidth||i,h+c),y=Math.max(r.component.minHeight||n,u-d),k=m+u-y,k=b(k),y=m+u-k;break;case"top-left":v=Math.max(r.component.minWidth||i,h-c),y=Math.max(r.component.minHeight||n,u-d),w=p+h-v,k=m+u-y,w=C(w),k=b(k),v=p+h-w,y=m+u-k;break;case"bottom-left":v=Math.max(r.component.minWidth||i,h-c),y=Math.max(r.component.minHeight||n,u+d),w=p+h-v,w=C(w),v=p+h-w;break;case"bottom-right":v=Math.max(r.component.minWidth||i,h+c),y=Math.max(r.component.minHeight||n,u+d)}w=Math.max(0,w),k=Math.max(0,k),w+v>f&&(e.includes("left")?(w=f-v,w=Math.max(0,w)):v=f-w),k+y>g&&(e.includes("top")?(k=g-y,k=Math.max(0,k)):y=g-k),v=Math.max(r.component.minWidth||i,v),y=Math.max(r.component.minHeight||n,y);let z={width:v,height:y};["left","right","top-left","top-right","bottom-left","bottom-right"].includes(e)&&(z=s(r.component,{width:v,height:y},r.gridConfig)),w+z.width>f&&(z.width=f-w),k+z.height>g&&(z.height=g-k),z.width=Math.max(r.component.minWidth||i,z.width),z.height=Math.max(r.component.minHeight||n,z.height),l("resize",r.component.id,{width:parseFloat(z.width.toFixed(3)),height:parseFloat(z.height.toFixed(3)),x:parseFloat(w.toFixed(3)),y:parseFloat(k.toFixed(3)),resizeType:e})},x=()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",x),document.removeEventListener("mouseleave",x),c.value=!1,d.value=""};document.addEventListener("mousemove",v),document.addEventListener("mouseup",x),document.addEventListener("mouseleave",x),c.value=!0,d.value=""};return(o,n)=>{const i=t.resolveComponent("icon-delete");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["gridster-item",{resizing:c.value}]),style:t.normalizeStyle(p.value),draggable:"true",onDragstart:x,onDrag:y,onDragend:w},[t.renderSlot(o.$slots,"default",{},void 0,!0),t.createElementVNode("div",v,[t.createElementVNode("div",{class:"edge top",onMousedown:n[0]||(n[0]=e=>f("top",e))},null,32),t.createElementVNode("div",{class:"edge right",onMousedown:n[1]||(n[1]=e=>f("right",e))},null,32),t.createElementVNode("div",{class:"edge bottom",onMousedown:n[2]||(n[2]=e=>f("bottom",e))},null,32),t.createElementVNode("div",{class:"edge left",onMousedown:n[3]||(n[3]=e=>f("left",e))},null,32),t.createElementVNode("div",{class:"corner top-left",onMousedown:n[4]||(n[4]=e=>g("top-left",e))},null,32),t.createElementVNode("div",{class:"corner top-right",onMousedown:n[5]||(n[5]=e=>g("top-right",e))},null,32),t.createElementVNode("div",{class:"corner bottom-left",onMousedown:n[6]||(n[6]=e=>g("bottom-left",e))},null,32),t.createElementVNode("div",{class:"corner bottom-right",onMousedown:n[7]||(n[7]=e=>g("bottom-right",e))},null,32)]),t.createVNode(i,{size:16,class:"remove-btn",onClick:n[8]||(n[8]=t=>o.$emit("remove",e.component.id))})],38)}}}),[["__scopeId","data-v-1e3560db"]]),w={class:"add-container"},k={class:"component-library"},C={class:"search-section"},b={class:"components-grid"},z=["onClick"],$={key:0,class:"selection-indicator"},M={key:0,class:"empty-state"},S=x(t.defineComponent({__name:"AddComponent",props:{componentLibrary:{}},emits:["confirm","cancel"],setup(e,{expose:o,emit:n}){const i=e,r=t.ref(!1),l=t.ref([]),a=n,s=t.ref(""),c=t.computed(()=>{if(!s.value)return i.componentLibrary;const e=s.value.toLowerCase();return i.componentLibrary.filter(t=>t.name.toLowerCase().includes(e))}),d=e=>l.value.some(t=>t.id===e.id),h=e=>{(e=>{const t=l.value.findIndex(t=>t.id===e.id);t>-1?l.value.splice(t,1):l.value.push(e)})({...e,x:0,y:0})},u=()=>{l.value.length>0&&(p(),a("confirm",l.value),l.value=[])},p=()=>{r.value=!1};return o({open:()=>{r.value=!0},close:p}),(e,o)=>{const n=t.resolveComponent("a-alert"),i=t.resolveComponent("a-input"),a=t.resolveComponent("a-scrollbar"),m=t.resolveComponent("a-modal");return t.openBlock(),t.createBlock(m,{visible:r.value,"onUpdate:visible":o[1]||(o[1]=e=>r.value=e),title:"添加组件 ",width:"1000px",onOk:u,onCancel:p},{default:t.withCtx(()=>[t.createElementVNode("div",w,[t.createVNode(n,null,{default:t.withCtx(()=>[t.createTextVNode("已选择："+t.toDisplayString(l.value.length),1)]),_:1}),t.createElementVNode("div",k,[t.createElementVNode("div",C,[t.createVNode(i,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),type:"text",placeholder:"搜索组件...",class:"search-input"},null,8,["modelValue"])]),t.createVNode(a,{style:{height:"500px",overflow:"auto"}},{default:t.withCtx(()=>[t.createElementVNode("div",b,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(c.value,o=>(t.openBlock(),t.createElementBlock("div",{key:o.id,class:t.normalizeClass(["component-card",{selected:d(o)}]),onClick:e=>h(o)},[t.renderSlot(e.$slots,"component",{component:o},void 0,!0),d(o)?(t.openBlock(),t.createElementBlock("div",$," ✓ ")):t.createCommentVNode("",!0)],10,z))),128))])]),_:3}),0===c.value.length?(t.openBlock(),t.createElementBlock("div",M," 未找到匹配的组件 ")):t.createCommentVNode("",!0)])])]),_:3},8,["visible"])}}}),[["__scopeId","data-v-2535082c"]]),B=Object.prototype.toString;function N(e){return"[object Number]"===B.call(e)&&e==e}function E(e){return void 0===e}function L(e){return"function"==typeof e}const F=Symbol("ArcoConfigProvider"),V=e=>{var o,n,i;const r=t.getCurrentInstance(),l=t.inject(F,void 0),a=null!=(i=null!=(n=null==l?void 0:l.prefixCls)?n:null==(o=null==r?void 0:r.appContext.config.globalProperties.$arco)?void 0:o.classPrefix)?i:"arco";return e?`${a}-${e}`:a},j=e=>{if(e)return L(e)?e:()=>e};(()=>{try{return!("undefined"!=typeof window&&void 0!==document)}catch(e){return!0}})();var I=(e,t)=>{for(const[o,n]of t)e[o]=n;return e};var W=I(t.defineComponent({name:"IconHover",props:{prefix:{type:String},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1}},setup:()=>({prefixCls:V("icon-hover")})}),[["render",function(e,o,n,i,r,l){return t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass([e.prefixCls,{[`${e.prefix}-icon-hover`]:e.prefix,[`${e.prefixCls}-size-${e.size}`]:"medium"!==e.size,[`${e.prefixCls}-disabled`]:e.disabled}])},[t.renderSlot(e.$slots,"default")],2)}]]);const _=t.defineComponent({name:"IconClose",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:o}){const n=V("icon");return{cls:t.computed(()=>[n,`${n}-close`,{[`${n}-spin`]:e.spin}]),innerStyle:t.computed(()=>{const t={};return e.size&&(t.fontSize=N(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t}),onClick:e=>{o("click",e)}}}}),O=["stroke-width","stroke-linecap","stroke-linejoin"];var R=I(_,[["render",function(e,o,n,i,r,l){return t.openBlock(),t.createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:t.normalizeClass(e.cls),style:t.normalizeStyle(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:o[0]||(o[0]=(...t)=>e.onClick&&e.onClick(...t))},o[1]||(o[1]=[t.createElementVNode("path",{d:"M9.857 9.858 24 24m0 0 14.142 14.142M24 24 38.142 9.858M24 24 9.857 38.142"},null,-1)]),14,O)}]]);const P=Object.assign(R,{install:(e,t)=>{var o;const n=null!=(o=null==t?void 0:t.iconPrefix)?o:"";e.component(n+R.name,R)}}),T=t.defineComponent({name:"IconInfoCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:o}){const n=V("icon");return{cls:t.computed(()=>[n,`${n}-info-circle-fill`,{[`${n}-spin`]:e.spin}]),innerStyle:t.computed(()=>{const t={};return e.size&&(t.fontSize=N(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t}),onClick:e=>{o("click",e)}}}}),D=["stroke-width","stroke-linecap","stroke-linejoin"];var H=I(T,[["render",function(e,o,n,i,r,l){return t.openBlock(),t.createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:t.normalizeClass(e.cls),style:t.normalizeStyle(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:o[0]||(o[0]=(...t)=>e.onClick&&e.onClick(...t))},o[1]||(o[1]=[t.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z",fill:"currentColor",stroke:"none"},null,-1)]),14,D)}]]);const A=Object.assign(H,{install:(e,t)=>{var o;const n=null!=(o=null==t?void 0:t.iconPrefix)?o:"";e.component(n+H.name,H)}}),G=t.defineComponent({name:"IconCheckCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:o}){const n=V("icon");return{cls:t.computed(()=>[n,`${n}-check-circle-fill`,{[`${n}-spin`]:e.spin}]),innerStyle:t.computed(()=>{const t={};return e.size&&(t.fontSize=N(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t}),onClick:e=>{o("click",e)}}}}),U=["stroke-width","stroke-linecap","stroke-linejoin"];var Z=I(G,[["render",function(e,o,n,i,r,l){return t.openBlock(),t.createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:t.normalizeClass(e.cls),style:t.normalizeStyle(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:o[0]||(o[0]=(...t)=>e.onClick&&e.onClick(...t))},o[1]||(o[1]=[t.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm10.207-24.379a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0L22 26.172l-4.878-4.88a1 1 0 0 0-1.415 0l-1.414 1.415a1 1 0 0 0 0 1.414l7 7a1 1 0 0 0 1.414 0l11.5-11.5Z",fill:"currentColor",stroke:"none"},null,-1)]),14,U)}]]);const q=Object.assign(Z,{install:(e,t)=>{var o;const n=null!=(o=null==t?void 0:t.iconPrefix)?o:"";e.component(n+Z.name,Z)}}),Y=t.defineComponent({name:"IconExclamationCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:o}){const n=V("icon");return{cls:t.computed(()=>[n,`${n}-exclamation-circle-fill`,{[`${n}-spin`]:e.spin}]),innerStyle:t.computed(()=>{const t={};return e.size&&(t.fontSize=N(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t}),onClick:e=>{o("click",e)}}}}),X=["stroke-width","stroke-linecap","stroke-linejoin"];var J=I(Y,[["render",function(e,o,n,i,r,l){return t.openBlock(),t.createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:t.normalizeClass(e.cls),style:t.normalizeStyle(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:o[0]||(o[0]=(...t)=>e.onClick&&e.onClick(...t))},o[1]||(o[1]=[t.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm-2-11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2Zm4-18a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V15Z",fill:"currentColor",stroke:"none"},null,-1)]),14,X)}]]);const K=Object.assign(J,{install:(e,t)=>{var o;const n=null!=(o=null==t?void 0:t.iconPrefix)?o:"";e.component(n+J.name,J)}}),Q=t.defineComponent({name:"IconCloseCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:o}){const n=V("icon");return{cls:t.computed(()=>[n,`${n}-close-circle-fill`,{[`${n}-spin`]:e.spin}]),innerStyle:t.computed(()=>{const t={};return e.size&&(t.fontSize=N(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t}),onClick:e=>{o("click",e)}}}}),ee=["stroke-width","stroke-linecap","stroke-linejoin"];var te=I(Q,[["render",function(e,o,n,i,r,l){return t.openBlock(),t.createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:t.normalizeClass(e.cls),style:t.normalizeStyle(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:o[0]||(o[0]=(...t)=>e.onClick&&e.onClick(...t))},o[1]||(o[1]=[t.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm4.955-27.771-4.95 4.95-4.95-4.95a1 1 0 0 0-1.414 0l-1.414 1.414a1 1 0 0 0 0 1.414l4.95 4.95-4.95 4.95a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-4.95-4.95 4.95-4.95a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0Z",fill:"currentColor",stroke:"none"},null,-1)]),14,ee)}]]);const oe=Object.assign(te,{install:(e,t)=>{var o;const n=null!=(o=null==t?void 0:t.iconPrefix)?o:"";e.component(n+te.name,te)}}),ne=t.defineComponent({name:"IconLoading",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:o}){const n=V("icon");return{cls:t.computed(()=>[n,`${n}-loading`,{[`${n}-spin`]:e.spin}]),innerStyle:t.computed(()=>{const t={};return e.size&&(t.fontSize=N(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t}),onClick:e=>{o("click",e)}}}}),ie=["stroke-width","stroke-linecap","stroke-linejoin"];var re=I(ne,[["render",function(e,o,n,i,r,l){return t.openBlock(),t.createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:t.normalizeClass(e.cls),style:t.normalizeStyle(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:o[0]||(o[0]=(...t)=>e.onClick&&e.onClick(...t))},o[1]||(o[1]=[t.createElementVNode("path",{d:"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6"},null,-1)]),14,ie)}]]);const le=Object.assign(re,{install:(e,t)=>{var o;const n=null!=(o=null==t?void 0:t.iconPrefix)?o:"";e.component(n+re.name,re)}});const ae=new class{constructor(){this.popupStack={popup:new Set,dialog:new Set,message:new Set},this.getNextZIndex=e=>("message"===e?Array.from(this.popupStack.message).pop()||5e3:Array.from(this.popupStack.popup).pop()||1e3)+1,this.add=e=>{const t=this.getNextZIndex(e);return this.popupStack[e].add(t),"dialog"===e&&this.popupStack.popup.add(t),t},this.delete=(e,t)=>{this.popupStack[t].delete(e),"dialog"===t&&this.popupStack.popup.delete(e)},this.isLastDialog=e=>!(this.popupStack.dialog.size>1)||e===Array.from(this.popupStack.dialog).pop()}};var se=I(t.defineComponent({name:"Message",components:{AIconHover:W,IconInfoCircleFill:A,IconCheckCircleFill:q,IconExclamationCircleFill:K,IconCloseCircleFill:oe,IconClose:P,IconLoading:le},props:{type:{type:String,default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},duration:{type:Number,default:3e3},resetOnUpdate:{type:Boolean,default:!1},resetOnHover:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:o}){const n=V("message");let i=0;const r=()=>{o("close")},l=()=>{e.duration>0&&(i=window.setTimeout(r,e.duration))},a=()=>{i&&(window.clearTimeout(i),i=0)};t.onMounted(()=>{l()}),t.onUpdated(()=>{e.resetOnUpdate&&(a(),l())}),t.onUnmounted(()=>{a()});return{handleMouseEnter:()=>{e.resetOnHover&&a()},handleMouseLeave:()=>{e.resetOnHover&&l()},prefixCls:n,handleClose:r}}}),[["render",function(e,o,n,i,r,l){const a=t.resolveComponent("icon-info-circle-fill"),s=t.resolveComponent("icon-check-circle-fill"),c=t.resolveComponent("icon-exclamation-circle-fill"),d=t.resolveComponent("icon-close-circle-fill"),h=t.resolveComponent("icon-loading"),u=t.resolveComponent("icon-close"),p=t.resolveComponent("a-icon-hover");return t.openBlock(),t.createElementBlock("li",{role:"alert",class:t.normalizeClass([e.prefixCls,`${e.prefixCls}-${e.type}`,{[`${e.prefixCls}-closable`]:e.closable}]),onMouseenter:o[1]||(o[1]=(...t)=>e.handleMouseEnter&&e.handleMouseEnter(...t)),onMouseleave:o[2]||(o[2]=(...t)=>e.handleMouseLeave&&e.handleMouseLeave(...t))},[e.showIcon&&("normal"!==e.type||e.$slots.icon)?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(`${e.prefixCls}-icon`)},[t.renderSlot(e.$slots,"icon",{},()=>["info"===e.type?(t.openBlock(),t.createBlock(a,{key:0})):"success"===e.type?(t.openBlock(),t.createBlock(s,{key:1})):"warning"===e.type?(t.openBlock(),t.createBlock(c,{key:2})):"error"===e.type?(t.openBlock(),t.createBlock(d,{key:3})):"loading"===e.type?(t.openBlock(),t.createBlock(h,{key:4})):t.createCommentVNode("v-if",!0)])],2)):t.createCommentVNode("v-if",!0),t.createElementVNode("span",{class:t.normalizeClass(`${e.prefixCls}-content`)},[t.renderSlot(e.$slots,"default")],2),e.closable?(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(`${e.prefixCls}-close-btn`),onClick:o[0]||(o[0]=(...t)=>e.handleClose&&e.handleClose(...t))},[t.createVNode(p,null,{default:t.withCtx(()=>[t.createVNode(u)]),_:1})],2)):t.createCommentVNode("v-if",!0)],34)}]]);var ce=t.defineComponent({name:"MessageList",props:{messages:{type:Array,default:()=>[]},position:{type:String,default:"top"}},emits:["close","afterClose"],setup(e,o){const n=V("message-list"),{zIndex:i}=function(e,{visible:o,runOnMounted:n}={}){const i=t.ref(0),r=()=>{i.value=ae.add(e)},l=()=>{ae.delete(i.value,e)};return t.watch(()=>null==o?void 0:o.value,e=>{e?r():l()},{immediate:!0}),n&&(t.onMounted(()=>{r()}),t.onBeforeUnmount(()=>{l()})),{zIndex:t.readonly(i),open:r,close:l,isLastDialog:()=>!1}}("message",{runOnMounted:!0});return()=>{let r;return t.createVNode(t.TransitionGroup,{class:[n,`${n}-${e.position}`],name:"fade-message",tag:"ul",style:{zIndex:i.value},onAfterLeave:()=>o.emit("afterClose")},"function"==typeof(l=r=e.messages.map(e=>{const n={default:j(e.content),icon:j(e.icon)};return t.createVNode(se,{key:e.id,type:e.type,duration:e.duration,closable:e.closable,resetOnUpdate:e.resetOnUpdate,resetOnHover:e.resetOnHover,onClose:()=>o.emit("close",e.id)},n)}))||"[object Object]"===Object.prototype.toString.call(l)&&!t.isVNode(l)?r:{default:()=>[r]});var l}}});class de{constructor(e,o){this.messageCount=0,this.add=e=>{var o;this.messageCount++;const n=null!=(o=e.id)?o:`__arco_message_${this.messageCount}`;if(this.messageIds.has(n))return this.update(n,e);const i=t.reactive({id:n,...e});return this.messages.value.push(i),this.messageIds.add(n),{close:()=>this.remove(n)}},this.update=(e,t)=>{for(let o=0;o<this.messages.value.length;o++)if(this.messages.value[o].id===e){const n=!E(t.duration);Object.assign(this.messages.value[o],{...t,id:e,resetOnUpdate:n});break}return{close:()=>this.remove(e)}},this.remove=e=>{for(let t=0;t<this.messages.value.length;t++){const o=this.messages.value[t];if(o.id===e){L(o.onClose)&&o.onClose(e),this.messages.value.splice(t,1),this.messageIds.delete(e);break}}},this.clear=()=>{this.messages.value.splice(0)},this.destroy=()=>{0===this.messages.value.length&&this.container&&(t.render(null,this.container),document.body.removeChild(this.container),this.container=null,he[this.position]=void 0)};const{position:n="top"}=e;this.container=(e=>{const t=document.createElement("div");return t.setAttribute("class",`arco-overlay arco-overlay-${e}`),t})("message"),this.messageIds=new Set,this.messages=t.ref([]),this.position=n;const i=t.createVNode(ce,{messages:this.messages.value,position:n,onClose:this.remove,onAfterClose:this.destroy});(null!=o?o:me._context)&&(i.appContext=null!=o?o:me._context),t.render(i,this.container),document.body.appendChild(this.container)}}const he={},ue=["info","success","warning","error","loading","normal"],pe=ue.reduce((e,t)=>(e[t]=(e,o)=>{var n;n=e,"[object String]"===B.call(n)&&(e={content:e});const i={type:t,...e},{position:r="top"}=i;return he[r]||(he[r]=new de(i,o)),he[r].add(i)},e),{});pe.clear=e=>{var t;e?null==(t=he[e])||t.clear():Object.values(he).forEach(e=>null==e?void 0:e.clear())};const me={...pe,install:e=>{const t={clear:pe.clear};for(const o of ue)t[o]=(t,n=e._context)=>pe[o](t,n);e.config.globalProperties.$message=t},_context:null},fe={class:"grid-header"},ge={class:"grid-header_right"},ve={class:"grid-container"},xe=x(t.defineComponent({__name:"GridDrag",props:{componentLibrary:{},addedComponents:{}},emits:["get-container-size","add-component","update:added-components"],setup(e,{emit:n}){const i=e,l=n,c=t.computed({get:()=>i.addedComponents?i.addedComponents:[],set:e=>{l("update:added-components",e)}}),d=t.reactive({gap:10,cellWidth:0}),h=t.reactive({width:0,height:0,scrollTop:0}),u=t.ref(),m=t.computed(()=>h.height),f=t.computed(()=>{const e=d.gap;return{gridTemplateColumns:"repeat(24, minmax(0, 1fr))",gridTemplateRows:"repeat(auto-fit, 100%)",gap:`${e}px`,width:"100%",minHeight:`${m.value}px`}}),v=t.computed(()=>{const e=d.gap;return{gridTemplateColumns:"repeat(24, minmax(0, 1fr))",gap:`${e}px`,gridTemplateRows:"repeat(auto-fit, 100%)",width:"100%"}}),x=()=>{if(!u.value)return;const e=u.value,t=h.width,o=h.height,n=d.cellWidth,i={width:t};h.width=e.clientWidth,h.height=e.clientHeight,(()=>{if(!u.value)return;const e=u.value;h.width=e.clientWidth,h.height=e.clientHeight;const t=23*d.gap,o=(h.width-t)/24;d.cellWidth=Math.max(parseFloat(o.toFixed(3)),20)})();const r=d.cellWidth;if(t!==h.width||o!==h.height){console.log("容器尺寸变化，进行自适应调整",{oldSize:{width:t,height:o},newSize:{width:h.width,height:h.height},oldCellWidth:n,newCellWidth:r,cellWidthRatio:r/n});const e=c.value.map(e=>({id:e.id,x:e.x,width:e.width}));c.value=function(e,t,o,n,i,r){if(t.width===o.width)return e;const l=i/n;return e.map(e=>{let t=e.x,a=e.y,s=e.width,c=e.height;if(1!==l){const{gap:o}=r,l=Math.round(e.x/(n+o)),a=Math.max(1,Math.round((e.width+o)/(n+o)));t=l*(i+o),s=a*i+(a-1)*o,s=Math.max(s,i)}if(t+s>o.width){const e=o.width-t;e>0?s=Math.min(s,e):t=Math.max(0,o.width-s)}if(a+c>o.height){const e=o.height-a;e>0&&(c=Math.min(c,e))}return{...e,x:parseFloat(t.toFixed(3)),y:parseFloat(a.toFixed(3)),width:parseFloat(s.toFixed(3)),height:parseFloat(c.toFixed(3))}})}(c.value,i,h,n,r,d);const l=c.value.map(e=>({id:e.id,x:e.x,width:e.width}));console.log("组件自适应调整结果",{before:e,after:l})}},w=(e,t)=>{const o=c.value.findIndex(t=>t.id===e);if(-1===o)return;const n=c.value[o],i={width:t.width||n.width,height:t.height||n.height},r={x:void 0!==t.x?t.x:n.x,y:void 0!==t.y?t.y:n.y};let l=i;const a=t.resizeType||"";["left","right","top-left","top-right","bottom-left","bottom-right"].includes(a)&&(l=s(n,i,d));const u=p(c.value,e,r,l,h,d,a);if(u.valid)n.x=r.x,n.y=r.y,n.width=l.width,n.height=l.height,u.affectedComponents.length>0&&u.affectedComponents.forEach(e=>{const t=c.value.find(t=>t.id===e.id);t&&(t.x=e.x,t.y=e.y)});else{const t=p(c.value,e,{x:n.x,y:n.y},l,h,d,a);t.valid&&(n.width=l.width,n.height=l.height,t.affectedComponents.length>0&&t.affectedComponents.forEach(e=>{const t=c.value.find(t=>t.id===e.id);t&&(t.x=e.x,t.y=e.y)}))}},k=(e,t)=>{const o=c.value.find(t=>t.id===e);if(!o)return;const n=g(c.value,e,t,h,d);n.valid&&(o.x=n.finalPosition.x,o.y=n.finalPosition.y,n.affectedComponents.length>0&&n.affectedComponents.forEach(e=>{const t=c.value.find(t=>t.id===e.id);t&&(t.x=e.x,t.y=e.y)}))},C=e=>{const t=c.value.findIndex(t=>t.id===e);-1!==t&&c.value.splice(t,1)},b=e=>{e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")};let z=null;t.onMounted(()=>{u.value&&(z=new ResizeObserver(()=>{x()}),z.observe(u.value)),x(),window.addEventListener("resize",x)}),t.onUnmounted(()=>{z&&z.disconnect(),window.removeEventListener("resize",x)}),t.watch(()=>h,()=>l("get-container-size",h),{deep:!0});const $=t.ref(),M=()=>{$.value.open()},B=e=>{let t=0;const o=[];e.forEach(e=>{const n=r(c.value,e,h,d);if(n){const o={...e,id:`${e.id}-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,x:n.x,y:n.y};a(o,d),c.value.push(o),t++,console.log(`✓ 成功添加: ${e.name} 位置: (${n.x}, ${n.y})`)}else console.warn(`✗ 找不到合适位置: ${e.name}`),o.push(e.name)}),o.length>0?me.warning(`以下组件无法添加（空间不足）：\n${o.join("\n")}`):(t>0&&console.log(`成功添加 ${t} 个组件`),$.value.close())};return(n,r)=>{const l=t.resolveComponent("a-button"),a=t.resolveComponent("a-space");return t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("header",fe,[r[1]||(r[1]=t.createElementVNode("div",{class:"grid-header_left"},null,-1)),t.createElementVNode("div",ge,[t.createVNode(a,null,{default:t.withCtx(()=>[t.createVNode(l,{type:"primary",onClick:M},{default:t.withCtx(()=>[...r[0]||(r[0]=[t.createTextVNode("添加组件",-1)])]),_:1}),t.renderSlot(n.$slots,"extra",{},void 0,!0)]),_:3})])]),t.createElementVNode("div",ve,[t.createElementVNode("div",{ref_key:"gridContainer",ref:u,class:"grid-content",style:t.normalizeStyle(f.value),onDragover:b},[t.createElementVNode("div",{class:"grid-background",style:t.normalizeStyle(v.value)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(o),e=>(t.openBlock(),t.createElementBlock("div",{class:"grid-cell",key:e}))),128))],4),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.addedComponents,o=>(t.openBlock(),t.createBlock(y,{key:o.id,component:o,"grid-config":d,"container-info":h,"all-components":e.addedComponents,onResize:w,onDrag:k,onRemove:C},{default:t.withCtx(()=>[t.renderSlot(n.$slots,"item",{itemData:o},void 0,!0)]),_:2},1032,["component","grid-config","container-info","all-components"]))),128))],36)]),t.createVNode(S,{ref_key:"addComponentRef",ref:$,onConfirm:B,"component-library":i.componentLibrary},t.createSlots({_:2},[t.renderList(Object.keys(n.$slots),e=>({name:e,fn:t.withCtx(o=>[t.renderSlot(n.$slots,e,t.normalizeProps(t.guardReactiveProps(o||{})),void 0,!0)])}))]),1032,["component-library"])],64)}}}),[["__scopeId","data-v-898c9606"]]);function ye(e){e.component("GridDrag",xe),e.component("GridsterItem",y),e.component("AddComponent",S)}const we={install:ye,GridDrag:xe,GridsterItem:y,AddComponent:S};e.AddComponent=S,e.COLUMNS=o,e.GridDrag=xe,e.GridsterItem=y,e.autoFillComponentToGrid=a,e.default=we,e.findAvailablePosition=r,e.getAffectedComponents=u,e.install=ye,e.reorganizeLayout=function(e,t,n,i=!1,r=!1){if(0===e.length)return!0;const{gap:l}=n,s=t.width,c=t.height,d=(s-23*l)/o;if(r){for(const t of e)(t.x+t.width>s||t.y+t.height>c)&&(t.x=Math.min(t.x,s-t.width),t.y=Math.min(t.y,c-t.height),t.x=Math.max(0,t.x),t.y=Math.max(0,t.y));return!0}const h=new Array(o).fill(0);for(const u of e){i||a(u,n);const e=Math.ceil(u.width/(d+l)),t=Math.min(e,o);let r=0,s=1/0;for(let n=0;n<=o-t;n++){let e=0;for(let o=n;o<n+t;o++)e=Math.max(e,h[o]||0);e<s&&(s=e,r=n)}if(u.x=parseFloat((r*(d+l)).toFixed(3)),u.y=parseFloat(s.toFixed(3)),u.y+u.height>c)return console.warn("组件超出容器高度，无法完成布局"),!1;const p=u.y+u.height+l;for(let o=r;o<r+t;o++)h[o]=p}return!0},e.resizeComponentWithAutoFill=s,e.snapToColumnGridWithSmartHeight=l,e.validateDragPosition=g,e.validatePositionWithLayout=p,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
